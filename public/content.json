{"pages":[{"title":"About","text":"","link":"/about/index.html"},{"title":"Project","text":"","link":"/project/index.html"},{"title":"Tags","text":"","link":"/tags/index.html"}],"posts":[{"title":"å€šæ¥¼å¬é£é›¨ï¼Œæ·¡çœ‹æ±Ÿæ¹–è·¯(è½¬)","text":"å€šæ¥¼å¬é£é›¨ï¼Œæ·¡çœ‹æ±Ÿæ¹–è·¯ã€‚ä½†è§æ³ªç—•æ¹¿ï¼Œä¸çŸ¥å¿ƒæ¨è°ï¼é›ªæ— è¸ªï¼Œæƒ…äº¦æ— è¸ªï¼Œé›ªæ— å½¢ï¼Œæƒ…äº¦æ— å½¢ã€‚å†¬æ¥ï¼Œé›ªå€¾åŸï¼Œçˆ±æ¥æƒ…å€¾åŸã€‚å†¬è¿‡ï¼Œé›ªåŒ–æ°´ï¼Œçˆ±è¿‡æƒ…åŒ–æ³ªï¼ â€”â€”ã€Šé£äº‘ã€‹æ¢¦å†™ç»™é£çš„ä¿¡ æ²§æµ·æ¡‘ç”°ï¼Œå¤©è’åœ°è€ï¼Œä¸å¦‚æœ‰ä¸ªäººç‰µæˆ‘çš„æ‰‹ï¼Œä¸€èµ·çœ‹å¤•é˜³è€å»ã€‚æµ·æ¯çŸ³çƒ‚ï¼Œå¤©é•¿åœ°ä¹…ï¼Œä¸å¦‚æœ‰ä¸ªäººé™ªæˆ‘ï¼Œå€šæ¥¼å¬é£é›¨ï¼Œæ·¡çœ‹æ±Ÿæ¹–è·¯ã€‚ å‰å°˜å¾€äº‹ï¼Œéƒ½è®©ä»–éšé£è€Œé€äº†å§ã€‚çº¢å°˜æ»šæ»šï¼Œéƒ½ä»»ä»–æ¹®æ²¡åœ¨å†å²ä¸­å»å§ã€‚ç¡çƒŸå¼¥æ¼«ï¼Œéƒ½è®©ä»–æ¶ˆæ²‰åœ¨å°˜ä¸–é—´é‡Œå§ã€‚ æˆ‘ï¼Œæ„¿ä½œä¸–é—´ç´ å¿ƒäººï¼Œæœ¬ä¸æƒ³æ¶‰å°˜ä¸–å¤ªæ·±çš„æ°´è€Œè¿‡ï¼Œåªæ„¿ç‹¬åä¸€éš…ï¼Œéšä¸–äº‹æµè½¬ï¼Œæ·¡çœ‹çº¢å°˜çš„æ•…äº‹ï¼Œæƒ…æ„Ÿï¼Œæ¢¦æƒ³ï¼Œçç¢çš„ç”Ÿæ´»ã€‚ å¾®é£ï¼Œæ·¡æ·¡çš„ä»é™Œä¸Šå¹æ¥ï¼Œæ è¿‡çª—å‰ï¼Œæˆ‘å¬åˆ°äº†ä»–çš„å¹æ¯ï¼Œé‚£æ˜¯å²æœˆæ·±å¤„çš„æ„Ÿæ…¨ï¼Œä¼¼æ°´æµå¹´ï¼Œæˆ‘ä»¬åƒèŠ±å„¿ä¸€æ ·å„è‡ªæ•£è½åœ¨äº†å¤©æ¶¯ã€‚ æœ‹å‹è¯´ï¼Œæˆ‘æ€»åœ¨ç¢ç¢å¿µç€æ‚²ä¼¤ï¼Œæ¼”ç»ç€åŒæ ·å¿§ä¼¤çš„çˆ±æƒ…ï¼Œè½å¯çš„æ€ç»ªï¼Œå¯‚å¯¥çš„æƒ…æ„«ï¼Œæ·¡æ·¡çš„æƒ…ç¼˜ï¼Œæµ…æ·¡çš„æ€å¿µï¼Œç—´æ‹çš„æ·±æƒ…ï¼Œå¿ƒåŠ¨çš„å”¯ç¾ï¼Œå¿ƒç¢çš„æƒ…æ®‡â€¦â€¦ æˆ‘ï¼Œæ— æ³•å¿˜è®°è®©æˆ‘æœ€åˆå¿ƒåŠ¨çš„äººï¼Œå´æ˜¯é‚£ä»½æƒ…æ„«åœ¨å¿µå¿µä¸å¿˜çš„æ—¥å­é‡Œï¼Œæ·¡äº†ã€‚é‚£æ—¶ï¼Œæˆ‘ç›¸ä¿¡çš„ä¸€ç”Ÿåªçˆ±ä¸€ä¸ªäººçš„ä¿¡å¿µï¼Œä¹Ÿå½»åº•å´©æºƒåœ¨è¾¹ç¼˜äº†ã€‚ ä»æ­¤ï¼Œæˆ‘ä¸çŸ¥è¯¥æ€ä¹ˆç»§ç»­æˆ‘çš„çº¢å°˜æƒ…ç¼˜ï¼Œäººæ•£ï¼Œæƒ…æ·¡ï¼Œå¿ƒæ€§å¼€å§‹å˜å¾—è–„å‡‰ã€‚ç»†æ•°æµå¹´ï¼Œè½¬èº«ç¦»å¼€çš„æ—¥å­ï¼Œäº¦æ˜¯å¾ˆä¹…å¾ˆè¿œäº†ï¼Œè¿™äº›å¹´ï¼Œå¯‚å¯ä¸€ç›´æ±©æ±©æµæ·Œåœ¨å¿ƒæºªã€‚ ä¹Ÿè®¸ï¼Œæˆ‘çˆ±ä¸Šäº†ä¸€ä¸ªäººï¼Œå°±çˆ±ä¸Šäº†å¯‚å¯ï¼Œä¹Ÿçˆ±ä¸Šäº†æ–‡å­—ã€‚æœ‰äººè¯´ï¼Œçˆ±ä¸Šäº†æ–‡å­—çš„å­©å­ï¼Œè‹è€çš„æ¯”è¾ƒå¿«ã€‚å› ä¸ºå¿ƒçš„æ²§æ¡‘ã€‚æˆ‘æƒ³ï¼Œæˆ‘ä¾¿å¦‚æ˜¯æ‰€è¯´ã€‚ æ‰€ä»¥ï¼Œè€Œä»Šå€šæ¥¼å¬é£é›¨ï¼Œæ‚²æ¬¢ç¦»åˆæ€»æ— æƒ…ï¼Œä¸€ä»»é˜¶å‰ç‚¹æ»´åˆ°å¤©æ˜ã€‚æ·¡çœ‹æ±Ÿæ¹–è·¯ï¼Œäººæ¸æ¸è¿œå»ï¼Œæƒ…æ·¡æ·¡æ•£å»ï¼Œä½†è§æ³ªç—•æ¹¿ï¼Œä¸çŸ¥å¿ƒçˆ±è°ã€‚ çº¢é¢œæ˜“è€ï¼Œæƒ…ç¼˜æ˜“é†‰ï¼Œæµå…‰å®¹æ˜“æŠŠäººæŠ›ï¼Œæƒ¹äº†å¿ƒç»ªï¼ŒæŸ“äº†å°˜åŸƒã€‚è‰¯è¾°ç¾æ™¯å¥ˆä½•å¤©ï¼Œæ³ªæ°´å‡‰äº†å¿ƒï¼Œæ‰æ‡‚å¾—ï¼Œæœ€åçš„ç–¼çˆ±æ˜¯æ‰‹æ”¾å¼€ã€‚ æ¸©æš–ï¼Œåˆ¹é‚£èŠ³è²å°½ã€‚æ‚²ä¼¤ï¼Œæ³¨å…¥åŠä¸–å¯‚å¯ã€‚æˆ‘ï¼Œä¸è¿‡æ˜¯ä¸€ä¸ªå¹³å‡¡çš„äººï¼Œä¸€æ¯åˆä¸€æ¯çš„çº¢å°˜é…’ï¼Œè‡ªæ–Ÿè‡ªé¥®ï¼Œé†‰äº†è¿™ä¸€ç”Ÿï¼Œæ·¡äº†çº¢å°˜è·¯ã€‚ é’çƒŸè¢…è¢…ï¼Œé‚£æ˜¯å¿ƒä¸­æŒ¥ä¹‹ä¸å»çš„å¿§ä¼¤ã€‚æ·¡æ·¡æµäº‘ï¼Œé‚£æ˜¯å¿ƒä¸­æ— ä»¥è¨€è¯´çš„ä¼¤ç—›ã€‚é£è½»äº‘æ·¡ï¼ŒæŠ¹æ·¡æµå¹´ï¼Œé™å¬é›¨å£°ï¼Œæ´—å°½èŠ³åï¼Œæ„¿ä½ æˆ‘å®‰å¥½ã€‚ è½»è½»åœ°æ¨å¼€çª—ï¼Œæ²äººå¿ƒè„¾çš„èŠ±é¦™é£˜æ•£åœ¨é£é›¨ä¸­ï¼Œæ‰‘é¼»è€Œæ¥ã€‚æ¸©æš–ï¼Œä¾ç„¶åœ¨çœ¼å‰ï¼Œæ˜¯æˆ‘çš„å¿ƒå¤ªå¤šè´ªæ‹äº†ã€‚ä¸å¦‚æ³¡ä¸€æ¯èŒ¶ï¼Œå®‰äºä¸€ä»½æ·¡ç„¶ã€‚ ä¹Ÿè®¸ï¼Œçˆ±ä¸ä¸çˆ±ï¼Œéƒ½æ˜¯æ®‡ã€‚æ¯•ç«Ÿï¼Œæˆ‘æ€»è§‰å¾—ï¼Œçˆ±æ˜¯äººé—´æœ€ç¾çš„æƒ…æ„«ï¼Œå¿ƒåŠ¨çš„æœ¦èƒ§ï¼ŒæŠµå¾—è¿‡å¿ƒå–œçš„ç—´æ‹è‡ªé†‰ï¼Œå¿ƒç—›çš„é»¯ç„¶é”€é­‚ã€‚ å…¶å®ï¼Œä¸æ˜¯å°†ä»–å¿˜äº†ï¼Œä¹Ÿä¸æ˜¯è®²æ•…äº‹å¿˜äº†ï¼Œæ›´ä¸æ˜¯å°†æƒ…æ„Ÿå¿˜äº†ã€‚è™½ç„¶äº‘æ·¡é£è½»äº†ï¼Œå´ä¾ç„¶æ˜¯ï¼Œå¤šå°‘äº‹ï¼Œæ‰ä¸‹çœ‰å¤´ï¼Œå´ä¸Šå¿ƒé—´ã€‚åªæ˜¯ï¼Œé€‰æ‹©ä¸‰ç¼„å…¶å£ï¼Œä¸è¯´äº†ã€‚ æ‹ˆèŠ±ä¸€ç¬‘ï¼Œæ£ç¢äº†å¿ƒï¼Œå¯‚é™è½¬èº«ï¼Œå®‰ç„¶å®ˆå€™ä¸€ä¸ä¸€ç¼•çš„æƒ…æ„«ï¼Œå¦‚ç¡è²èˆ¬é™èººåœ¨çº¢å°˜çš„æµæ°´é‡Œï¼Œå³ä½¿ï¼Œé£é›¨ç©¿é€ä¸–äº‹ï¼Œäº¦æ³¢æ¾œä¸æƒŠã€‚ å¤å¤œå¾®å‡‰ï¼Œçª—å¤–é›¨æ½ºæ½ºï¼Œéšç€æ—‹å¾‹è½»è½»æµæ³»æŒ‡å°–çš„å¿§ä¼¤ï¼Œäººæ·¡æƒ…è¿œï¼Œé™é™åœ°åç€ï¼Œæƒ³ç€å¿ƒäº‹ï¼Œä»»çº¢å°˜çº·çº­ä¸€ä¸€åŒ–äº†è™šæ— ï¼Œæ•£äº†äº‘çƒŸï¼Œæµ…äº†é£æƒ…ã€‚ ææµ…å¿ƒæ€ï¼ŒæŸä¹‹é«˜é˜ï¼Œè½¬èº«ç¦»å¼€ã€‚å¦‚è²ç¦…å®šï¼Œæ½œå…¥çº¢å°˜ï¼Œå‡ºæ·¤æ³¥è€Œä¸æŸ“ã€‚å€šæ¥¼å¬é£é›¨ï¼Œæ·¡çœ‹æ±Ÿæ¹–è·¯â€¦â€¦ ä½œè€…ï¼šè½å¶é“¾æ¥ï¼šhttp://www.duwenzhang.com/wenzhang/xinqingriji/20140621/294982.htmlä¾†æºï¼šæ–‡ç« é˜…è¯»ç½‘","link":"/2017-08-13-%E5%80%9A%E6%A5%BC%E5%90%AC%E9%A3%8E%E9%9B%A8%EF%BC%8C%E6%B7%A1%E7%9C%8B%E6%B1%9F%E6%B9%96%E8%B7%AF/"},{"title":"ä¸€ä¸ªç®€å•çš„APIæˆæƒæµç¨‹","text":"å®é™…é¡¹ç›®ä¸­æˆ‘ä»¬ç»å¸¸ä¼šç¢°åˆ°ç»™ç¬¬ä¸‰æ–¹å¼€æ”¾æˆ‘ä»¬é¡¹ç›®APIçš„è¿™ç§åœºæ™¯ã€‚è¿™æ—¶æˆ‘ä»¬è¦ä¿è¯apiçš„å®‰å…¨ï¼Œå‚è€ƒè…¾è®¯å¹¿ç‚¹é€šçš„apiè°ƒç”¨ã€‚ç°å°†phpçš„ä»£ç å®ç°æ•´ç†è¿™æ­¤ã€‚ æˆ‘ä»¬çš„ç®—æ³•å¾ˆç®€å•ï¼š æŠŠè°ƒç”¨æ–¹è‡ªå·±çš„appid,secret_key,å½“å‰çš„æ—¶é—´æˆ³timeè¿æ¥èµ·æ¥ç”¨sha1æ–¹æ³•ç”Ÿæˆä¸€ä¸ªsign æŠŠappid,time,signç”¨è‹±æ–‡é€—å·è¿æ¥å¹¶ç”¨base64æ‰“åŒ…å˜æˆä¸€ä¸ªå‚æ•°token APIçš„å‡ ä¸ªæ–¹æ³•api_functions.php 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475&lt;?php/** * ç”Ÿæˆtoken * @param string $appid * @param string $secret_key * @param int $time * @return string */function generate_token($appid, $secret_key, $time){ $sign = sha1($appid . $secret_key . $time); return base64_encode($appid . ',' . $time . ',' . $sign);}/** * è§£åŒ…token * @param string $token * @return array */function unpack_token($token){ $params = base64_decode($token); $params = explode(',', $params); return [ 'appid'=&gt; isset($params[0]) ? $params[0] : '', 'time'=&gt; isset($params[1]) ? $params[1] : '', 'sign'=&gt; isset($params[2]) ? $params[2] : '', ];}/** * @param $url * @param array $data * @param bool $is_post * @param array $header * @return mixed */function sub_curl($url, $data = array(), $is_post = false, $header = array()){ $ch = curl_init(); if (!$is_post &amp;&amp; !empty($data)) { $url = $url . '?' . http_build_query($data); } curl_setopt($ch, CURLOPT_URL, $url); curl_setopt($ch, CURLOPT_POST, $is_post); if ($is_post) { curl_setopt($ch, CURLOPT_POSTFIELDS, $data); } curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false); curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false); curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 20); if (!empty($header)) { curl_setopt($ch, CURLOPT_HTTPHEADER, $header); } $info = curl_exec($ch); $code = curl_getinfo($ch, CURLINFO_HTTP_CODE); if($code != 200){ echo_json($code, 'apiè°ƒç”¨å‡ºé”™'.$code); } curl_close($ch); return $info;}/** * @param int $code * @param string $msg * @param array $data */function echo_json($code, $msg = '', $data = array()){ header('Content-type:application/json'); echo json_encode(array('ret' =&gt; $code, 'msg' =&gt; $msg, 'data' =&gt; $data)); exit;} APIæä¾›æ–¹api.php 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566&lt;?phprequire 'api_functions.php';//æˆæƒçš„ä½¿ç”¨æ–¹åå• ç°ä¸ºæ¼”ç¤ºæ–¹ä¾¿ç›´æ¥ä½¿ç”¨æ•°ç»„$users = [ 'user_001'=&gt;[ 'appid'=&gt;'user_001', //ä½¿ç”¨æ–¹å¯¹äºæä¾›æ–¹apiçš„å”¯ä¸€id 'secret_key'=&gt;'97bc847d4ea7dd9f035d41a657302f1c' //å¯†é’¥ ä¹Ÿå”¯ä¸€ ], 'user_002'=&gt;[ 'appid'=&gt;'user_002', 'secret_key'=&gt;'c763b64a62186ae6831edd22063539c4' ], 'user_003'=&gt;[ 'appid'=&gt;'user_003', 'secret_key'=&gt;'51a683bea5e5c138fd0342fb70e03c65' ],];//æ£€éªŒç­¾å$token = isset($_GET['token']) ? trim($_GET['token']) : '';if(empty($token)){ echo_json(1000, 'token missed');}//è§£åŒ…token$token_params = unpack_token($token);if(empty($token_params['sign'])){ echo_json(1001, 'sign error'); //ç­¾åä¸ºç©ºæˆ–è€…é”™è¯¯}if(empty($token_params['appid'])){ echo_json(1002, 'appid error'); //appidä¸ºç©ºæˆ–è€…é”™è¯¯}if(empty($token_params['time'])){ echo_json(1003, 'time error'); //timeä¸ºç©ºæˆ–è€…é”™è¯¯}if(abs($token_params['time'] - time()) &gt; 10 * 60){ // api è°ƒç”¨æ—¶é—´é™åˆ¶å·¦å³æµ®åŠ¨10åˆ†é’Ÿ echo_json(1004, 'time expired'); // 10 minutes}//ç”¨appidå–ç”¨æˆ·$user = isset($users[$token_params['appid']]) ? $users[$token_params['appid']] : [];if(empty($user)){ echo_json(1005, 'appid not exists'); //è°ƒç”¨æ–¹ä¸å­˜åœ¨}//ä½¿ç”¨è°ƒç”¨æ–¹å‚æ•°ç”Ÿæˆtoken$create_token = generate_token($user['appid'], $user['secret_key'], $token_params['time']);if($token !== $create_token){ echo_json(1006, 'token error'); //tokené”™è¯¯}//åˆ°æ­¤ è°ƒç”¨æƒé™çš„éªŒè¯å°±okäº†$api = isset($_GET['api']) ? trim($_GET['api']) : '';//æ¥ä¸‹æ¥ä½ å¯ä»¥æœ‰å…¶ä»–å¯¹å…·ä½“æ¥å£çš„éªŒè¯...//è¿”å›ç»“æœecho_json(200, 'your request api '.$api. ' success!'); APIè°ƒç”¨æ–¹use_api.php 1234567891011121314151617181920212223242526272829303132333435363738&lt;?phprequire 'api_functions.php';//å‡è®¾ä½¿ç”¨æ–¹æ˜¯ user_001 ä»–æ‹¥æœ‰è‡ªå·±çš„appidå’Œsecret_key$user = [ 'appid' =&gt; 'user_001', //ä½¿ç”¨æ–¹å¯¹äºæä¾›æ–¹apiçš„å”¯ä¸€id 'secret_key' =&gt; '97bc847d4ea7dd9f035d41a657302f1c' //å¯†é’¥ ä¹Ÿå”¯ä¸€];//ç”Ÿæˆtoken$token = generate_token($user['appid'], $user['secret_key'], time());//urlæ¢æˆä½ è‡ªå·±çš„æ¥å£url$url = 'http://' . $_SERVER['HTTP_HOST'] . dirname($_SERVER['REQUEST_URI']);$url .= '/api.php?api=user_info'; //è°ƒç”¨user_infoçš„æ¥å£$url .= '&amp;token=' . $token;echo $url;echo '&lt;hr&gt;&lt;pre&gt;';//è¯·æ±‚æ¥å£$res = sub_curl($url);var_dump(json_decode($res, 1));/* è°ƒç”¨æˆåŠŸç»“æœarray(3) { [\"ret\"]=&gt; int(200) [\"msg\"]=&gt; string(35) \"your request api user_info success!\" [\"data\"]=&gt; array(0) { }}*/","link":"/2017-08-16-%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84api%E6%8E%88%E6%9D%83%E6%B5%81%E7%A8%8B/"},{"title":"ç”¨PHPè¿›è¡ŒHTTPè®¤è¯","text":"PHPçš„HTTPè®¤è¯æœºåˆ¶ï¼Œå°±æ˜¯ç”¨header()å‡½æ•°æ¥å‘å®¢æˆ·ç«¯æµè§ˆå™¨å‘é€â€œAuthentication Requiredâ€ä¿¡æ¯ï¼Œä½¿å…¶å¼¹å‡ºä¸€ä¸ªç”¨æˆ·åï¼å¯†ç è¾“å…¥çª—å£ã€‚å½“ç”¨æˆ·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç åï¼ŒåŒ…å«æœ‰URLçš„PHPè„šæœ¬å°†ä¼šåŠ ä¸Šé¢„å®šä¹‰å˜é‡PHP_AUTH_USERï¼ŒPHP_AUTH_PWå’ŒAUTH_TYPEè¢«å†æ¬¡è°ƒç”¨ï¼Œè¿™ä¸‰ä¸ªå˜é‡åˆ†åˆ«è¢«è®¾å®šä¸ºç”¨æˆ·åï¼Œå¯†ç å’Œè®¤è¯ç±»å‹ã€‚é¢„å®šä¹‰å˜é‡ä¿å­˜åœ¨ $_SERVER æˆ–è€… $HTTP_SERVER_VARS æ•°ç»„ä¸­ã€‚æ”¯æŒâ€œBasicâ€å’Œâ€œDigestâ€ï¼ˆè‡ª PHP 5.1.0 èµ·ï¼‰è®¤è¯æ–¹æ³•ã€‚è¿™æ˜¯phpå®˜ç½‘çš„è§£é‡Šã€‚å¤§å®¶çœ‹ç¤ºä¾‹ä½“ä¼šã€‚ğŸ˜ å‚è€ƒè¿æ¥ï¼šhttp://php.net/manual/zh/features.http-auth.php ç¤ºä¾‹ï¼š1234567891011121314&lt;?phpif (!isset($_SERVER['PHP_AUTH_USER'])) { header('WWW-Authenticate: Basic realm=\"My Realm\"'); header('HTTP/1.0 401 Unauthorized'); die('401 Unauthorized'.'&lt;br&gt; &lt;button onclick=\"window.location.reload();\"&gt;Login Again&lt;/button&gt;');} else { if($_SERVER['PHP_AUTH_USER'] !== 'James Bond' || $_SERVER['PHP_AUTH_PW'] !== '007'){ header('WWW-Authenticate: Basic realm=\"My Realm\"'); header('HTTP/1.0 401 Unauthorized'); die('401 Unauthorized'.'&lt;br&gt; &lt;button onclick=\"window.location.reload();\"&gt;Login Again&lt;/button&gt;'); }}//ä¸‹é¢æ˜¯ä½ çš„ä¸šåŠ¡ä»£ç  è¿™æ ·å°±ä¼šå¼¹å‡ºä¸€ä¸ªç™»é™†æ¡†ï¼Œè¾“å…¥ç”¨æˆ·åï¼šJames Bond å¯†ç ï¼š007 ç™»é™†å§ï¼ æˆåŠŸäº†æ²¡ï¼Œå“ˆå“ˆï¼Œå¤§å®¶è§‰å¾—æ˜¯ä¸æ˜¯å¾ˆå¥½ç©~","link":"/2017-08-21-%E7%94%A8PHP%E8%BF%9B%E8%A1%8CHTTP%E8%AE%A4%E8%AF%81/"},{"title":"ä¹æœˆï¼ŒåŠ æ²¹ï¼","text":"ä¸çŸ¥ä¸è§‰è¿™ä¸€å¹´å·²ç»è¿‡äº†å¤§åŠã€‚ä¹æœˆäº†ï¼ŒåŠ æ²¹ï¼","link":"/2017-09-06-%E4%B9%9D%E6%9C%88%EF%BC%8C%E5%8A%A0%E6%B2%B9/"},{"title":"ä¸€ä¸ªç™¾åº¦åœ°å›¾çš„å¸¸ç”¨ä½¿ç”¨ç¤ºä¾‹","text":"ä»Šå¤©åœ¨é¡¹ç›®ä¸­ç”¨åˆ°äº†ç™¾åº¦åœ°å›¾ï¼Œæ„Ÿè§‰ä¹Ÿæ˜¯ä¸ªåŸºæœ¬ç”¨æ³•çš„å¸¸ç”¨ç¤ºä¾‹ï¼Œåœ¨è¿™å’Œå¤§å®¶åˆ†äº«ä¸‹ğŸ˜ æ•ˆæœå¦‚å›¾ï¼š å…ˆè¯´è¯´éœ€æ±‚å§ï¼š æ‰“å¼€åœ°å›¾ï¼Œè‡ªåŠ¨å®šä½åˆ°å½“å‰æ‰€åœ¨ä½ç½®ï¼Œå¹¶åœ¨åœ°å›¾ä¸Šæ·»åŠ ä¸€ä¸ªå¯æ‹–æ‹½çš„æ ‡æ³¨ï¼ˆmarkerï¼‰ ç”¨æˆ·å¯ä»¥æ‹–æ‹½æ ‡æ³¨é€‰æ‹©åœ°å›¾ä¸Šçš„ä½ç½®ï¼ŒåŒæ—¶æ ‡æ³¨çš„ç»çº¬åº¦æ˜¾ç¤ºåœ¨inputæ¡†ä¸­ï¼ˆå…¶å®è¿™ä¸ªæ˜¯ä¸ºäº†çœ‹æ•ˆæœï¼Œä¸€èˆ¬éƒ½ç”¨éšè—åŸŸï¼‰ï¼Œæ ‡æ³¨çš„å½“å‰åœ°å€æ˜¾ç¤ºåœ¨åœ°å€çš„è¾“å…¥æ¡†ä¸­ ç”¨æˆ·è¾“å…¥åœ°å€ä¹‹åè‡ªåŠ¨è°ƒç”¨ç™¾åº¦åœ°å›¾çš„APIï¼Œæ‰¾åˆ°è¾“å…¥åœ°å€å¯¹åº”åˆ°åœ°å›¾çš„ç‚¹å¹¶ç§»åŠ¨æ ‡æ³¨åˆ°æ­¤ã€‚å½“ç„¶ä¹ŸåŒ…æ‹¬æ˜¾ç¤ºç»çº¬åº¦ã€‚ HTMLé¡µé¢éƒ¨åˆ†æ˜¯è¿™æ ·å­ï¼Œä½¿ç”¨bootstrap3çš„æ ·å¼ 12345678910111213141516171819202122&lt;div class=\"form\"&gt; &lt;div class=\"form-group\"&gt; &lt;label class=\"col-lg-2 col-sm-2 control-label\"&gt;åœ°å€&lt;/label&gt; &lt;div class=\"col-lg-10\"&gt; &lt;input type=\"text\" class=\"form-control pwd-input\" name=\"address\" id=\"address\" value=\"&lt;?php echo !empty($info['address']) ? $info['address'] : '';?&gt;\" placeholder=\"è¯·è¾“å…¥åœ°å€\"&gt; &lt;p class=\"help-block\"&gt;&lt;/p&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=\"form-group\"&gt; &lt;label class=\"col-lg-2 col-sm-2 control-label\"&gt;é€‰æ‹©ä½ç½®&lt;/label&gt; &lt;div class=\"col-lg-10\"&gt; &lt;div class=\"clearfix\"&gt; &lt;label class=\"control-label pull-left\" style=\"margin-right: 5px;\"&gt;ç»åº¦&lt;/label&gt;&lt;input type=\"text\" name=\"lng\" id=\"lng\" value=\"&lt;?php echo !empty($info['lng']) ? $info['lng'] : '';?&gt;\" class=\"form-control pull-left\" style=\"width: 120px;margin-right: 15px;\"&gt; &lt;label class=\"control-label pull-left\" style=\"margin-right: 5px;\"&gt;ç»´åº¦&lt;/label&gt;&lt;input type=\"text\" name=\"lat\" id=\"lat\" value=\"&lt;?php echo !empty($info['lat']) ? $info['lat'] : '';?&gt;\" class=\"form-control pull-left\" style=\"width: 120px;\"&gt; &lt;/div&gt; &lt;br&gt; &lt;div id=\"l-map\" style=\"width: 600px;height: 400px;\"&gt;&lt;/div&gt; &lt;/div&gt; &lt;/div&gt;&lt;/div&gt; é‡ç‚¹æ˜¯jsï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990//ç»çº¬åº¦var lat = '&lt;?php echo !empty($info['lat']) ? $info['lat'] : '';?&gt;';var lng = '&lt;?php echo !empty($info['lng']) ? $info['lng'] : '';?&gt;';// ç™¾åº¦åœ°å›¾APIåŠŸèƒ½var map = new BMap.Map(\"l-map\"); //newä¸ªåœ°å›¾å‡ºæ¥var point;var marker;if(lat &amp;&amp; lng){ point = new BMap.Point(lng,lat); //newä¸ªç‚¹ marker = new BMap.Marker(point); //newä¸ªæ ‡æ³¨ marker.enableDragging(); // å¯æ‹–æ‹½ map.addOverlay(marker); // å°†æ ‡æ³¨æ·»åŠ åˆ°åœ°å›¾ä¸­ getPosition(marker);}else{ point = new BMap.Point(107.475903, 31.214995); //map.addControl(new BMap.GeolocationControl()); //å®šä½ map.addControl(new BMap.NavigationControl()); var geolocation = new BMap.Geolocation(); //è·å–å½“å‰ä½ç½® geolocation.getCurrentPosition(function(r){ if(this.getStatus() == BMAP_STATUS_SUCCESS){ marker = new BMap.Marker(r.point); marker.enableDragging(); // å¯æ‹–æ‹½ map.addOverlay(marker); map.panTo(r.point); //console.log('æ‚¨çš„ä½ç½®ï¼š'+r.point.lng+','+r.point.lat); getPosition(marker); } else { marker = new BMap.Marker(point); marker.enableDragging(); // å¯æ‹–æ‹½ map.addOverlay(marker); // å°†æ ‡æ³¨æ·»åŠ åˆ°åœ°å›¾ä¸­ getPosition(marker); } },{enableHighAccuracy: true});}map.centerAndZoom(point, 12);var gc = new BMap.Geocoder();//åœ°å€è§£æç±»//åœ°å€è¾“å…¥æ¡†å¤±å»ç„¦ç‚¹æ—¶æœç´¢è¾“å…¥çš„ä½ç½®$(\"#address\").blur(function(){ var address = $(this).val(); parseAddress(address, 'ä¸Šæµ·å¸‚');});//è§£æåœ°å€function parseAddress(address, city){ gc.getPoint(address, function(point){ console.log(point); if(point){ //æ”¾å¤§åœ°å›¾ ä¹‹å‰zoomæ˜¯12 map.setZoom(15); // console.log(marker); $(\"#lng\").val(point.lng); $(\"#lat\").val(point.lat); //æ¥ä¸‹æ¥çš„æ“ä½œæƒ³æƒ³åº”è¯¥æ—¶ç§»åŠ¨æ ‡æ³¨åˆ°æ–°çš„ä½ç½®ï¼Œä½†æ˜¯å¥½åƒapiæ²¡è¿™ä¸­æ“ä½œï¼Œåªæœ‰å…ˆæŠŠæ ‡æ³¨ä»åœ°å›¾ä¸Šå–ä¸‹æ¥ æ¢ä¸ªä½ç½®å†æ”¾ä¸Šå» var allOverlay = map.getOverlays(); //è·å–åœ°å›¾è¦†ç›–ç‰© //console.log(allOverlay); for(var i = 0;i&lt;allOverlay.length;i++) { var pos = allOverlay[i].getPosition(); //åˆ é™¤æŒ‡å®šç»åº¦çš„è¦†ç›–ç‰© if (pos &amp;&amp; pos.lng == point.lng &amp;&amp; pos.lat == point.lat) { map.removeOverlay(allOverlay[i]); } } //é‡è®¾æ ‡æ³¨çš„ä½ç½® marker.setPosition(point); //æŠŠæ ‡æ³¨é‡æ–°æ”¾åˆ°åœ°å›¾ä¸Š map.addOverlay(marker); //ç§»åŠ¨åœ°å›¾åˆ°æ–°ä½ç½® map.panTo(point); } }, city);}function getPosition(marker){ //æ·»åŠ æ ‡è®°ç‚¹å‡»ç›‘å¬ marker.addEventListener(\"mouseup\", function(e){ gc.getLocation(e.point, function(rs){ //console.log(\"åœ°å›¾ä¸­å¿ƒç‚¹å˜æ›´ä¸ºï¼š\" + rs.lng + \", \" + rs.lat); console.log(rs.point.lat + ',' + rs.point.lng); $(\"#lng\").val(rs.point.lng); $(\"#lat\").val(rs.point.lat); $(\"#address\").val(rs.address); }); });} å…¶å®åŸºæœ¬çš„æ“ä½œè¿˜æŒºé¡ºåˆ©çš„ï¼Œåªæ˜¯åœ¨ä¸€ä¸ªåœ°æ–¹ç¢°åˆ°äº†å‘ï¼šç§»åŠ¨æ ‡æ³¨ æ€ä¹ˆç§»åŠ¨å‘¢ï¼Ÿç¿»äº†ç™¾åº¦APIæ²¡æ‰¾åˆ°ï¼Œæœ€åä¹Ÿæ˜¯é€šè¿‡æœç´ å¼•æ“æŸ¥æŸ¥æŸ¥ï¼Œæ‰æ‰¾åˆ°æ€è·¯ã€‚ åŸæ¥æ ‡æ³¨æ·»åŠ æ ‡æ³¨(marker)æ·»åŠ åˆ°åœ°å›¾ä¸Šæ˜¯å±äºè¦†ç›–ç‰©(Overlay)ã€‚æƒ³ç§»åŠ¨å°±æ¢ä¸ªæ€è·¯ï¼ŒæŠŠè¿™ä¸ªè¦†ç›–ç‰©ç§»é™¤ï¼Œç„¶åé‡æ–°ç»™æ ‡æ³¨èµ‹äºˆæ–°çš„ä½ç½®å±æ€§ï¼Œç„¶åé‡æ–°æ·»åŠ åˆ°åœ°å›¾ä¸Šã€‚ (ã€‚ãƒ»âˆ€ãƒ»)ãƒ è¿™ä¸‹æå®šå•¦~ èµ¶ç´§å…³æœºä¸‹ç­ï¼Œåº†ç¥ä¸€ä¸‹ ğŸ‰","link":"/2017-09-07-%E4%B8%80%E4%B8%AA%E7%99%BE%E5%BA%A6%E5%9C%B0%E5%9B%BE%E7%9A%84%E5%B8%B8%E7%94%A8%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B/"},{"title":"è‡ªå·±å®ç°AJAXå¼‚æ­¥ä¸Šä¼ æ–‡ä»¶","text":"åœ¨é¡¹ç›®ä¸­ç»å¸¸ç”¨åˆ°æ–‡ä»¶ä¸Šä¼ ï¼Œç„¶åå°±æ‰¾å„ç§å„æ ·çš„æ’ä»¶ã€‚ä½†ç”¨ç€ç”¨ç€æ€»ä¸æ˜¯å¾ˆå¤šåœ°æ–¹ä¸æ˜¯å¾ˆç§°æ‰‹ï¼Œéœ€è¦ä¿®ä¿®æ”¹æ”¹ã€‚æ‰€ä»¥ä»Šå¤©å¹²è„†è‡ªå·±å†™ä¸ªå§ã€‚ å…ˆè¯´è¯´å…·ä½“éœ€æ±‚ï¼š ä¸Šä¼ æ–‡ä»¶åšåˆ°æ‰€è§æ‰€å¾—ï¼Œå°±æ˜¯é€‰æ‹©æ–‡ä»¶ä¹‹åèƒ½ç«‹é©¬çœ‹åˆ° å¯ä»¥æ–¹ä¾¿ç”¨åœ¨ç”¨jså¼‚æ­¥æäº¤çš„è¡¨å•ä¸­ HTMLé¡µé¢éƒ¨åˆ†æ˜¯è¿™æ ·å­ 123456&lt;div&gt; &lt;!-- å›¾ç‰‡./images/add_img.pngå°±æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„åŠ å· + --&gt; &lt;img style=\"cursor: pointer;\" src=\"./images/add_img.png\" alt=\"ç‚¹å‡»ä¸Šä¼ \" width=\"100\" title=\"ç‚¹å‡»ä¸Šä¼ \" class=\"upload-img\" data-id=\"img\"&gt; &lt;input type=\"hidden\" name=\"image\" value=\"\" class=\"upload-img-input\" data-id=\"img\"&gt; &lt;input style=\"display: none\" type=\"file\" accept=\"image/gif,image/jpeg,image/jpg,image/png,image/bmp\" name=\"file\" id=\"file_img\" data-id=\"img\" onchange=\"upload_image(this);\"&gt;&lt;/div&gt; åœ¨input:fileçš„acceptå±æ€§ä¸­å®šä¹‰å¯ä»¥ä¸Šä¼ çš„æ–‡ä»¶æ ¼å¼ï¼ˆMIME ç±»å‹ï¼‰åœ¨è¿™é‡Œæˆ‘ä»¬åˆ—å‡ºå¸¸ç”¨çš„å›¾ç‰‡ç±»å‹ï¼šimage/gif,image/jpeg,image/jpg,image/png,image/bmp å…¶å®åœ¨è¿™å¤§å®¶ä¼šè¯´åç¼€æ˜¯.jpgå’Œ.jpegçš„å›¾ç‰‡çš„mime typeä¸éƒ½æ˜¯image/jpegå—ï¼Ÿä¸ºä»€ä¹ˆè¿˜è¦åŠ ä¸ªimage/jpg? æ²¡é”™ï¼Œæ˜¯è¿™æ ·å¦‚æœä½ åªå†™image/jpegç”¨è°·æ­Œæµè§ˆå™¨æ˜¯æ²¡é—®é¢˜çš„ã€‚ä½†æ˜¯åœ¨å¾®ä¿¡æµè§ˆå™¨ï¼ŒQQæµè§ˆå™¨ä¸­å°±ä¸è¡Œäº†ï¼Œåæ¥æ‰¾ä¸åˆ°é—®é¢˜ï¼Œå°è¯•äº†å¥½å¤šæ¬¡æ‰å‘ç°è¿™ä¸ªé—®é¢˜ã€‚æ²¡åŠæ³•ï¼Œå›½äº§æµè§ˆå™¨ä¸æŒ‰æ ‡å‡†é€ çš„åŸå›  â•®(â•¯â–½â•°)â•­ å…¶ä»–æ–‡ä»¶æ ¼å¼å¤§å®¶çœ‹è¿™é‡Œ w3school é‡ç‚¹æ˜¯jsï¼š 12345678910111213141516171819202122232425262728293031323334353637383940//ç‚¹å‡»å›¾ç‰‡çš„æ—¶å€™ è§¦å‘éšè—çš„input:fileçš„ç‚¹å‡»äº‹ä»¶$(\".upload-img\").click(function(){ var id = $(this).data('id'); var file = document.getElementById('file_' + id); file.click();});function upload_image(pic_file) { var id = $(pic_file).data('id'); var input = $(\"input.upload-img-input[data-id=\"+id+\"]\"); //æ‰¾åˆ°ç›¸åº”çš„éšè—åŸŸ var pic = $(\"img.upload-img[data-id=\"+id+\"]\"); //æ‰¾åˆ°ç›¸åº”çš„é¢„è§ˆå›¾ç‰‡ var file = pic_file.files[0]; if (file.size &gt; 2 * 1024 * 1024) { //è®¾ç½®é™åˆ¶æ–‡ä»¶å¤§å° ä¸å¤§äº2MB alert('ä¸Šä¼ æ–‡ä»¶ä¸èƒ½å¤§äº2M!'); return false; } var fd = new FormData(); //ä½¿ç”¨formDataå¯¹è±¡ fd.append(\"pic_file\", file); //fd.append(\"name\", name); //å¯ä»¥æ·»åŠ å…¶ä»–å­—æ®µï¼Œæ¯”å¦‚æœ‰äº›æ¡†ä¸ºäº†å®‰å…¨åŠ çš„csrf_token var xhr = new XMLHttpRequest(); xhr.open(\"POST\", 'upload_file.php'); //è¿™é‡Œæ˜¯åç«¯å¤„ç†çš„åœ°å€ xhr.onload = function () { if (xhr.status == 200) { var obj = eval('(' + xhr.responseText + ')'); //æŠŠjsonå­—ç¬¦ä¸²è½¬æ¢æˆjså¯¹è±¡ if (obj.ret == 200) { //ä¸Šä¼ æˆåŠŸ var pic_url = obj.data.url; //æ˜¾ç¤ºé¢„è§ˆå›¾ input.val(pic_url); //æŠŠåœ°å€æ”¾åˆ°éšè—åŸŸ pic.attr('src', pic_url); } else { alert(obj.msg); } } else { alert('ä¸Šä¼ å¤±è´¥ï¼Œè¯·ç¨å€™å†è¯•'); } }; xhr.send(fd);} æˆ‘ä»¬æœåŠ¡ç«¯ä¸Šä¼ è¿”å›çš„jsonæ ¼å¼æ˜¯è¿™æ · 1234567{ \"ret\": 200, \"msg\": \"ok\", \"data\": { \"url\": \"ä½ çš„å›¾ç‰‡urlåœ°å€\" }}","link":"/2017-09-09-%E8%87%AA%E5%B7%B1%E5%AE%9E%E7%8E%B0AJAX%E5%BC%82%E6%AD%A5%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6/"},{"title":"EFIæ¨¡å¼ä¸‹å®‰è£…win10+Archlinux","text":"å°±æœ€è¿‘ä¸€æ¬¡å®‰è£…Archlinuxåšä¸€æ¬¡ç¬”è®°å§ã€‚åˆ«é—®æˆ‘ä¸ºä»€ä¹ˆæ²¡äº‹å°±è£…archï¼Œå› ä¸ºä»–æ˜¯arch ğŸ˜œ Win10å®‰è£…å°±ç•¥è¿‡äº†ï¼Œæˆ‘çš„ç”µè„‘linuxè€æ¢ï¼Œwin10å§‹ç»ˆç¨³ç¨³çš„åœ¨é‚£èººç€ï¼Œä¸€åŠ¨ä¸åŠ¨ã€‚ã€‚ã€‚ å› ä¸ºwin10æ˜¯æå‰å®‰è£…å¥½çš„ï¼Œè€Œä»–æ˜¯ä½¿ç”¨EFIæ¨¡å¼å®‰è£…çš„ æˆ‘ä»¬åœ¨win10ä¸‹åœ¨ç¡¬ç›˜ä¸Šç»™å’‹archæŒªå‡ºç‚¹ç©ºé—´æ¥ï¼Œå‡ åä¸ªGBå°±è¡Œã€‚çœ‹ä½ ç¡¬ç›˜å¤§å°äº†å’Œå¿ƒæƒ…äº†ã€‚ å¯åŠ¨liveCDç”¨åœ¨å®˜ç½‘æˆ–è€…163æºä¸‹è½½æœ€æ–°çš„liveCDé•œåƒï¼ˆæ¯”å¦‚æœ€æ–°æ˜¯archlinux-2017.09.01-x86_64.isoï¼‰ï¼Œåˆ»å½•åˆ°uç›˜ï¼Œæˆ‘å–œæ¬¢ç”¨rufsï¼Œè¿™ä¸ªä¸å¤§äº1Mçš„å°å·¥å…·å¾ˆç®€å•å¼ºå¤§æˆ‘å–œæ¬¢ã€‚ å½“ç„¶äº†ï¼Œç†Ÿæ‚‰linuxçš„åŒå­¦å¯ä»¥ç”¨ddå‘½ä»¤ã€‚ æ’ä¸Šuç›˜ï¼Œé‡å¯åˆ°liveCDé‡Œé¢ã€‚é‡Œé¢ä¹Ÿæ˜¯ä¸ªæ²¡æ¡Œé¢çš„shellç³»ç»Ÿã€‚ çœ‹Archlinux wikiåœ¨å¼€å§‹ä¹‹å‰æœ€å¥½è¿˜æ˜¯çœ‹çœ‹archçš„wikiInstallation guide(å®‰è£…æŒ‡å—)ï¼Œå†™çš„å¾ˆè¯¦ç»†ï¼Œæœ€å¥½çœ‹è‹±æ–‡çš„ï¼Œä¸­æ–‡çš„ç¿»è¯‘æœ‰ç‚¹å»¶è¿Ÿã€‚ è”ç½‘å¦‚æœä½ æ˜¯æœ‰çº¿ç½‘ç»œï¼Œæ’ä¸Šç½‘çº¿ï¼Œå¯åŠ¨dhcpdæœåŠ¡ï¼ˆä¹Ÿå°±æ˜¯åŠ¨æ€è·å–ipï¼‰ 1systemctl start dhcpcd æ— çº¿ç½‘ç»œç”¨wifi-menué“¾æ¥ 1wifi-menu çœ‹çœ‹é“¾æ¥æˆåŠŸäº†æ²¡ æŸ¥çœ‹ä¸‹ip 1ip addr å¦‚æœæ²¡æˆåŠŸï¼Œæˆ–è€…å…¶ä»–çš„è”ç½‘æ–¹å¼ï¼Œçœ‹çœ‹archçš„wiki å…¶å®è¯´åˆ°è¿™ï¼Œå†æ¬¡æé†’å¤§å®¶ï¼Œçœ‹archçš„wiki è¿ä¸Šç½‘ç»œäº†ï¼Œå¼€å·¥å§! åˆ†åŒºï¼š1fdisk /dev/sda è¿›å…¥fdiskä¹‹åæŒ‰pï¼Œçœ‹çœ‹ç°æœ‰åˆ†åŒºçš„æƒ…å†µè¿™æ˜¯æˆ‘çš„ç¡¬ç›˜åˆ†åŒºæƒ…å†µï¼Œç¡¬ç›˜æ ¼å¼gpt 123456/dev/sda1 2048 923647 921600 450M Windows æ¢å¤ç¯å¢ƒ/dev/sda2 923648 1128447 204800 100M EFI ç³»ç»Ÿ/dev/sda3 1128448 1161215 32768 16M Microsoft ä¿ç•™/dev/sda4 1161216 209256750 208095535 99.2G Microsoft åŸºæœ¬æ•°æ®/dev/sda5 209258496 210888703 1630208 796M Windows æ¢å¤ç¯å¢ƒ/dev/sda6 210890752 462559542 251668791 120G Microsoft åŸºæœ¬æ•°æ® å‡å¦‚æˆ‘çš„ç¡¬ç›˜ä¸­ç©ºé—²ç©ºé—´100GBï¼Œç”¨fdisk ç»™è¿™100GBåˆ†ä¸€åˆ† æˆ‘çš„æ–¹æ¡ˆæ˜¯ï¼š 123/dev/sda7 /boot ext4 500MB #bootå¯åŠ¨åˆ†åŒº 500MBå¤Ÿç”¨äº†/dev/sda8 swap 8GB #äº¤æ¢åˆ†åŒºï¼Œ æˆ‘çš„å†…å­˜ä¹Ÿ8GBï¼Œæˆ‘å°±åˆ†ä¸€æ ·å¤§å°äº†/dev/sda9 / ext4 #å‰©ä¸‹çš„å…¨ç»™ / æ ¹åˆ†åŒº æ ¹æ®è‡ªå·±çš„ç©ºé—´å¤§å°è‡ªè¡Œè°ƒæ•´ã€‚ æ ¼å¼åŒ–ï¼š 123mkfs.ext4 /dev/sda7mkfs.ext4 /dev/sda9mkswap /dev/sda8 å®‰è£…åŸºç¡€ç³»ç»ŸæŒ‚è½½åˆ†åŒºï¼š 123456mount /dev/sda9 /mntmkdir /mnt/bootmount /dev/sda7 /mnt/bootmkdir /mnt/boot/EFImount /dev/sda2 /mnt/boot/EFI #è¿™ä¸ªEFIåˆ†åŒºåœ¨åˆ†åŒºæƒ…å†µé‡Œé¢èƒ½çœ‹åˆ°æˆ‘çš„æ˜¯sda2swapon /dev/sda8 ä¿®æ”¹æºï¼š 1vim /etc/pacman.d/mirrorlist æŠŠ163ï¼Œustcè¿™å‡ ä¸ªæ¯”è¾ƒå¥½ä½¿çš„ä¸­å›½æºå¤åˆ¶åˆ°æ–‡ä»¶æœ€ä¸Šé¢ï¼Œåˆ°æ—¶å€™ä¸‹è½½å®‰è£…çš„æ—¶å€™è·‘çš„å¿«ä¸€ç‚¹ å¼€å§‹å®‰è£…ï¼š 1pacstrap -i /mnt base vim dialog wpa_supplicant baseæ˜¯åŸºç¡€ç³»ç»Ÿï¼Œdialogæ˜¯ä¸Šé¢æåˆ°çš„é“¾æ¥æ— çº¿ç½‘çš„wifi-menuï¼Œwpa_supplicantä¹Ÿæ˜¯æ‰‹åŠ¨é“¾æ¥æ— çº¿ç½‘çš„åŒ…ï¼Œvim ä¸è§£é‡Š å®‰è£…å®Œæˆä¹‹å æŠŠåˆ†åŒºæŒ‚è½½æƒ…å†µå†™å…¥fstabä¸­ï¼š 1genfstab -U -p /mnt &gt; /mnt/etc/fstab chrootè¿›æ–°ç³»ç»Ÿï¼š 1arch-chroot /mnt /bin/bash ä¸€äº›é…ç½®ï¼š 1234567echo &apos;my-archlinux&apos; &gt; /etc/hostname #è®¾ç½®ä¸»æœºåå­—ln -sf /usr/share/zoneinfo/Asia/Shanghai #è®¾ç½®æ—¶åŒºtimedatectl set-timezone Asia/Shanghai #ä¹Ÿå¯ä»¥ç”¨è¿™ä¸ªè®¾ç½®æ—¶åŒºtimedatectl set-ntp true # è®¾ç½®æ—¶é—´ntpåŒæ­¥ç½‘ç»œæ—¶é—´vim /etc/locale.gen # åŒºåŸŸè®¾ç½® å–æ¶ˆè‹±æ–‡ï¼ˆen_US.UTF-8ï¼‰å’Œä¸­æ–‡(zh_CN.UTF-8)çš„æ³¨é‡Šlocale-gen #ç”Ÿæˆè®¾ç½®åŒºåŸŸè®¾ç½®echo &quot;LANG=en_US.UTF-8&quot; &gt; /etc/locale.conf #è®¾ç½®è¯­è¨€ï¼Œå› ä¸ºå…ˆå®‰è£…çš„æ˜¯æ²¡æ¡Œé¢çš„æ¨¡å¼ï¼Œå…ˆç”¨è‹±æ–‡ï¼Œä¸­æ–‡ä¼šæ˜¾ç¤ºæˆå°æ–¹å— åˆ›å»ºåˆå§‹å†…å­˜ç›˜mkinitcpio 1mkinitcpio -p linux è®¾ç½®rootå¯†ç  1passwd è¿™æ­¥å¿˜äº†ï¼Œä½ å°±è¿›ä¸å»ç³»ç»Ÿäº†ï¼Œâ•®(â•¯â–½â•°)â•­ æå®šå¯åŠ¨é¡¹ï¼š 1234pacman -S grub efibootmgr #å®‰è£…grub efibootmgrç®¡ç†å¯åŠ¨é¡¹grub-install --target=x86_64-efi --efi-directory=/boot/EFI --bootloader-id=arch_grub --recheckpacman -S os-prober #å®‰è£…è¿™ä¸ªåŒ…æ˜¯ä¸ºäº†è®©grub-mkconfigå‘ç°win10çš„å¯åŠ¨é¡¹grub-mkconfig -o /boot/grub/grub.cfg #æŠŠå¯åŠ¨é¡¹å†™åˆ°æ–‡ä»¶é…ç½®é‡Œ å¦‚æœwin10çš„å¯åŠ¨é¡¹æ²¡æœ‰è¢«å‘ç°ï¼Œä¸è¦ç€æ€¥ï¼Œåœ¨æ–°çš„ç³»ç»Ÿå®‰è£…é‡å¯ä¹‹åï¼Œé‡æ–°æ‰§è¡Œä¸Šé¢grub-mkconfigå‘½ä»¤å°±è¡Œäº† é€€å‡ºæ–°ç³»ç»Ÿ,é‡å¯ 123exit #é€€å‡ºunmout -R /mnt #å–æ¶ˆæŒ‚è½½ç£ç›˜reboot #é‡å¯ å¥½äº†å¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œé‡å¯ä¹‹åå°±èƒ½çœ‹åˆ°ä½ çš„æ–°ç³»ç»Ÿäº† (ã€‚ãƒ»âˆ€ãƒ»)ãƒ","link":"/2017-09-13-EFI%E6%A8%A1%E5%BC%8F%E4%B8%8B%E5%AE%89%E8%A3%85win10+Archlinux/"},{"title":"Win10å­ç³»ç»Ÿubuntuæ›´æ¢æº","text":"ä½œä¸ºä¸€ä¸ªwindowsä¸‹é¢çš„å¼€å‘è€…ï¼Œä¹‹å‰å·¥ä½œä¸€ç›´ç”¨cygwinã€‚cygwinè™½ç„¶æ–¹ä¾¿ä½†æ˜¯å¾ˆå¤šæ—¶å€™å®‰è£…ä¸€äº›ä¸œè¥¿ï¼Œæ¯”å¦‚jekyll,æ˜¯å„ç§ä¾èµ–ä¸è¶³ï¼Œå¤ªç—›è‹¦äº†ã€‚å¥½åœ¨å¾®è½¯win10å‡ºäº†é’ˆå¯¹å¼€å‘è€…çš„linuxå­ç³»ç»Ÿï¼Œé‚£å°±å…ˆè¯•ç”¨ä¸€æ®µæ—¶é—´å§ã€‚ ç°åœ¨win10çš„linuxå­ç³»ç»Ÿå·²ç»æœ‰ubuntuå’Œopensuseä¸¤ä¸ªç‰ˆæœ¬äº†,åº”è¯¥åç»­è¿˜ä¼šæ¨å‡ºæ›´å¤šçš„linuxå‘è¡Œç‰ˆã€‚å¤§å®¶æŒ‰ä¸ªäººå–œå¥½å®‰è£…å§ã€‚ å®‰è£…è¿‡ç¨‹ï¼Œç½‘ä¸Šå¾ˆå¤šä¹Ÿä¸éš¾ï¼Œå°±ç•¥è¿‡äº†ï¼Œå¤§å®¶è‡ªè¡Œæœç´¢å§ã€‚ æˆ‘çš„linuxå­ç³»ç»Ÿç”¨çš„æ˜¯ubuntuï¼Œä½¿ç”¨èµ·æ¥ç®€å•æ–¹ä¾¿å•ŠğŸ˜ å®‰è£…å®Œæˆä¹‹åï¼Œé¡ºæ‰‹å°±æ˜¯ä¸€ä¸ª apt updateï¼Œä½†æ˜¯é»˜è®¤çš„æºå¤ªæ…¢äº†ï¼Œæ²¡æ³•å¿ã€‚é‚£æˆ‘ä»¬å°±æ¢å›½å†…æºå§ã€‚ å›½å†…æœ‰å¥½å¤šæºï¼Œé˜¿é‡Œäº‘ï¼Œ163ï¼Œæœç‹ï¼Œä¸­ç§‘å¤§ç­‰ç­‰ã€‚æˆ‘ä»¬å°±ä»¥é˜¿é‡Œäº‘åšä¸ªä¾‹å­å§ï¼š æµè§ˆå™¨æ‰“å¼€ http://mirrors.aliyun.com/ æ‰¾åˆ°ubuntuçš„help å‘ç°é‡Œé¢æœ€æ–°çš„æ˜¯ Quantal(12.10) çœ‹æ¥ä¸èƒ½ç›´æ¥å¤åˆ¶ åœ¨ä½ çš„å­ç³»ç»Ÿbashä¸­æ‰§è¡Œ 123456cat /etc/apt/sources.list-------------------------deb http://archive.ubuntu.com/ubuntu/ xenial main restricted universe multiversedeb http://archive.ubuntu.com/ubuntu/ xenial-updates main restricted universe multiversedeb http://security.ubuntu.com/ubuntu/ xenial-security main restricted universe multiverse------------------------- ç´¢æ€§æœ€æ–°ç‰ˆubuntu16.04ä»£å·å«xenial é‚£ç›´æ¥æŠŠurlæ¢æ¢å°±è¡Œäº† 1234567sudo cp /etc/apt/sources.list /etc/apt/sources.list.bk # æ”¹é…ç½®æ–‡ä»¶ï¼Œå…ˆå¤‡ä»½æ˜¯ä¸ªå¥½ä¹ æƒ¯sudo vim /etc/apt/sources.list # æŠŠå†…å®¹æ¢æˆä¸‹é¢çš„å°±è¡Œäº†ï¼Œå…¶å®å°±æ˜¯urlå˜äº†-------------------------deb http://mirrors.aliyun.com/ubuntu/ xenial main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ xenial-updates main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ xenial-security main restricted universe multiverse------------------------- æå®šäº†ï¼Œæµ‹è¯•ä¸‹ï¼š 1sudo apt update æ²¡é—®é¢˜å°±å¯ä»¥äº†ã€‚","link":"/2017-09-17-win10%E5%AD%90%E7%B3%BB%E7%BB%9Fubuntu%E6%9B%B4%E6%8D%A2%E6%BA%90/"},{"title":"MSYS2åˆä½“éªŒ","text":"ä½œä¸ºä¸€åwindowsä¸‹é¢å¼€å‘è€…ï¼Œä¹‹å‰å·¥ä½œCygwinåšä¸ºè¾…åŠ©ã€‚å‰äº›å¤©çªç„¶å‘ç°äº†ä¸€ä¸ªå«MSYS2çš„å®¶ä¼™ã€‚ å‘ç°è¿™å®¶ä¼™è¿˜ä¸é”™ï¼Œè¿™æ˜¯ç™¾åº¦ç™¾ç§‘çš„ä»‹ç»ï¼š MSYS2 ï¼ˆMinimal SYStem 2ï¼‰ æ˜¯ä¸€ä¸ªMSYSçš„ç‹¬ç«‹æ”¹å†™ç‰ˆæœ¬ï¼Œä¸»è¦ç”¨äº shell å‘½ä»¤è¡Œå¼€å‘ç¯å¢ƒã€‚åŒæ—¶å®ƒä¹Ÿæ˜¯ä¸€ä¸ªåœ¨Cygwin ï¼ˆPOSIX å…¼å®¹æ€§å±‚ï¼‰ å’Œ MinGW-w64ï¼ˆä»â€MinGW-ç”Ÿæˆâ€ï¼‰åŸºç¡€ä¸Šäº§ç”Ÿçš„ï¼Œè¿½æ±‚æ›´å¥½çš„äº’æ“ä½œæ€§çš„ Windows è½¯ä»¶ã€‚MSYS2 æ˜¯MSYSçš„ä¸€ä¸ªå‡çº§ç‰ˆ,å‡†ç¡®çš„è¯´æ˜¯é›†æˆäº†pacman(æˆ‘å–œæ¬¢å«åƒè±†äºº)å’ŒMingw-w64çš„Cygwinå‡çº§ç‰ˆ, æä¾›äº†bash shellç­‰linuxç¯å¢ƒã€ç‰ˆæœ¬æ§åˆ¶è½¯ä»¶ï¼ˆgit/hgï¼‰å’ŒMinGW-w64 å·¥å…·é“¾ã€‚ä¸MSYSæœ€å¤§çš„åŒºåˆ«æ˜¯ç§»æ¤äº† Arch Linuxçš„è½¯ä»¶åŒ…ç®¡ç†ç³»ç»Ÿ Pacman(å…¶å®æ˜¯ä¸Cygwinçš„åŒºåˆ«)ã€‚ çœ‹èµ·æ¥è¿˜ä¸é”™ï¼Œè¿™æ˜¯å®˜ç½‘ å®‰è£…å°±ä¸‹è½½äºŒè¿›åˆ¶å®‰è£…ç¨‹åºå®‰è£…å°±å¯ä»¥äº†ã€‚ å®‰è£…ä¹‹åæ€¥åˆ‡åœ° pacman -Sy åˆ·æ–°è½¯ä»¶åŒ…æ•°æ®ï¼Œå®˜ç½‘çš„æºè¿˜æœ‰ç‚¹æ…¢ã€‚æ¢ä¸­ç§‘å¤§çš„æºå§ã€‚ 1234cd /etc/pacman.dls-------------------gnupg mirrorlist.mingw32 mirrorlist.mingw64 mirrorlist.msys ä¸‰ä¸ªmirrorlistå¼€å¤´çš„æ–‡ä»¶å°±æ˜¯æºçš„é…ç½®æ–‡ä»¶ ç¼–è¾‘ /etc/pacman.d/mirrorlist.mingw32 ï¼Œåœ¨æ–‡ä»¶å¼€å¤´æ·»åŠ ï¼š 1Server = http://mirrors.ustc.edu.cn/msys2/mingw/i686 ç¼–è¾‘ /etc/pacman.d/mirrorlist.mingw64 ï¼Œåœ¨æ–‡ä»¶å¼€å¤´æ·»åŠ ï¼š 1Server = http://mirrors.ustc.edu.cn/msys2/mingw/x86_64 ç¼–è¾‘ /etc/pacman.d/mirrorlist.msys ï¼Œåœ¨æ–‡ä»¶å¼€å¤´æ·»åŠ ï¼š 1Server = http://mirrors.ustc.edu.cn/msys2/msys/$arch ç„¶åæ‰§è¡Œ pacman -Sy åˆ·æ–°è½¯ä»¶åŒ…æ•°æ®å³å¯ã€‚ è¿˜æœ‰ä¸€ç‚¹ï¼Œcygwinåˆ‡æ¢ç³»ç»Ÿç£ç›˜æ˜¯ 1cd /cygdrive/d/ #æ¯”å¦‚åˆ‡æ¢åˆ°dç›˜ MYSYS2æ˜¯ï¼š 1cd /d ä½¿ç”¨windowsåŸç”Ÿå‘½ä»¤æ¯”å¦‚pingä¼šä¸­æ–‡ä¹±ç ï¼Œè¿™ä¹ˆè§£å†³ï¼š æ–°å»º /bin/winï¼š 12#!/bin/bash$@ |iconv -f gbk -t utf-8 ä½¿ç”¨ï¼š 1/bin/win ping baidu.com","link":"/2017-09-22-MSYS2%E5%88%9D%E4%BD%93%E9%AA%8C/"},{"title":"æ­å»ºGitæœåŠ¡å™¨ã€ç¼–å†™è‡ªåŠ¨éƒ¨ç½²è„šæœ¬","text":"ä»Šå¤©è¯•äº†ä¸‹åœ¨linuxæœåŠ¡å™¨ä¸Šæ­å»ºGitæœåŠ¡å™¨ï¼Œå¹¶ä¸”ç¼–å†™ä¸€ä¸ªç®€å•çš„è‡ªåŠ¨éƒ¨ç½²è„šæœ¬ã€‚ ä¸»è¦å‚è€ƒ å»–é›ªå³°-GITæ•™ç¨‹-æ­å»ºGitæœåŠ¡å™¨ ç°åœ¨å¼€å§‹å§ï¼ åˆ›å»ºä¸€ä¸ªgitç”¨æˆ·ï¼Œç”¨æ¥è¿è¡ŒgitæœåŠ¡1adduser git åˆ›å»ºè¯ä¹¦ç™»å½•æ”¶é›†æ‰€æœ‰éœ€è¦ç™»å½•çš„ç”¨æˆ·çš„å…¬é’¥ï¼Œå°±æ˜¯ä»–ä»¬è‡ªå·±çš„id_rsa.pubæ–‡ä»¶ï¼ŒæŠŠæ‰€æœ‰å…¬é’¥å¯¼å…¥åˆ°/home/git/.ssh/authorized_keysæ–‡ä»¶é‡Œï¼Œä¸€è¡Œä¸€ä¸ªã€‚ åˆå§‹åŒ–Gitä»“åº“å…ˆé€‰å®šä¸€ä¸ªç›®å½•ä½œä¸ºGitä»“åº“ï¼Œå‡å®šæ˜¯/home/git/sample.gitï¼Œåœ¨/home/gitç›®å½•ä¸‹è¾“å…¥å‘½ä»¤ 1git init --bare sample.git Gitå°±ä¼šåˆ›å»ºä¸€ä¸ªè£¸ä»“åº“ï¼Œè£¸ä»“åº“æ²¡æœ‰å·¥ä½œåŒºï¼Œå› ä¸ºæœåŠ¡å™¨ä¸Šçš„Gitä»“åº“çº¯ç²¹æ˜¯ä¸ºäº†å…±äº«ï¼Œæ‰€ä»¥ä¸è®©ç”¨æˆ·ç›´æ¥ç™»å½•åˆ°æœåŠ¡å™¨ä¸Šå»æ”¹å·¥ä½œåŒºï¼Œå¹¶ä¸”æœåŠ¡å™¨ä¸Šçš„Gitä»“åº“é€šå¸¸éƒ½ä»¥.gitç»“å°¾ã€‚ç„¶åï¼ŒæŠŠowneræ”¹ä¸ºgit 1chown -R git:git sample.git ç¦ç”¨gitç”¨æˆ·shellç™»å½•é€šè¿‡ç¼–è¾‘/etc/passwdæ–‡ä»¶å®Œæˆï¼Œæ‰¾åˆ°ä½ çš„gitç”¨æˆ·çš„ä¸€è¡Œ,ä¾‹å¦‚ 1git:x:1001:1001:,,,:/home/git:/bin/bash æŠŠ/bin/bashæ”¹ä¸º/usr/bin/git-shell,ä¾‹å¦‚ 1git:x:1001:1001:,,,:/home/git:/usr/bin/git-shell è¿™æ ·ï¼Œgitç”¨æˆ·å¯ä»¥æ­£å¸¸é€šè¿‡sshä½¿ç”¨gitï¼Œä½†æ— æ³•ç™»å½•shellï¼Œå› ä¸ºæˆ‘ä»¬ä¸ºgitç”¨æˆ·æŒ‡å®šçš„git-shellæ¯æ¬¡ä¸€ç™»å½•å°±è‡ªåŠ¨é€€å‡ºã€‚ å…‹éš†è¿œç¨‹ä»“åº“1git clone git@server:sample.git serveræ˜¯ä½ çš„æœåŠ¡å™¨åŸŸåæˆ–ipåœ°å€ å¦‚æœgitä»“åº“å’Œwebç›®å½•åœ¨åŒä¸€å°æœåŠ¡å™¨ä¸»æœºä¸Š: 1git clone /home/git/sample.git å¦‚æœä¸æ˜¯åœ¨gitç”¨æˆ·çš„å®¶ç›®å½•ä¸­åˆ›å»ºçš„,æ¯”å¦‚/srv/gits/sample.gitï¼š 1git clone git@server:/srv/gits/sample.git å¦‚æœcloneæˆåŠŸï¼Œé‚£ä¹ˆä½ çš„gitæœåŠ¡å™¨å°±æ­å»ºæˆåŠŸäº†ã€‚ æ¥ä¸‹æ¥ï¼š è‡ªåŠ¨åŒæ­¥é’©å­è„šæœ¬å› ä¸ºæˆ‘æ˜¯webç›®å½•å’Œgitæ˜¯åŒä¸€å°æœåŠ¡å™¨ ç¼–è¾‘ /home/git/sample.git/hooks/post-receive, post-receiveå°±æ˜¯åœ¨gitæœåŠ¡å™¨æ”¶åˆ°ä»£ç æ¨é€å(pushå®Œæˆä¹‹å)æ‰§è¡Œçš„è„šæœ¬ã€‚ 1234567891011121314#!/bin/shwhile read oldrev newrev refnamedo branch=$(git rev-parse --symbolic --abbrev-ref $refname) if [ &quot;master&quot; == &quot;$branch&quot; ]; then # Do something echo &quot;post-receive in branch master&quot; &gt;&gt; /tmp/git-sample.log unset GIT_DIR wwwPath=/var/www/html/sample cd $wwwPath &amp;&amp; /usr/bin/git pull origin master exit 0 fidone ä»è„šæœ¬å†…å®¹å¯ä»¥çœ‹å‡ºï¼Œæˆ‘ä»¬åœ¨åˆ¤æ–­å½“å‰pushçš„åˆ†æ”¯æ˜¯masteræ—¶æ‰§è¡Œgit pull origin masteræ“ä½œã€‚ ç»™æ‰§è¡Œæƒé™ 12chown -R git:git /home/git/sample.git/hooks/post-receivechmod +x /home/git/sample.git/hooks/post-receive å› ä¸ºæ˜¯gitä»“åº“å’Œwebç›®å½•åœ¨åŒä¸€å°æœåŠ¡å™¨ä¸»æœºä¸Š,è¿™é‡Œcloneä½¿ç”¨çš„æ˜¯: 1git clone /home/git/sample.git å› ä¸ºåŒæ­¥è„šæœ¬çš„æ‰§è¡Œç”¨æˆ·æ˜¯gitï¼Œæ‰€ä»¥è¦ä¿è¯é¡¹ç›®ç›®å½•è¦èµ‹äºˆgitå†™æƒé™ã€‚å®¹æ˜“å‡ºé—®é¢˜çš„ä¹Ÿæ˜¯æƒé™é—®é¢˜ã€‚ å¥½äº†ï¼Œè¯•è¯•å§~","link":"/2017-09-29-%E6%90%AD%E5%BB%BAGit%E6%9C%8D%E5%8A%A1%E5%99%A8%E3%80%81%E7%BC%96%E5%86%99%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2%E8%84%9A%E6%9C%AC/"},{"title":"DockeråŸºç¡€å‘½ä»¤","text":"æœ€è¿‘å¿™é‡Œå·é—²ç ”ç©¶äº†ä¸‹dockerè¿™ä¸ªå¾ˆç«çš„ä¸œä¸œã€‚åšç‚¹ç¬”è®°ğŸ˜ é•œåƒåˆ—å‡ºé•œåƒåˆ—è¡¨ 1docker images è·å–ä¸€ä¸ªæ–°çš„é•œåƒ 1docker pull base/archlinux åˆ é™¤é•œåƒ 1docker rmi imageID æŸ¥æ‰¾é•œåƒ 1docker search php æ„å»º 12cd /path/to/Dockerfiledocker build -t imageName ./ å®¹å™¨1docker run base/archlinux /bin/echo &quot;hello world&quot; è¿è¡Œäº¤äº’å¼çš„å®¹å™¨ 1docker run -i -t base/archlinux /bin/bash * -t:åœ¨æ–°å®¹å™¨å†…æŒ‡å®šä¸€ä¸ªä¼ªç»ˆç«¯æˆ–ç»ˆç«¯ã€‚ * -i:å…è®¸ä½ å¯¹å®¹å™¨å†…çš„æ ‡å‡†è¾“å…¥ (STDIN) è¿›è¡Œäº¤äº’ã€‚åˆ†é…ç«¯å£ 12docker run -P php7.0-app #è‡ªåŠ¨åˆ†é…docker run -p 5000:80 #å®¹å™¨å†…éƒ¨çš„ 80 ç«¯å£æ˜ å°„åˆ°ä¸»æœºçš„ 5000 ç«¯å£ä¸Š æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„å®¹å™¨ 12docker psdocker container ls #æˆ–è€… æŸ¥çœ‹ç«¯å£ 1docker port containerID/contaienrName æŸ¥çœ‹æ—¥å¿— 12docker logs docker -f containerID/contaienrName æŸ¥çœ‹è¿›ç¨‹ 1docker top containerID/contaienrName æŸ¥çœ‹Dockerçš„åº•å±‚ä¿¡æ¯ 1docker inspect containerID/contaienrName åœæ­¢å®¹å™¨ 1docker stop containerID/contaienrName å¯åŠ¨å®¹å™¨ 1docker start containerID/contaienrName æ­£åœ¨è¿è¡Œçš„å®¹å™¨ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ docker restart å‘½ä»¤æ¥é‡å¯ æŸ¥çœ‹æœ€åä¸€æ¬¡åˆ›å»ºçš„å®¹å™¨ 1docker ps -l ç§»é™¤å®¹å™¨ 1docker rm containerID/contaienrName","link":"/2017-10-26-Docker%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/"},{"title":"ä½¿ç”¨dockerç©è½¬phpå¼€å‘ç¯å¢ƒ","text":"è¿˜æ˜¯å¿™é‡Œå·é—²ç ”ç©¶äº†ä¸‹æ€ä¹ˆç”¨dockerè¿™ä¸ªä¸œä¸œæ¥æ•´phpå¼€å‘ã€‚åšç‚¹ç¬”è®°ğŸ˜ å…ˆçœ‹Dockerfile: 12345678# ä½¿ç”¨åŸºäºalpine linux çš„é•œåƒï¼Œä½“ç§¯å°ï¼Œä¸‹è½½å¿«FROM php:7.0-cli-alpine# ä½¿ç”¨ä¸­ç§‘å¤§çš„æºåŠ å¿«ä¸‹è½½é€Ÿåº¦RUN sed -i &apos;s/dl-cdn.alpinelinux.org/mirrors.ustc.edu.cn/g&apos; /etc/apk/repositories# å®‰è£…ä¸‹åŸºæœ¬çš„phpæ‰©å±•RUN docker-php-ext-install pdo pdo_mysql mysqli æ„å»º1docker build -t heropoo/php-cli-alpine . #å…ˆåˆ‡æ¢åˆ°ä½ çš„Dockerfileç›®å½• è¿è¡Œ1docker run -it --rm --name php-cli-server -p 8080:80 -v //c/Users/ttt/www:/usr/src/www -w /usr/src/www php:7.0-cli-alpine php -S 0.0.0.0:80 è¿™å¥å¥½é•¿å•Šï¼Œè§£é‡Šä¸‹å„ä¸ªå‚æ•°ï¼š -tåœ¨æ–°å®¹å™¨å†…æŒ‡å®šä¸€ä¸ªä¼ªç»ˆç«¯æˆ–ç»ˆç«¯ -i å…è®¸ä½ å¯¹å®¹å™¨å†…çš„æ ‡å‡†è¾“å…¥ (STDIN) -p æ˜ å°„å®¿ä¸»æœºç«¯å£åˆ°å®¹å™¨çš„ç«¯å£ï¼Œä¸Šé¢å°±æ˜¯å®¿ä¸»æœºçš„8080åˆ°å®¹å™¨çš„80 -v æŒ‚è½½å®¿ä¸»æœºç›®å½•åˆ°å®¹å™¨çš„ç›®å½•ï¼Œä¸Šé¢å°±æ˜¯å®¿ä¸»æœº/c/Users/ttt/wwwåˆ°å®¹å™¨/usr/src/www -w è®¾ç½®å·¥ä½œç›®å½• â€“rm å®¹å™¨è¿è¡Œå®Œä¹‹ååˆ é™¤ â€“name ç»™å®¹å™¨åå­— php -S 0.0.0.0:80 å°±æ˜¯ç”¨phpå†…ç½®çš„æœåŠ¡å™¨å¯åŠ¨ä¸€ä¸ªwebæœåŠ¡äº†ï¼Œç®€å•ç‚¹æ¥ å“ˆå“ˆ æˆ‘ç³»ç»Ÿæ˜¯windowsï¼Œæˆ‘åœ¨æµè§ˆå™¨è®¿é—®dockerçš„webæœåŠ¡ï¼šhttp://ip:8080,ipæ˜¯ä½ çš„dockerçš„ip,å°±å¯ä»¥äº†ã€‚ æ˜¯ä¸æ˜¯å¾ˆå¥½ç©ğŸ˜œ","link":"/2017-11-16-%E4%BD%BF%E7%94%A8docker%E7%8E%A9%E8%BD%ACphp%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/"},{"title":"ç™¾åº¦UEditorè‡ªå®šä¹‰ä¸Šä¼ åœ°å€","text":"ä¹‹å‰æœ‰ä¸ªå°æœ‹å‹é—®æˆ‘ç™¾åº¦UEditoræ€ä¹ˆè‡ªå®šä¹‰æœåŠ¡ç«¯ä¸Šä¼ åœ°å€, æ­£å¥½ä¹Ÿç”¨è¿‡ï¼Œç°åœ¨åšä¸‹ç¬”è®°å§ã€‚ åœ¨ueå®ä¾‹åŒ–çš„æ—¶å€™ä½ æœåŠ¡ç«¯ä¸Šä¼ çš„è¯·æ±‚åœ°å€èµ‹å€¼ç»™serverUrl 12345678910111213141516171819var ue;ue = UE.getEditor('editor', { toolbars: [ //è¿™ä¸ªæ˜¯å·¥å…·æ é…ç½®ï¼Œè‡ªå·±å®šä¹‰å’Œä»Šå¤©ä¸»é¢˜æ— å…³ [ 'fullscreen', 'source', '|', 'undo', 'redo', '|', 'bold', 'italic', 'underline', 'fontborder', 'strikethrough', 'superscript', 'subscript', 'removeformat', 'formatmatch', 'autotypeset', 'blockquote', 'pasteplain', '|', 'forecolor', 'backcolor', 'insertorderedlist', 'insertunorderedlist', 'selectall', 'cleardoc', '|', 'rowspacingtop', 'rowspacingbottom', 'lineheight', '|', 'customstyle', 'paragraph', 'fontfamily', 'fontsize', '|', 'directionalityltr', 'directionalityrtl', 'indent', '|', 'justifyleft', 'justifycenter', 'justifyright', 'justifyjustify', '|', 'touppercase', 'tolowercase', '|', 'link', 'unlink', 'anchor', '|', 'imagenone', 'imageleft', 'imageright', 'imagecenter', '|', 'simpleupload', '|', 'pagebreak', 'template', 'background', '|', 'horizontal', 'date', 'time', 'spechars', 'snapscreen', 'wordimage', '|', 'inserttable', 'deletetable', 'insertparagraphbeforetable', 'insertrow', 'deleterow', 'insertcol', 'deletecol', 'mergecells', 'mergeright', 'mergedown', 'splittocells', 'splittorows', 'splittocols', 'charts', '|', 'preview' ] ], serverUrl: 'http://your-server-address' //è¿™é‡Œæ˜¯ä½ æœåŠ¡ç«¯ä¸Šä¼ çš„è¯·æ±‚åœ°å€}); åœ¨ä¸Šé¢è‡ªå®šä¹‰äº†æœåŠ¡ç«¯åœ°å€ä¹‹åï¼Œæˆ‘ä»¬åˆ·æ–°é¡µé¢ï¼Œueå®ä¾‹åŒ–çš„æ—¶å€™ä¼šè‡ªåŠ¨è¯·æ±‚ä½ çš„åœ°å€å¹¶ä¸”å¸¦ç€queryå‚æ•°ï¼Œå¤§æ¦‚æ˜¯è¿™æ ·ï¼šhttp://your-server-address?action=configã€‚è¿™æ˜¯ueå®ä¾‹åŒ–ä¼šè¯·æ±‚é…ç½®æ–‡ä»¶ï¼Œç®€å•ç‚¹ä½ å¯ä»¥ç›´æ¥è¿”å›ueæ’ä»¶æ–‡ä»¶å¤¹ä¸­ueditor/1.4.3.3/php/config.jsonçš„å†…å®¹å°±å¯ä»¥äº†ã€‚å½“ç„¶äº†å…·ä½“é…ç½®ä½ æ˜¯å¯ä»¥è‡ªå·±æŒ‰è‡ªå·±éœ€æ±‚æ”¹åŠ¨ã€‚ æ¥ä¸‹æ¥ä¸Šä¼ å›¾ç‰‡ï¼Œéšä¾¿ä¸Šä¼ ä¸€å¼ å›¾ç‰‡ï¼Œä¼šå‘ç°ueçš„è¯·æ±‚åœ°å€æ˜¯http://your-server-address?action=uploadimageã€‚è¿™æ ·æ˜¯ä¸æ˜¯æç„¶å¤§æ‚Ÿï¼š actionå‚æ•°æ˜¯configï¼Œä½ å°±ç»™ä»–è¿”å›é…ç½®å†…å®¹; actionå‚æ•°æ˜¯uploadimageå°±æ˜¯å›¾ç‰‡ä¸Šä¼ ï¼Œä½ å°±ä¿å­˜å›¾ç‰‡æ–‡ä»¶ï¼Œè¿”å›æˆåŠŸæˆ–è€…å¤±è´¥çš„ç»“æœã€‚ ä¸Šä¼ ç»“æœè¿”å›æ ¼å¼æ˜¯è¿™æ ·çš„ï¼š å¤±è´¥çš„æƒ…å†µ 1234{ \"state\": \"Failed\", \"msg\": \"error msg\"} æˆåŠŸçš„æƒ…å†µ 123456789{ \"state\": \"SUCCESS\", \"msg\": \"ok\", \"original\": \"aaa.jpg\", //å›¾ç‰‡æºæ–‡ä»¶å \"type\": \".jpg\", //å›¾ç‰‡åç¼€ \"size\": 10240000, //å›¾ç‰‡å¤§å° \"title\": \"aaa\", //å›¾ç‰‡imgæ ‡ç­¾ä¸Šçš„å±æ€§title \"url\": \"/upload/fsf3r.jpg\" //å›¾ç‰‡ä¸Šä¼ ä¹‹åçš„url} å¥½äº†å°±è¿™æ ·","link":"/2017-10-26-%E7%99%BE%E5%BA%A6ueditor%E8%87%AA%E5%AE%9A%E4%B9%89%E4%B8%8A%E4%BC%A0%E5%9C%B0%E5%9D%80/"},{"title":"2018,æ–°å¹´å¿«ä¹ï¼","text":"2018å¹´äº†ï¼Œæ–°å¹´å¿«ä¹ï¼ åŠ æ²¹ï¼","link":"/2018-01-01-2018-happy-new-year/"},{"title":"æ•´ç†å‡ ä¸ªå¸¸ç”¨çš„å›½å†…æº","text":"Linuxä»¥åŠä¸€äº›å¼€æºè½¯ä»¶ä¸€äº›ä¼ä¸šçš„ï¼š ç½‘æ˜“å¼€æºé•œåƒç«™ http://mirrors.163.com/ æœç‹å¼€æºé•œåƒç«™ http://mirrors.sohu.com/ é˜¿é‡Œäº‘æºé•œåƒç«™ http://mirrors.aliyun.com/ é¦–éƒ½åœ¨çº¿ http://mirrors.yun-idc.com/ å„å¤§é«˜æ ¡çš„ï¼š ä¸­ç§‘å¤§å¼€æºé•œåƒç«™ http://mirrors.ustc.edu.cn/ æ¸…åå¤§å­¦å¼€æºè½¯ä»¶é•œåƒç«™ https://mirrors.tuna.tsinghua.edu.cn/ åä¸­ç§‘æŠ€å¤§å­¦å¼€æºé•œåƒç«™ http://mirror.hust.edu.cn/ æµ™æ±Ÿå¤§å­¦å¼€æºé•œåƒç«™ http://mirrors.zju.edu.cn/ ä¸œè½¯ä¿¡æ¯å­¦é™¢å¼€æºé•œåƒç«™ http://mirrors.neusoft.edu.cn/ åŒ—äº¬ç†å·¥å¤§å­¦å¼€æºè½¯ä»¶é•œåƒ http://mirror.bit.edu.cn/ åŒ—äº¬äº¤é€šå¤§å­¦è‡ªç”±ä¸å¼€æºè½¯ä»¶é•œåƒç«™ https://mirror.bjtu.edu.cn/ å…°å·å¤§å­¦å¼€æºç¤¾åŒºé•œåƒç«™ http://mirror.lzu.edu.cn/ ä¸Šæµ·äº¤é€šå¤§å­¦ http://ftp.sjtu.edu.cn/ ä¸œåŒ—å¤§å­¦ http://mirror.neu.edu.cn/ js npm æ·˜å®NPMé•œåƒ http://npm.taobao.org/ php composer Composerä¸­æ–‡ç½‘ http://www.phpcomposer.com/ LaravelChinaç¤¾åŒºæä¾›çš„é•œåƒåœ°å€ï¼š https://packagist.laravel-china.org Docker DaoCloud http://a42abd64.m.daocloud.io é˜¿é‡Œäº‘ è¦æ³¨å†Œç‹¬ç«‹åˆ†é… ä¼ é€é—¨ å¤§æ¦‚å°±æ•´ç†è¿™ä¹ˆå¤šäº†ï¼Œè‡³äºå„ä¸ªé•œåƒçš„æ›´æ¢æ–¹æ³•å¤§å®¶æ ¹æ®è‡ªå·±çš„åº”ç”¨è‡ªè¡Œç™¾åº¦å§~","link":"/2018-01-20-cn-mirrors/"},{"title":"å¦‚æœç¼–ç¨‹è¯­è¨€æ˜¯ä¸€ç§æ­¦å™¨(è½¬è‡ªäº’è”ç½‘)","text":"å¯¹ç¨‹åºå‘˜æ¥è¯´ï¼Œç¼–ç¨‹è¯­è¨€å°±æ˜¯æ­¦å™¨ï¼Œä½†æœ‰çš„æ­¦å™¨å¥½ç”¨ï¼Œæœ‰çš„æ­¦å™¨ä¸å¥½ç”¨ï¼Œæœ‰çš„æ­¦å™¨ç”šè‡³ä¼šæ€äº†è‡ªå·± Cè¯­è¨€æ˜¯M1å¼åŠ å…°å¾·æ­¥æªï¼Œå¾ˆè€ä½†å¯é ã€‚ C++æ˜¯åŒæˆªæ£ï¼ŒæŒ¥èˆèµ·æ¥å¾ˆå¼ºæ‚ï¼Œå¾ˆå¸å¼•äººï¼Œä½†éœ€è¦ä½ å¤šå¹´çš„ç£¨ç»ƒæ¥æŒæ¡ï¼Œå¾ˆå¤šäººå¸Œæœ›æ”¹ç”¨åˆ«çš„æ­¦å™¨ã€‚ Perlè¯­è¨€æ˜¯ç‡ƒçƒ§å¼¹ï¼Œæ›¾ç»åœ¨æˆ˜åœºä¸Šå¾ˆæœ‰ç”¨ï¼Œä½†ç°åœ¨å¾ˆå°‘äººä½¿ç”¨å®ƒã€‚ Javaæ˜¯M240é€šç”¨å¼¹å¤¹å¼è‡ªåŠ¨æœºæªï¼Œæœ‰æ—¶å®ƒçš„å¼¹å¤¹æ˜¯åœ†çš„ï¼Œä½†æœ‰æ—¶å€™ä¸æ˜¯ï¼Œå¦‚æœä¸æ˜¯ï¼Œå½“ä½ å¼€ç«æ—¶ï¼Œä¼šé‡åˆ°NullPointerExceptioné—®é¢˜ï¼Œæªå°±ä¼šçˆ†ç‚¸ï¼Œä½ è¢«ç‚¸æ­»ã€‚ Scalaæ˜¯M240é€šç”¨æœºæªçš„å˜ç§ï¼Œä½†å®ƒçš„ä½¿ç”¨æ‰‹å†Œæ˜¯ç”¨ä¸€ç§çœ‹ä¸æ‡‚çš„æ–¹è¨€å†™çš„ï¼Œå¾ˆå¤šäººæ€€ç–‘é‚£åªæ˜¯ä¸€äº›æ¢¦è¯ã€‚ JavaScriptæ˜¯ä¸€æŠŠå®å‰‘ï¼Œä½†æ²¡æœ‰å‰‘æŸ„ã€‚ Goè¯­è¨€æ˜¯ä¸€ç§è‡ªåˆ¶çš„â€if err != nilâ€å‘ä»¤æªï¼Œæ¯ä¸€æ¬¡å‘å°„åï¼Œä½ éƒ½å¿…é¡»è¦æ£€æŸ¥å®ƒæ˜¯å¦çœŸçš„å‘å°„äº†ã€‚ Rustè¯­è¨€æ˜¯ä¸€ç§3Dæ‰“å°å‡ºçš„æªã€‚å°†æ¥ä¹Ÿè®¸çœŸçš„èƒ½æ´¾ä¸Šç”¨åœºã€‚ bashæ˜¯ä¸€ä¸ªååˆ†ç¢æ‰‹çš„é”¤å­ï¼Œä½ æŠ¡èµ·å®ƒæ—¶ä¼šå‘ç°æ‰€æœ‰ä¸œè¥¿çœ‹èµ·æ¥éƒ½åƒé’‰å­ï¼Œå°¤å…¶æ˜¯ä½ çš„æŒ‡å¤´ã€‚ Pythonæ˜¯ä¸€ç§â€v2/v3â€åŒç®¡æªï¼Œæ¯æ¬¡åªèƒ½ç”¨ä¸€ä¸ªç®¡å­å‘å°„ï¼Œä½ æ°¸è¿œä¸çŸ¥é“è¯¥ç”¨å“ªä¸ªç®¡å­å‘å°„å¥½ã€‚ Rubyæ˜¯ä¸€æŠŠå¤–åµŒçº¢å®çŸ³çš„å®åˆ€ï¼Œäººä»¬ä½¿ç”¨å®ƒé€šå¸¸æ˜¯å› ä¸ºçœ‹èµ·æ¥å¾ˆç‚«ã€‚ PHPæ˜¯æ°´ç®¡å­ï¼Œä½ é€šå¸¸ä¼šæŠŠå®ƒçš„ä¸€æ®µæ¥åˆ°æ±½è½¦çš„æ’æ°”ç®¡ï¼Œå¦ä¸€ç«¯æ’è¿›è½¦çª—é‡Œï¼Œç„¶åä½ åè¿›è½¦é‡Œï¼Œå¼€åŠ¨å¼•æ“ã€‚ Mathematicaæ˜¯ä¸€ç§åœ°çƒä½è½¨é“ç²’å­å¤§ç‚®ï¼Œå®ƒä¹Ÿè®¸èƒ½å¤Ÿå¹²å‡ºå¾ˆç¥å¥‡çš„äº‹æƒ…ï¼Œä½†åªæœ‰ä»˜å¾—èµ·è´¹ç”¨çš„äººæ‰èƒ½ä½¿ç”¨å®ƒã€‚ C#æ˜¯ä¸€ç§å¼ºæ‚çš„æ¿€å…‰å¤§ç‚®ï¼Œæ¶å­ä¸€å¤´é©´å­ä¸Šï¼Œå¦‚æœä»é©´å­ä¸Šå¸ä¸‹æ¥ï¼Œå®ƒå¥½åƒå°±å‘ä¸å‡ºæ¿€å…‰ã€‚ Prologè¯­è¨€æ˜¯ä¸€ç§äººå·¥æ™ºèƒ½æ­¦å™¨ï¼Œä½ å‘Šè¯‰å®ƒè¦åšä»€ä¹ˆï¼Œå®ƒä¼šç…§åšä¸è¯¯ï¼Œä½†ä¹‹åï¼Œå®ƒä¼šå¼„å‡ ä¸ªç»ˆç»“è€…å‡ºæ¥ï¼Œçƒ§æ‰ä½ çš„æˆ¿å­ã€‚ Lispè¯­è¨€æ˜¯ä¸€æŠŠå‰ƒé¡»åˆ€ï¼Œæœ‰å¾ˆå¤šæ¬¾å¼ã€‚åªæœ‰å¯»æ±‚åˆºæ¿€å’Œå±é™©çš„äººæ‰ä¼šä½¿ç”¨å®ƒã€‚","link":"/2018-01-23-If-the-programming-language-is-a-weapon/"},{"title":"Gitçš„ä¸€äº›åŸºæœ¬æ“ä½œã€æŒç»­æ›´æ–°ã€‘","text":"ç»å¸¸ç”¨gitï¼Œä½†å¥½å¤šå‘½ä»¤æ€»æ˜¯è®°ä¸ä½ï¼Œæ¯æ¬¡éƒ½ç™¾åº¦ã€‚ç°åœ¨æ•´ç†ä¸‹åšä¸ªç¬”è®°å§ã€‚ åˆ†æ”¯æ“ä½œ æŸ¥çœ‹åˆ†æ”¯ 12git branch #åªæ˜¾ç¤ºæœ¬åœ°åˆ†æ”¯git branch -a #æ˜¾ç¤ºæœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯ åˆ›å»ºåˆ†æ”¯ 12git checkout -b branch_name#å¦‚æœæœ‰ä¸€ä¸ªè¿œç¨‹åˆ†æ”¯remotes/origin/branch_name,é‚£ä¹ˆæ‰§è¡Œè¿™ä¸ªå‘½ä»¤å°†ä¼šåˆ›å»ºæ–°çš„åä¸º`branch_name`æœ¬åœ°åˆ†æ”¯å¹¶ä¸”è·Ÿè¸ªåŒåçš„è¿œç¨‹åˆ†æ”¯remotes/origin/branch_name æ¨é€è¿œç¨‹åˆ†æ”¯ 1git push origin branch_name åˆ é™¤åˆ†æ”¯ 123git branch -d branch_name# åˆ é™¤æœ¬åœ°åˆ†æ”¯åå¹¶åˆ é™¤è¿œç¨‹åˆ†æ”¯git push --delete origin branch_name tag æ ‡ç­¾æ“ä½œ æŸ¥çœ‹tagåˆ—è¡¨ 1git tag æ–°å¢tag 1git tag tag_name # æ¯”å¦‚v1.0 æ¨é€æœ¬åœ°æŒ‡å®štagåˆ°è¿œç¨‹ 1git push origin tag_name æ¨é€å…¨éƒ¨æœ¬åœ°tagåˆ°è¿œç¨‹ 1git push --tags åˆ é™¤tag 123git tag -d # åˆ é™¤tagåå¹¶åˆ é™¤è¿œç¨‹taggit push --delete origin tag_name githubä¸­forkçš„é¡¹ç›®ä¸åŸä½œè€…åŒæ­¥å‡å¦‚ä¸€ä¸ªé¡¹ç›®Evil-S0ul/write-docåœ°å€: https://github.com/Evil-S0ul/write-doc æˆ‘forkä¹‹åçš„é¡¹ç›®æ˜¯heropoo/write-docåœ°å€: https://github.com/heropoo/write-doc æ¥ä¸‹æ¥å¼€å§‹æ“ä½œï¼š åˆ‡æ¢åˆ°æˆ‘forkçš„é¡¹ç›®ç›®å½•é‡Œï¼Œç„¶åå¢åŠ æºä»“åº“åœ°å€åˆ°ä½ é¡¹ç›®çš„è¿œç¨‹åˆ†æ”¯ä¸­12cd write-docgit remote add Evil-S0ul https://github.com/Evil-S0ul/write-doc fetchåˆšæ·»åŠ çš„æºåˆ†æ”¯åˆ°æœ¬åœ°1git fetch Evil-S0ul åˆå¹¶ä¸¤ä¸ªç‰ˆæœ¬çš„ä»£ç 1git merge Evil-S0ul/master æœ€åæŠŠåˆå¹¶åçš„ä»£ç pushåˆ°ä½ çš„Githubé¡¹ç›®ä¸Šå»å°±okå•¦1git push origin master æ£€å‡ºè¿œç¨‹çš„æŸä¸ªåˆ†æ”¯æˆ–è€…tag1234git fetchgit checkout branch_name#æˆ–è€…git checkout tag_name åŒæ­¥ä¸”mergeå…¶ä»–è¿œç¨‹åˆ†æ”¯åˆ°å½“å‰æœ¬åœ°åˆ†æ”¯1git pull origin other_branch_name Gitæ— æ³•pullä»“åº“refusing to merge unrelated historiesæœ‰æ—¶å€™æˆ‘ä»¬çš„æœ¬åœ°ä»“åº“æ·»åŠ äº†ä¸€ä¸ªè¿œç¨‹ä»“åº“åœ°å€ï¼Œpullä»£ç æ—¶ä¼šæŠ¥refusing to merge unrelated historiesçš„é”™ã€‚è§£å†³æ–¹æ³•æ˜¯åŠ ä¸€ä¸ªå‚æ•°--allow-unrelated-historiesã€‚ å‡å¦‚æˆ‘ä»¬çš„åˆ†æ”¯æ˜¯master 1git pull origin master --allow-unrelated-histories æœ€åæ›´æ–°ï¼š 2018-11-18 17:59:06","link":"/2018-03-31-git/"},{"title":"Rustæ›´æ¢å›½å†…æº","text":"ä»Šå¤©å­¦cargoè¿™èŠ‚ï¼Œcargo buildæ—¶å®‰è£…å¤–éƒ¨ä¾èµ–çœŸçš„æ…¢å•Šã€‚æœæ–­æ‰¾å›½å†…æº,æœæ–­åˆæ˜¯ustc(ä¸­ç§‘å¤§, emmmä»¥å‰åº”è¯¥åŠªåŠ›ä¸€ç‚¹è€ƒä¸­ç§‘å¤§(ï¿£â–½ï¿£)*) æ•™ç¨‹å¼€å§‹ï¼š è®¾ç½®ä¸¤ä¸ªç¯å¢ƒå˜é‡ 12export RUSTUP_DIST_SERVER=https://mirrors.ustc.edu.cn/rust-staticexport RUSTUP_UPDATE_ROOT=https://mirrors.ustc.edu.cn/rust-static/rustup æˆ–è€…ç›´æ¥å†™å…¥~/.bashrc ä½¿ç”¨ustcuçš„æºä¸‹è½½å®‰è£…rust 1curl -sSf https://mirrors.ustc.edu.cn/rust-static/rustup.sh | sh ç¼–è¾‘~/.cargo/configå†™å…¥ 1234567[registry]index = &quot;https://mirrors.ustc.edu.cn/crates.io-index/&quot;[source.crates-io]registry = &quot;https://github.com/rust-lang/crates.io-index&quot;replace-with = &apos;ustc&apos;[source.ustc]registry = &quot;https://mirrors.ustc.edu.cn/crates.io-index/&quot; ç°åœ¨cargoå®‰è£…å¤–éƒ¨ä¾èµ–æ˜¯ä¸æ˜¯è´¼æºœ~ğŸ˜‰","link":"/2018-01-24-change-rust-mirrors/"},{"title":"ä½¿ç”¨PHPå†™Gitçš„è‡ªåŠ¨éƒ¨ç½²webhookè„šæœ¬","text":"ç°åœ¨å¼€å‘é¡¹ç›®å¤§å¤šä½¿ç”¨gitä½œä¸ºç‰ˆæœ¬æ§åˆ¶å™¨ï¼Œè€Œä¸”ç°åœ¨å¤§å¤šæ•°çš„ä»£ç æ‰˜ç®¡å¹³å°éƒ½æ”¯æŒè‡ªå®šä¹‰webhookè„šæœ¬ã€‚æ­£å¥½åˆ©ç”¨è¿™ä¸ªè„šæœ¬ï¼Œç»“åˆgitçš„workflowï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾çš„åšåˆ°é¡¹ç›®ä»£ç çš„è‡ªåŠ¨å‘å¸ƒéƒ¨ç½²ã€‚ æœ€ç®€å•çš„æµç¨‹æ¯”å¦‚ä½ çš„é¡¹ç›®æœ‰ä¸¤ä¸ªåˆ†æ”¯ï¼Œä¸€ä¸ªæ˜¯ä»£ç å·²ç»ç»è¿‡æµ‹è¯•å¯ç”¨äºéƒ¨ç½²åˆ°æœåŠ¡å™¨çš„masteråˆ†æ”¯ï¼Œä¸€ä¸ªç”¨äºå¼€å‘çš„devåˆ†æ”¯ã€‚é‚£ä¹ˆæˆ‘ä»¬ä¸Šçº¿çš„è¿‡ç¨‹å°±æ˜¯merge devçš„ä»£ç åˆ°masteråˆ†æ”¯ã€‚é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è®¾ç½®ä¸€ä¸ªä»£ç pushè§¦å‘çš„webhookã€‚è¿™ä¸ªwebhookè„šæœ¬çš„ä»£ç ä¹Ÿéå¸¸ç®€å•ï¼Œå°±æ˜¯git pull origin masterã€‚ æœ€ç®€å•çš„å®ç° ç¼–å†™webhook.php 12345678910111213141516171819202122232425262728293031323334&lt;?php// todo åœ¨æ­¤å¯ä»¥å†™æ ¡éªŒæƒé™å¯†ç ä¹‹ç±»çš„ä»£ç $path = dirname(__DIR__);$log_file = $path.'/runtime/logs/webhook-pull-error-output.log'; //é”™è¯¯æ—¥å¿—æ–‡ä»¶çš„è·¯å¾„$descriptorspec = array( 0 =&gt; array(\"pipe\", \"r\"), // æ ‡å‡†è¾“å…¥ï¼Œå­è¿›ç¨‹ä»æ­¤ç®¡é“ä¸­è¯»å–æ•°æ® 1 =&gt; array(\"pipe\", \"w\"), // æ ‡å‡†è¾“å‡ºï¼Œå­è¿›ç¨‹å‘æ­¤ç®¡é“ä¸­å†™å…¥æ•°æ® 2 =&gt; array(\"file\", $log_file, \"a\") // æ ‡å‡†é”™è¯¯ï¼Œå†™å…¥åˆ°ä¸€ä¸ªæ–‡ä»¶);$cwd = $path;$env = array('PATH' =&gt; $_SERVER['PATH']);$process = proc_open('sudo git pull origin master', $descriptorspec, $pipes, $cwd, $env);echo '&lt;pre&gt;';if (is_resource($process)) { // $pipes ç°åœ¨çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„ï¼š // 0 =&gt; å¯ä»¥å‘å­è¿›ç¨‹æ ‡å‡†è¾“å…¥å†™å…¥çš„å¥æŸ„ // 1 =&gt; å¯ä»¥ä»å­è¿›ç¨‹æ ‡å‡†è¾“å‡ºè¯»å–çš„å¥æŸ„ // é”™è¯¯è¾“å‡ºå°†è¢«è¿½åŠ åˆ°æ–‡ä»¶ /tmp/error-output.txt echo stream_get_contents($pipes[1]); fclose($pipes[1]); // åˆ‡è®°ï¼šåœ¨è°ƒç”¨ proc_close ä¹‹å‰å…³é—­æ‰€æœ‰çš„ç®¡é“ä»¥é¿å…æ­»é”ã€‚ $return_value = proc_close($process); echo PHP_EOL.\"command returned $return_value\\n\";} æ·»åŠ phpè„šæœ¬çš„æ‰§è¡Œç”¨æˆ·sudoersä¸­ æ¯”å¦‚ä½ ä½¿ç”¨nginx+php-fpmçš„æœåŠ¡å™¨æ¶æ„ï¼Œä½ çš„php-fpmçš„ç”¨æˆ·æ˜¯www-data 12345visudo--------------------------------...#Defaults !visiblepw #æ³¨é‡Šæ‰è¿™å¥ è¿™å¥æ˜¯é™åˆ¶sudoåªèƒ½åœ¨å‘½ä»¤è¡Œæ‰§è¡Œçš„www-data ALL=(ALL:ALL) NOPASSWD: /usr/bin/git pushä»£ç åˆ°masteråˆ†æ”¯æµ‹è¯•ä¸‹å§~ ç™»é™†æœåŠ¡å™¨çœ‹çœ‹ä»£ç æ˜¯ä¸æ˜¯å·²ç»åŒæ­¥å¥½äº†","link":"/2018-05-01-git-webhook/"},{"title":"Composerå®˜æ–¹é•œåƒå¤ªæ…¢æˆ–è€…è¢«å¢™æ— æ³•ä½¿ç”¨æ—¶çš„å‡ ç§è§£å†³æ–¹æ¡ˆ","text":"Composerå®˜æ–¹é•œåƒå¤ªæ…¢æˆ–è€…è¢«å¢™æ— æ³•ä½¿ç”¨æ—¶çš„å‡ ç§è§£å†³æ–¹æ¡ˆ ä½¿ç”¨ä»£ç†è¢«å¢™ä½¿ç”¨å›½å¤–ä»£ç†ä¸Šç½‘ï¼Œæ€»æ˜¯ä¸€ç§è¡Œä¹‹æœ‰æ•ˆçš„æ–¹æ³•ã€‚åŠ å…¥ä½ ä½¿ç”¨shadowsocksä»£ç†ï¼Œå¼€å¯ä¹‹åé»˜è®¤çš„æœ¬åœ°ç«¯å£æ˜¯1080ã€‚åªè¦è®¾ç½®ä¸¤ä¸ªç¯å¢ƒå˜é‡http_proxyå’Œhttps_proxyå°±å¯ä»¥ä½¿ç”¨äº†ã€‚ Mac OS / Linux ç»ˆç«¯ 12export http_proxy=127.0.0.1:1080export https_proxy=127.0.0.1:1080 windows cmdå‘½ä»¤è¡Œ 12set http_proxy=127.0.0.1:1080set https_proxy=127.0.0.1:1080 è¿™æ ·å°±å¯ä»¥äº†ï¼Œæ„‰å¿«çš„ä¸‹è½½å„ç§åŒ…å§~ ä½¿ç”¨å›½å†…é•œåƒåœ°å€ cnpkgæä¾›çš„é•œåƒåœ°å€ï¼š https://php.cnpkg.org LaravelChinaç¤¾åŒºæä¾›çš„é•œåƒåœ°å€ï¼š https://packagist.laravel-china.org Composerä¸­æ–‡ç½‘æä¾›çš„é•œåƒåœ°å€ï¼š https://packagist.phpcomposer.com é•œåƒä½¿ç”¨æ–¹æ³•: å…¨å±€é…ç½®ï¼ˆæ¨èï¼‰: 1composer config -g repo.packagist composer https://php.cnpkg.org å•ç‹¬é¡¹ç›®ä½¿ç”¨ï¼š 1composer config repo.packagist composer https://php.cnpkg.org å–æ¶ˆé•œåƒï¼š 1composer config -g --unset repos.packagist â€”- æœ€åæ›´æ–°æ—¶é—´ï¼š 2019-03-18 15:09:53","link":"/2018-08-22-composer-mirrors/"},{"title":"ä½¿ç”¨Bingæœç´¢å¼•æ“åšç«™å†…æœç´¢","text":"å› ä¸ºè‡ªå·±çš„åšå®¢ç™¾åº¦æœªæ”¶å½•â•®(â•¯-â•°)â•­ï¼Œæœ¬æ¥ä¹‹å‰ç”¨çš„è°·æ­Œï¼Œä½†æ˜¯è°·æ­Œæ¯•ç«Ÿç¿»å¢™æ‰èƒ½ç”¨ã€‚å†³å®šè¿˜æ˜¯æ¢å¾®è½¯çš„Bingæœç´¢å¼•æ“æ¥åšç«™å†…æœç´¢å§ã€‚ å¤§æ¦‚æ˜¯è¿™æ ·çš„æ•ˆæœ è§‚å¯Ÿäº†ä¸‹ï¼ŒBingæŒ‡å®šç«™ç‚¹æœç´¢å¾ˆç®€å•ï¼Œæ¯”å¦‚æœç´¢æ¡†è¾“å…¥å…³é”®å­—git site:www.ioio.pwæäº¤ä¹‹åçš„urlæ˜¯https://bing.com/search?q=git+site%3Awww.ioio.pw æ‰€ä»¥å¼€å§‹å†™ä¸ªç®€å•çš„formè¡¨å•å°±å¥½äº†ï¼Œä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526&lt;!DOCTYPE html&gt;&lt;html lang=\"en\"&gt;&lt;head&gt; &lt;meta charset=\"UTF-8\"&gt; &lt;title&gt;bing search&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;h1&gt;Bing Search&lt;/h1&gt; &lt;form action=\"https://bing.com/search\" id=\"searchForm\"&gt; &lt;input type=\"text\" name=\"q\" value=\"\" required&gt; &lt;input type=\"hidden\" name=\"site\" value=\"www.ioio.pw\"&gt; &lt;input type=\"submit\" value=\"Search\"&gt; &lt;/form&gt;&lt;script&gt; var searchForm = document.getElementById('searchForm'); searchForm.onsubmit = function(){ var url = this.action; var q = this.children['q'].value; var site = this.children['site'].value; var url = url + '?q='+q+' site:'+ site; window.open(url); return false; };&lt;/script&gt;&lt;/body&gt;&lt;/html&gt; å¥½äº†ï¼Œæå®š~","link":"/2018-09-16-bing-site-search/"},{"title":"ç›—å°†è¡Œ(è½¬)","text":"é‡å²è®°è½½:å®‹å¾½å®—äºŒåå¹´ï¼ˆ1120å¹´ï¼‰ï¼Œæœé‡åŠ¨è¡ï¼Œè¾¹ç–†ä¸ç¨³ã€‚æ—¶æœ‰ç›—è€…ï¼Œå–å®˜æµæ°‘ï¼Œå‡¡äº¬ä¸­è´ªå®˜ï¼Œæ— ä¸€å¹¸å…ï¼Œæ°‘å’¸æ•¬ä¹‹ï¼Œå´æ— äººçŸ¥å…¶çœŸé¢ç›®ã€‚ç„¶è‡ªå¾½å®—äºŒåä¸‰å¹´ï¼Œæ­¤ç›—æœªæ›¾å‡ºç°ï¼Œè‡³å¾½å®—äºŒåå…­å¹´ï¼Œæ­¤ç›—å…¥å—äº¬ç‹åºœï¼Œæœªå–å®ƒç‰©ï¼Œä»…ç›—èµ°ä¸€ç‰ç°ªï¼Œè‡ªæ­¤åŒ¿è¿¹â€¦â€¦ é‡å²è®°è½½:å®‹é’¦å®—å…ƒå¹´ï¼ˆ1126å¹´ï¼‰ï¼Œé‡‘å†›å°†é¢†å®Œé¢œå…‹å›¾ç‡å†›æ”»é™·å®‹éƒ½æ±´æ¢ï¼Œé’¦å®—è¢«ä¿˜ï¼Œæ°‘ä¸èŠç”Ÿã€‚1127å¹´ï¼Œå®‹é«˜å®—èµµæ„å»ºç«‹å—å®‹æ”¿æƒï¼Œæ—¶å®‹å†›ä¸é‡‘å†›äº¤æˆ˜ï¼Œä¸€å°å’ä¸€ç®­å°„æ€å®Œé¢œå…‹å›¾ï¼Œè€Œåå±¡ç«‹æˆ˜åŠŸï¼Œå®˜è‡³æŠ¤å›½å°†å†›ï¼Œç­å¸ˆå›æœåï¼Œå®‹ä¸»æ¬²å¯¹å…¶å¤§è¡Œå°èµï¼Œç„¶å…¶è‡ªè¾å®˜èŒï¼Œè‡ªæ­¤åŒ¿è¿¹â€¦â€¦ å…¬å…ƒ1137å¹´ï¼Œä¸€ç¬‘è½©å†…ï¼Œåº§æ— è™šå¸­ï¼Œå¸­å‰åä¸€ä¸­å¹´ç”·å­ï¼Œç›¸è²Œéå‡¡ï¼Œæ–‡å¢¨ä¸­é¢‡æœ‰æ­¦å°†é£é‡‡ï¼Œæœ‰å¬è€…å¸­ä¸‹æš—å¹:æ­¤ç­‰äººé—´ç¢ç‰éƒï¼Œå¤©åº”ä¹ä¸ç‚¹é…¥å¨˜ï¼Œå¥ˆä½•å¤©å…¬ä¸ä½œç¾å•Šâ€¦â€¦ï¼Œåªè§ç”·å­æ‰‹æ‰§é†’æœ¨ä¸€æ•²ï¼Œâ€œä»Šæ—¥æˆ‘ç»™è¯¸ä½è®²è®²é‚£ä½æ¶ˆå¤±å¤§ç›—çš„æ•…äº‹ã€‚è¯¸ä½éƒ½çŸ¥é“è¿™å¤§ç›—åœ¨åå¤šå¹´å‰åŠ«å¯Œæµè´«ï¼Œç™¾å§“è§†ä¹‹ä¸ºç¥æ˜ï¼Œè¯¸ä½å¯çŸ¥ä¸ºä½•è¿™å¤§ç›—æ¶ˆå¤±å‡ å¹´åï¼Œåˆäºå—äº¬ç‹åºœç›—å–ä¸€æ”¯ç‰ç°ªæ­¤åä¾¿å†æ— æ¶ˆæ¯â€¦â€¦â€ â€œæ²¡é”™ï¼Œæˆ‘å°±æ˜¯è¯´ä¹¦äººï¼Œä¹Ÿæ˜¯å¤§ç›—ï¼Œäº¦æ˜¯æŠ¤å›½å°†å†›ï¼ŒäºŒåå²ä¹‹å‰ï¼Œæˆ‘ä»å¸ˆå‚…é‚£é‡Œä¹ å¾—æ­¦è‰ºï¼Œå­¦æˆåå› å–œè‡ªåœ¨ç”Ÿæ´»ï¼Œå´çœ‹ä¸æƒ¯è´ªå®˜æ±¡åï¼Œç”±æ­¤å¼€å§‹äº†åŠ«è´ªæµè´«çš„ç”Ÿæ´»ï¼Œæœ¬ä»¥ä¸ºè‡ªå·±ä¸€ç”Ÿéƒ½ä¼šè¿™æ ·ä¸€ä¸ªäººæ¸¡è¿‡ï¼Œæ¸…é£æ˜æœˆã€è½æ—¥ä½™éœï¼Œå´ä¸æ›¾æƒ³å¥¹èµ°è¿›äº†æˆ‘çš„ç”Ÿæ´»ï¼Œé‚£æ—¥ï¼Œåœ¨ç›—å–åº·ç‹åºœçå®å¤œæ˜ç åï¼Œä¸ºèº²é¿è¿½æ•ï¼Œæˆ‘çºµé©¬é€ƒå‡ºåŸå¤–ï¼Œå´å› å‹’é©¬ä¸åŠï¼Œæ— æ„ä¸­è½»å¾®å¸¦èµ·è·¯è¾¹ä¸€å¥³å­çš„è£™è¾¹ï¼Œçœ‹å®˜å…µå¹¶æœªè¿½æ¥ï¼Œæˆ‘ä¸‹é©¬å‘å¥³å­é“æ­‰ï¼Œå´ä¸æƒ³åªæ­¤ä¸€çœ¼ï¼Œä¾¿æ˜¯ä¸€ç”Ÿï¼Œè‡ªè®¤è¿™ä¸–é—´æ²¡æœ‰ç›—ä¸åˆ°çš„ä¸œè¥¿çš„æˆ‘ï¼Œå´å¼€å§‹æ‹…å¿ƒç›—ä¸åˆ°å¥¹çš„å¿ƒï¼Œç„¶è€Œè‡ªå·±çš„å¿ƒå´å·²è¢«å¥¹å¸¦èµ°ï¼Œå› ä¸ºè¿™ä¸€çœ¼ï¼Œæˆ‘å¿½ç„¶æƒ³ä¸å†ä¸ºç›—ï¼Œå¨¶å…¶ä¸ºå¦»ã€‚è€å¤©å¾…æˆ‘ä¸è–„ï¼Œæˆ‘ç›—å¾—äº†å¥¹çš„å¿ƒï¼Œç„¶åæˆ‘æ¸¡è¿‡äº†æ­¤ç”Ÿæœ€å¿«ä¹çš„ä¸‰å¹´ï¼Œæˆ‘é™ªå¥¹åƒå··å­é‡Œçš„é‚£å®¶æ±¤é¢ã€è°ˆç¬‘ä¸­çª—å¤–ç™½é›ªçº·é£ï¼Œä¸æƒœç”¨å¤œæ˜ç åšå¼¹ç å¼¹å±±é›€â€¦â€¦å…¬å…ƒ1126å¹´ï¼Œæˆ‘å†³å®šå¨¶å¥¹ï¼Œå¬é—»å—äº¬ç‹åºœä¸­æœ‰ä¸€ç‰ç°ªï¼Œå¾—ä¹‹èµ äºˆå¿ƒçˆ±ä¹‹äººï¼Œå¯ä¸å…¶ç”Ÿç”Ÿä¸–ä¸–æ°¸ä¸åˆ†ç¦»ï¼Œæˆ‘å†³å®šå°†å®ƒå·æ¥é€ç»™å¥¹ï¼Œå’Œå¥¹è¯´å¥½è¿‡äº›æ—¥å­æˆ‘å°±ä¼šå›æ¥è¿å¨¶å¥¹ï¼Œä¹‹åå°±è¸ä¸Šäº†å»å—äº¬çš„è·¯ï¼Œåœ¨æˆ‘ç›—å¾—ç‰ç°ªè¿”é€”ä¸­ï¼Œå¬é—»é‡‘å†›æ”»é™·æ±´æ¢ï¼Œä¸€è·¯çƒ§æ€æŠ¢æ ï¼Œæ°‘ä¸èŠç”Ÿï¼Œæˆ‘æ…Œå¼ çš„å›åˆ°æ±´æ¢ï¼Œè·¯ä¸Šä¸åœçš„å®‰æ…°è‡ªå·±å¥¹ä¸€å®šæ²¡äº‹ï¼Œå´ä¸å¾—ä¸æ¥å—å¥¹å·²è¿‡ä¸–çš„ç°å®ï¼Œå¯èƒ½è´¼å°±æ˜¯è´¼å§ï¼Œä¸è®ºæˆ‘æ˜¯å¦åŠ«å¯Œæµè´«ï¼ŒæŠ¥åº”ç»ˆç©¶è¿˜æ˜¯æ¥äº†ï¼Œæˆ‘å¤±å»äº†æœ€å¿ƒçˆ±çš„äººï¼Œè‡ªæ­¤æˆ‘å¼ƒç›—ä»å†›ï¼Œå¸¦ç€å¯¹å¥¹çš„ç•™æ‹ï¼Œå°†ä¸€è…”æ¨æ„å…¨éƒ¨æ”¾åœ¨äº†é‡‘å†›èº«ä¸Šï¼Œå°†å£«ä»¬éƒ½è¯´æˆ‘åœ¨æˆ˜åœºå‹‡çŒ›å¼‚å¸¸ï¼Œå´ä¸çŸ¥æˆ‘å¿ƒä¸­æ»¡æ˜¯ä¸ºå¥¹æŠ¥ä»‡çš„æ€’æ„ä¸æ²¡æœ‰ç•™åœ¨å¥¹èº«è¾¹çš„æ‚”æ„ã€‚æœ€ç»ˆé‡‘å†›è´¥é€€ï¼Œæˆ‘å°„æ€äº†å®Œé¢œå…‹å›¾ï¼Œä¹Ÿå› æ­¤è¢«å°ä¸ºæŠ¤å›½å¤§å°†å†›ï¼Œæœå ‚ä¹‹ä¸Šï¼Œæˆ‘æ¨å´äº†èµèµï¼Œè¾æ‰äº†å®˜èŒï¼Œæ¥åˆ°äº†é‚£ä¸ªæœ‰ç€å¥¹çˆ±åƒçš„æ±¤é¢çš„å··å­ï¼Œå¼€äº†è¿™ä¸€ç¬‘è½©ï¼Œæˆä¸ºäº†ä¸€ä¸ªè®²å°½æ•…äº‹ï¼Œå´èµ°ä¸å‡ºè‡ªå·±æ•…äº‹çš„è¯´ä¹¦äººã€‚â€ â€œâ€¦â€¦åœ¨å¤§å°†å†›è¾å®˜ä¹‹åï¼Œä¾¿æ— äººçŸ¥æ™“å…¶å»å¤„ï¼Œå¾’ç•™è¿™ä¹ˆä¸€ä¸ªæ•…äº‹ï¼Œæˆ‘å¶ç„¶é—»å¾—ï¼Œè®²ä¸è¯¸ä½å¬ã€‚ä»Šæ—¥å°±è®²åˆ°è¿™é‡Œï¼Œå¤šè°¢è¯¸ä½æ§åœºã€‚â€ä¸€å£°é†’æœ¨ï¼Œä¼—äººè¿˜æœªä»å¤§ç›—çš„æ•…äº‹ä¸­å›è¿‡ç¥æ¥ï¼Œå´å‘ç°è¯´ä¹¦äººå·²ç„¶è½¬è¿›åå ‚ï¼Œä¼—äººèµ·èº«å››æ•£ï¼Œè¯´ä¹¦äººè½¬è¿›åå ‚å·²æ˜¯æ³ªæµæ»¡é¢ï¼Œçœ‹ç€åå ‚é™¢ä¸­çš„æ‡æ·æ ‘ï¼Œæ ‘ä¸ŠæŒ‚ç€é‚£åªæœªé€å‡ºçš„ç‰ç°ªâ€¦â€¦ ä½œè€…ï¼šä¸€ä¸ªäººçš„å…µè’é¦¬ä¹±é“¾æ¥ï¼šhttps://www.jianshu.com/p/7aa6bfbb0df1ä¾†æºï¼šç®€ä¹¦","link":"/2018-09-18-%E7%9B%97%E5%B0%86%E8%A1%8C/"},{"title":"Dockerå®¹å™¨åŠ¨æ€æ·»åŠ ç«¯å£","text":"çªç„¶é‡åˆ°ä¸€ä¸ªé—®é¢˜æ€ä¹ˆç»™ä¸€ä¸ªå·²ç»åœ¨è¿è¡Œçš„dockerå®¹å™¨æ·»åŠ ç«¯å£ï¼Œæ‰¾äº†æ‰¾èµ„æ–™ï¼Œè®°ä¸ªç¬”è®°ã€‚ å‚è€ƒï¼š æ€ä¹ˆç»™è¿è¡Œä¸­çš„dockerå®¹å™¨æ·»åŠ æ–°çš„ç«¯å£ ä¿®æ”¹dockerå®¹å™¨ç«¯å£æ˜ å°„çš„æ–¹æ³• iptableè§„åˆ™æŸ¥çœ‹ï¼Œæ·»åŠ ï¼Œåˆ é™¤å’Œä¿®æ”¹ æ–¹æ³•1 ä¿®æ”¹iptablesç«¯å£æ˜ å°„ dockerçš„ç«¯å£æ˜ å°„å¹¶ä¸æ˜¯åœ¨dockeræŠ€æœ¯ä¸­å®ç°çš„ï¼Œè€Œæ˜¯é€šè¿‡å®¿ä¸»æœºçš„iptablesæ¥å®ç°ã€‚é€šè¿‡æ§åˆ¶ç½‘æ¡¥æ¥åšç«¯å£æ˜ å°„ï¼Œç±»ä¼¼è·¯ç”±å™¨ä¸­è®¾ç½®è·¯ç”±ç«¯å£æ˜ å°„ã€‚ æ¯”å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ªå®¹å™¨çš„80ç«¯å£æ˜ å°„åˆ°ä¸»æœºçš„8080ç«¯å£ï¼Œå…ˆæŸ¥çœ‹iptablesåˆ°åº•è®¾ç½®äº†ä»€ä¹ˆè§„åˆ™ï¼š 1sudo iptables -t nat -vnL åœ¨ç»“æœä¸­æœ‰ä¸€æ¡ï¼š 1234Chain DOCKERtarget prot opt source destinationRETURN all -- 0.0.0.0/0 0.0.0.0/0DNAT tcp -- 0.0.0.0/0 0.0.0.0/0 tcp dpt:8080 to:172.17.0.3:80 æˆ‘ä»¬å¯ä»¥çœ‹åˆ°dockeråˆ›å»ºäº†ä¸€ä¸ªåä¸ºDOKCERçš„è‡ªå®šä¹‰çš„é“¾æ¡Chainã€‚è€Œæˆ‘å¼€æ”¾80ç«¯å£çš„å®¹å™¨çš„ipæ˜¯172.17.0.3 ä¹Ÿå¯ä»¥é€šè¿‡inspectå‘½ä»¤æŸ¥çœ‹å®¹å™¨ip 1docker inspect containerId |grep IPAddress æˆ‘ä»¬æƒ³å†å¢åŠ ä¸€ä¸ªç«¯å£æ˜ å°„ï¼Œæ¯”å¦‚8081-&gt;81ï¼Œå°±åœ¨è¿™ä¸ªé“¾æ¡æ˜¯å†åŠ ä¸€æ¡è§„åˆ™ï¼š 1sudo iptables -t nat -A DOCKER -p tcp --dport 8081 -j DNAT --to-destination 172.17.0.3:81 å¦‚æœåŠ é”™äº†æˆ–è€…æƒ³ä¿®æ”¹ï¼š å…ˆæ˜¾ç¤ºè¡Œå·æŸ¥çœ‹ 1sudo iptables -t nat -vnL DOCKER --line-number åˆ é™¤è§„åˆ™3 1sudo iptables -t nat -D DOCKER 3 æ–¹æ³•2 ä¿®æ”¹å®¹å™¨é…ç½®æ–‡ä»¶å®¹å™¨çš„é…ç½®æ–‡ä»¶/var/lib/docker/containers/[containerId]ç›®å½•ä¸‹ï¼Œhostconfig.jsonå’Œconfig.v2.jsonä¿®æ”¹å¥½ä¹‹åï¼Œé‡å¯å®¹å™¨æœåŠ¡ã€‚ æ–¹æ³•3 æŠŠè¿è¡Œä¸­çš„å®¹å™¨ç”Ÿæˆæ–°çš„é•œåƒï¼Œç„¶åè¿è¡Œæ–°çš„é•œåƒ æäº¤ä¸€ä¸ªè¿è¡Œä¸­çš„å®¹å™¨ä¸ºé•œåƒ 1docker commit containerid heropoo/example è¿è¡Œheropoo/exampleé•œåƒå¹¶æ·»åŠ 8080æ˜ å°„å®¹å™¨80ç«¯å£ 1docker run -d -p 8000:80 heropoo/example /bin/sh è¯•è¯•å§~ğŸ˜","link":"/2018-09-16-docker-container-port/"},{"title":"å…³äºYii2æŸ¥è¯¢æ•°æ®å¯¹è±¡ActiveRecordçš„jsonåºåˆ—åŒ–é—®é¢˜","text":"ä»Šå¤©åœ¨ä½¿ç”¨json_encodeå‡½æ•°åºåˆ—åŒ–Yii2æŸ¥è¯¢å¾—åˆ°çš„æ•°æ®æ¨¡å‹å¯¹è±¡ï¼ˆé€šå¸¸ç»§æ‰¿ActiveRecordç±»ï¼‰æ—¶ï¼Œå‘ç°è¿”å›ç»“æœæ˜¯{},è€Œä¸æ˜¯é¢„æœŸçš„æ•°æ®åº“å­—æ®µé”®å€¼å¯¹è¿™ç§å½¢å¼ï¼š{&quot;name&quot;ï¼š &quot;xxx&quot;, &quot;sex&quot;: 1} åæ¥èµ¶æ—¶é—´å°±ç›´æ¥åœ¨æ‰‹åŠ¨å¤„ç†äº†ä¸‹ï¼Œæ”¹åŠ¨äº†ä¸‹æ¨¡å‹å¯¹è±¡è®©å®ƒæ¥å…¥JsonSerializableæ¥å£ï¼Œå¹¶å®ç°å…¶æ¥å£æ–¹æ³•ï¼Œç±»ä¼¼è¿™æ ·ï¼› 12345678910//...class User extends ActiveRecord implements \\JsonSerializable{ //... å…¶ä»–ä»£ç  public function jsonSerialize (){ return $this-&gt;toArray(); }} ç„¶åå®Œç¾çš„è§£å†³äº†ã€‚ ä½†æ˜¯åæ¥ä»£ç å†™å®Œäº†ï¼Œè§‰å¾—è¿™ä¸ªæ¡†æ¶åº”è¯¥æä¾›äº†è¿™ä¸ªé—®é¢˜çš„è§£å†³æ–¹æ³•äº†å§ã€‚ç„¶åæ‰¾äº†æ‰¾ï¼Œæœç„¶æœ‰çš„ï¼š \\yii\\helpers\\BaseJson::encode($user)ã€‚ç„¶åç¿»äº†ç¿»æºä»£ç ï¼Œéƒ¨åˆ†ä»£ç æ˜¯è¿™æ ·çš„ï¼š 12345678910111213141516171819202122232425//from \\yii\\helpers\\BaseJson::processDataif (is_object($data)) { if ($data instanceof JsExpression) { $token = \"!{[$expPrefix=\" . count($expressions) . ']}!'; $expressions['\"' . $token . '\"'] = $data-&gt;expression; return $token; } elseif ($data instanceof \\JsonSerializable) { $data = $data-&gt;jsonSerialize(); } elseif ($data instanceof Arrayable) { // &lt;---here $data = $data-&gt;toArray(); } elseif ($data instanceof \\SimpleXMLElement) { $data = (array) $data; } else { $result = []; foreach ($data as $name =&gt; $value) { $result[$name] = $value; } $data = $result; } if ($data === []) { return new \\stdClass(); }} ä½œè€…åœ¨å¤„ç†æ•°æ®çš„æ—¶å€™åšäº†åˆ¤æ–­ï¼ŒActiveRecordç±»æ¥äº†Arrayableæ¥å£ï¼Œç„¶åä½œè€…ä¹Ÿæ˜¯ä½¿ç”¨toArray()æ–¹æ³•ã€‚ç„¶åæˆ‘è§‰å¾—æ”¾å¿ƒäº†ã€‚æˆ‘çš„æ”¹é€ ä¹Ÿæ²¡æœ‰é”™ã€‚å½“ç„¶äº†ä½¿ç”¨æ¡†æ¶æä¾›çš„æ–¹æ³•æ›´ç®€å•ç‚¹ã€‚","link":"/2018-10-16-yii2-activerecord-to-json/"},{"title":"å®‰è£…Jupyterç¬”è®°æœ¬","text":"å®‰è£…Jupyterç¬”è®°æœ¬ï¼Œåšä¸ªç¬”è®° é€šè¿‡pipå®‰è£… 1sudo pip3 install jupyter åˆ›å»ºJupyteré»˜è®¤é…ç½®æ–‡ä»¶ 1jupyter notebook --generate-config ç”ŸæˆSHA1åŠ å¯†çš„å¯†é’¥ï¼Œå¦‚â€™sha1:XXXXXXâ€™ 1234ipython--------------------------------------from notebook.auth import passwdpasswd() ä¿®æ”¹é…ç½®æ–‡ä»¶ 123vim .jupyter/jupyter_notebook_config.py--------------------------------------c.NotebookApp.password = u'sha1:XXXXXX' è¿è¡Œjupyter 1jupyter notebook å¯é€‰çš„è¿è¡Œå‚æ•° 1jupyter notebook --ip=0.0.0.0 --no-browser --allow-root æ‰“å¼€æµè§ˆå™¨è¾“å…¥ http://localhost:8888","link":"/2018-11-02-jupyter/"},{"title":"ä¿®å¤gitmentè¯„è®º","text":"æœ€è¿‘å‡ ä¸ªæœˆåšå®¢å¤–æŒ‚çš„gitmentè¯„è®ºè€æ˜¯æŒ‚ï¼Œä¹Ÿä¸€ç›´æ²¡æ—¶é—´ä¿®å¤ã€‚è¿™å‡ å¤©æƒ³åŠæ³•ä¿®å¥½äº†ã€‚å°±è¯´è¯´ä¿®å¤çš„è¿‡ç¨‹å§ã€‚ ä»æˆ‘å¼€å§‹ç”¨gitmentçš„è¯„è®ºç³»ç»Ÿï¼Œæ€»å…±å‡ºç°è¿‡ä¸¤æ¬¡é—®é¢˜ï¼š 1. github-issue labelçš„å­—ç¬¦é•¿åº¦é™åˆ¶è¿™æ¬¡å¯¼è‡´åŸæœ¬é»˜è®¤ä½¿ç”¨ç½‘é¡µurlåœ°å€åšlabelåˆå§‹åŒ–è¯„è®ºçš„æ–¹å¼æ— æ³•ä½¿ç”¨ï¼Œurlå¤ªé•¿äº†è¶…è¿‡äº†50ä¸ªå­—ç¬¦ã€‚è€Œä¹‹å‰å·²ç»åˆå§‹åŒ–å¥½çš„è¯„è®ºï¼ˆissueï¼‰ä¸æ”¶å½±å“ã€‚æ‰€ä»¥åæ¥æˆ‘æƒ³äº†ä¸ªåŠæ³•æ¥æ”¹ï¼Œå°±æ˜¯ç”¨æ—¶é—´æ¥åˆå§‹åŒ–ï¼Œå¹¶ä¸”å¯¹äºä¸ºäº†å…¼å®¹ä¹‹å‰çš„è¯„è®ºï¼ŒåŠ äº†æ—¶é—´åˆ¤æ–­ï¼š 123456789101112131415var page_date = '{{ page.date }}';var id = window.location.href;if(page_date &gt; '2018-04-31 00:00:00 +0000'){ id = page_date;}var gitment = new Gitment({ id: id, // å¯é€‰ã€‚é»˜è®¤ä¸º location.href owner: 'heropoo', repo: 'heropoo.github.io', oauth: { client_id: 'cccc', client_secret: 'xxxx', },});gitment.render('container'); 2. gitment ä½œè€…æä¾›çš„oauthæˆæƒæœåŠ¡ä¸å¯ç”¨è¿™æ¬¡å¥½åƒæŒ‚äº†ä½¿ç”¨ä½œè€…æä¾›çš„jsçš„åšå®¢å…¨æŒ‚äº†ğŸ˜‚ã€‚ è§£å†³åŠæ³•å°±æ˜¯è‡ªå·±æ­å»ºæˆ–è€…ä½¿ç”¨åˆ«äººæ­å»ºçš„oauthæˆæƒæœåŠ¡äº†ã€‚ å¥½å§ï¼Œæ¢ä¸ªæˆæƒæœåŠ¡æ€»ç®—å¥½äº†ã€‚ 3. å‡çº§httpsç°åœ¨github-pageæä¾›å¼ºåˆ¶httpsã€‚å‡çº§ä¹‹åå‘ç°ä¹‹å‰å…¼å®¹çš„ä½¿ç”¨é¡µé¢urlåˆå§‹åŒ–çš„è¯„è®ºåˆä¸èƒ½ç”¨äº†ã€‚ ã„Ÿ( â–”, â–” )ã„ä½†æ˜¯è¿˜å¾—ä¿®å˜›ã€‚åæ¥ä»”ç»†è§‚å¯Ÿäº†ä¸‹ï¼ŒåŸæ¥ä½œè€…æ˜¯ä½¿ç”¨gitmentå’Œé¡µé¢jsä¸­è·å–çš„idæ¥åŒ¹é…å‡ºä¸€ä¸ªissueçš„ã€‚æ‰€ä»¥åªè¦å»githubä¿®æ”¹issue labelå°±å¯ä»¥äº†ã€‚æŠŠåŸæ¥å¾ˆé•¿çš„url labelæ”¹æˆç°åœ¨çš„çŸ­çš„ï¼Œæ¯”å¦‚åƒæˆ‘ä¸€æ ·ç”¨æ—¶é—´ã€‚ç„¶åé¡µé¢ä¸Šçš„å…¼å®¹çš„jsä¹Ÿå»æ‰å°±æå®šäº†ã€‚ 123456789101112131415var page_date = '{{ page.date }}';//var id = window.location.href;//if(page_date &gt; '2018-04-31 00:00:00 +0000'){var id = page_date;//}var gitment = new Gitment({ id: id, // å¯é€‰ã€‚é»˜è®¤ä¸º location.href owner: 'heropoo', repo: 'heropoo.github.io', oauth: { client_id: 'cccc', client_secret: 'xxxx', },});gitment.render('container'); å¥½äº†ï¼Œæå®Œæ”¶å·¥ã€‚","link":"/2018-10-27-fix-gitment/"},{"title":"ä»SSHç§é’¥ä¸­é‡æ–°ç”Ÿæˆå…¬é’¥","text":"ä»SSHç§é’¥ä¸­é‡æ–°ç”Ÿæˆå…¬é’¥ å‡å¦‚æˆ‘ä»¬çš„ç§é’¥æ˜¯id_rsa 12ssh-keygen -y -f id_rsassh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDdqNYfRhP/4Y1Kwr5/ZfRPbQkDEKQ9sLpGYex2bzXsPIXZmpgI4yUkLkQRCyvrMoZQKOcabb+GgnrYJvPR1rO/CVI9bfUw+MD1OFvnJUI2deATTeMj2hlY/IDSS1q3AG1ZEztFLizTiJqZvkjx/WPXR/b7ZIVV5DRIeaUMCfEjNIRD+spcJ5ALBuwGPO+4irAXIxgTxbYMDD2ASnpr6v7oSzc0N5ZhZ7rV1dk6hA/RowqYO7DwIvZtOAc55sv6pSUYG3RUJhnkzcmE5VTbyTMKB6O738np6DEw5soWdL1ITPgLE+uJcTt8tcOmPkBXv+45A4TuJ5ksONil8xhfVYG3 å¯ä»¥ç›´æ¥é‡å®šå‘åˆ°æ–‡ä»¶ 1ssh-keygen -y -f id_rsa &gt; id_rsa.pub","link":"/2018-11-19-get-ssh-public-key-from-private-key/"},{"title":"MySQL5.7çš„JSONåŸºæœ¬æ“ä½œ","text":"MySQLä»5.7ç‰ˆæœ¬å¼€å§‹å°±æ”¯æŒJSONæ ¼å¼çš„æ•°æ®ï¼Œæ“ä½œç”¨èµ·æ¥æŒºæ–¹ä¾¿çš„ã€‚ å»ºè¡¨åœ¨æ–°å»ºè¡¨æ—¶å­—æ®µç±»å‹å¯ä»¥ç›´æ¥è®¾ç½®ä¸ºjsonç±»å‹ï¼Œæ¯”å¦‚æˆ‘ä»¬åˆ›å»ºä¸€å¼ è¡¨ï¼š 1mysql&gt; CREATE TABLE `test_user`(`id` INT PRIMARY KEY AUTO_INCREMENT, `name` VARCHAR(50) NOT NULL, `info` JSON); jsonç±»å‹å­—æ®µå¯ä»¥ä¸ºNULL æ’å…¥æ•°æ®ï¼š1mysql&gt; INSERT INTO test_user(`name`, `info`) VALUES(&apos;xiaoming&apos;,&apos;{&quot;sex&quot;: 1, &quot;age&quot;: 18, &quot;nick_name&quot;: &quot;å°èŒ&quot;}&apos;); jsonç±»å‹çš„å­—æ®µå¿…é¡»æ—¶ä¸€ä¸ªæœ‰æ•ˆçš„jsonå­—ç¬¦ä¸² å¯ä»¥ä½¿ç”¨JSON_OBJECT()å‡½æ•°æ„é€ jsonå¯¹è±¡ï¼š 1mysql&gt; INSERT INTO test_user(`name`, `info`) VALUES(&apos;xiaohua&apos;, JSON_OBJECT(&quot;sex&quot;, 0, &quot;age&quot;, 17)); ä½¿ç”¨JSON_ARRAY()å‡½æ•°æ„é€ jsonæ•°ç»„ï¼š 1mysql&gt; INSERT INTO test_user(`name`, `info`) VALUES(&apos;xiaozhang&apos;, JSON_OBJECT(&quot;sex&quot;, 1, &quot;age&quot;, 19, &quot;tag&quot;, JSON_ARRAY(3,5,90))); ç°åœ¨æŸ¥çœ‹test_userè¡¨ä¸­çš„æ•°æ®ï¼š 123456789mysql&gt; select * from test_user;+----+-----------+--------------------------------------------+| id | name | info |+----+-----------+--------------------------------------------+| 1 | xiaoming | {&quot;age&quot;: 18, &quot;sex&quot;: 1, &quot;nick_name&quot;: &quot;å°èŒ&quot;} || 2 | xiaohua | {&quot;age&quot;: 17, &quot;sex&quot;: 0} || 3 | xiaozhang | {&quot;age&quot;: 19, &quot;sex&quot;: 1, &quot;tag&quot;: [3, 5, 90]} |+----+-----------+--------------------------------------------+3 rows in set (0.04 sec) æŸ¥è¯¢è¡¨è¾¾å¼ï¼š å¯¹è±¡ä¸ºjsonåˆ—-&gt;'$.é”®', æ•°ç»„ä¸ºjsonåˆ—-&gt;'$.é”®[index]' 123456789mysql&gt; select name, info-&gt;&apos;$.nick_name&apos;, info-&gt;&apos;$.sex&apos;, info-&gt;&apos;$.tag[0]&apos; from test_user;+-----------+---------------------+---------------+------------------+| name | info-&gt;&apos;$.nick_name&apos; | info-&gt;&apos;$.sex&apos; | info-&gt;&apos;$.tag[0]&apos; |+-----------+---------------------+---------------+------------------+| xiaoming | &quot;å°èŒ&quot; | 1 | NULL || xiaohua | NULL | 0 | NULL || xiaozhang | NULL | 1 | 3 |+-----------+---------------------+---------------+------------------+3 rows in set (0.04 sec) ç­‰ä»·äºï¼šå¯¹è±¡ä¸ºJSON_EXTRACT(jsonåˆ— , '$.é”®')ï¼Œæ•°ç»„ä¸ºJSON_EXTRACT(jsonåˆ— , '$.é”®[index]') 123456789mysql&gt; select name, JSON_EXTRACT(info, &apos;$.nick_name&apos;), JSON_EXTRACT(info, &apos;$.sex&apos;), JSON_EXTRACT(info, &apos;$.tag[0]&apos;) from test_user;+-----------+-----------------------------------+-----------------------------+--------------------------------+| name | JSON_EXTRACT(info, &apos;$.nick_name&apos;) | JSON_EXTRACT(info, &apos;$.sex&apos;) | JSON_EXTRACT(info, &apos;$.tag[0]&apos;) |+-----------+-----------------------------------+-----------------------------+--------------------------------+| xiaoming | &quot;å°èŒ&quot; | 1 | NULL || xiaohua | NULL | 0 | NULL || xiaozhang | NULL | 1 | 3 |+-----------+-----------------------------------+-----------------------------+--------------------------------+3 rows in set (0.04 sec) ä¸è¿‡çœ‹åˆ°ä¸Šé¢&quot;å°èŒ&quot;æ˜¯å¸¦åŒå¼•å·çš„ï¼Œè¿™ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼Œå¯ä»¥ç”¨JSON_UNQUOTEå‡½æ•°å°†åŒå¼•å·å»æ‰ 1234567mysql&gt; select name, JSON_UNQUOTE(info-&gt;&apos;$.nick_name&apos;) from test_user where name=&apos;xiaoming&apos;;+----------+-----------------------------------+| name | JSON_UNQUOTE(info-&gt;&apos;$.nick_name&apos;) |+----------+-----------------------------------+| xiaoming | å°èŒ |+----------+-----------------------------------+1 row in set (0.05 sec) ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨æ“ä½œç¬¦-&gt;&gt; 1234567mysql&gt; select name, info-&gt;&gt;&apos;$.nick_name&apos; from test_user where name=&apos;xiaoming&apos;;+----------+----------------------+| name | info-&gt;&gt;&apos;$.nick_name&apos; |+----------+----------------------+| xiaoming | å°èŒ |+----------+----------------------+1 row in set (0.06 sec) å½“ç„¶å±æ€§ä¹Ÿå¯ä»¥ä½œä¸ºæŸ¥è¯¢æ¡ä»¶ 1234567mysql&gt; select name, info-&gt;&gt;&apos;$.nick_name&apos; from test_user where info-&gt;&apos;$.nick_name&apos;=&apos;å°èŒ&apos;;+----------+----------------------+| name | info-&gt;&gt;&apos;$.nick_name&apos; |+----------+----------------------+| xiaoming | å°èŒ |+----------+----------------------+1 row in set (0.05 sec) å€¼å¾—ä¸€æçš„æ˜¯ï¼Œå¯ä»¥é€šè¿‡è™šæ‹Ÿåˆ—å¯¹JSONç±»å‹çš„æŒ‡å®šå±æ€§è¿›è¡Œå¿«é€ŸæŸ¥è¯¢ã€‚ åˆ›å»ºè™šæ‹Ÿåˆ—: 1mysql&gt; ALTER TABLE `test_user` ADD `nick_name` VARCHAR(50) GENERATED ALWAYS AS (info-&gt;&gt;&apos;$.nick_name&apos;) VIRTUAL; æ³¨æ„ç”¨æ“ä½œç¬¦-&gt;&gt; ä½¿ç”¨æ—¶å’Œæ™®é€šç±»å‹çš„åˆ—æŸ¥è¯¢æ˜¯ä¸€æ ·: 1234567mysql&gt; select name,nick_name from test_user where nick_name=&apos;å°èŒ&apos;;+----------+-----------+| name | nick_name |+----------+-----------+| xiaoming | å°èŒ |+----------+-----------+1 row in set (0.05 sec) æ›´æ–°ä½¿ç”¨JSON_INSERT()æ’å…¥æ–°å€¼ï¼Œä½†ä¸ä¼šè¦†ç›–å·²ç»å­˜åœ¨çš„å€¼ 1mysql&gt; UPDATE test_user SET info = JSON_INSERT(info, &apos;$.sex&apos;, 1, &apos;$.nick_name&apos;, &apos;å°èŠ±&apos;) where id=2; çœ‹ä¸‹ç»“æœ 1234567mysql&gt; select * from test_user where id=2;+----+---------+--------------------------------------------+-----------+| id | name | info | nick_name |+----+---------+--------------------------------------------+-----------+| 2 | xiaohua | {&quot;age&quot;: 17, &quot;sex&quot;: 0, &quot;nick_name&quot;: &quot;å°èŠ±&quot;} | å°èŠ± |+----+---------+--------------------------------------------+-----------+1 row in set (0.06 sec) ä½¿ç”¨JSON_SET()æ’å…¥æ–°å€¼ï¼Œå¹¶è¦†ç›–å·²ç»å­˜åœ¨çš„å€¼ 1mysql&gt; UPDATE test_user SET info = JSON_SET(info, &apos;$.sex&apos;, 0, &apos;$.nick_name&apos;, &apos;å°å¼ &apos;) where id=3; çœ‹ä¸‹ç»“æœ 1234567mysql&gt; select * from test_user where id=3;+----+-----------+---------------------------------------------------------------+-----------+| id | name | info | nick_name |+----+-----------+---------------------------------------------------------------+-----------+| 3 | xiaozhang | {&quot;age&quot;: 19, &quot;sex&quot;: 1, &quot;tag&quot;: [3, 5, 90], &quot;nick_name&quot;: &quot;å°å¼ &quot;} | å°å¼  |+----+-----------+---------------------------------------------------------------+-----------+1 row in set (0.06 sec) ä½¿ç”¨JSON_REPLACE()åªæ›¿æ¢å­˜åœ¨çš„å€¼ 1mysql&gt; UPDATE test_user SET info = JSON_REPLACE(info, &apos;$.sex&apos;, 1, &apos;$.tag&apos;, &apos;[1,2,3]&apos;) where id=2; çœ‹ä¸‹ç»“æœ 1234567mysql&gt; select * from test_user where id=2;+----+---------+--------------------------------------------+-----------+| id | name | info | nick_name |+----+---------+--------------------------------------------+-----------+| 2 | xiaohua | {&quot;age&quot;: 17, &quot;sex&quot;: 1, &quot;nick_name&quot;: &quot;å°èŠ±&quot;} | å°èŠ± |+----+---------+--------------------------------------------+-----------+1 row in set (0.06 sec) å¯ä»¥çœ‹åˆ°tagæ²¡æœ‰æ›´æ–°è¿›å» åˆ é™¤ä½¿ç”¨JSON_REMOVE()åˆ é™¤JSONå…ƒç´  1mysql&gt; UPDATE test_user SET info = JSON_REMOVE(info, &apos;$.sex&apos;, &apos;$.tag&apos;) where id=1; çœ‹ä¸‹ç»“æœ 1234567mysql&gt; select * from test_user where id=1;+----+----------+----------------------------------+-----------+| id | name | info | nick_name |+----+----------+----------------------------------+-----------+| 1 | xiaoming | {&quot;age&quot;: 18, &quot;nick_name&quot;: &quot;å°èŒ&quot;} | å°èŒ |+----+----------+----------------------------------+-----------+1 row in set (0.05 sec) æœ€åä»MySQLçš„å®˜æ–¹ç½‘ç«™æŸ¥çœ‹å¸®åŠ©æ–‡æ¡£ï¼šhttp://dev.mysql.com/doc/refman/5.7/en/json.html ğŸ˜","link":"/2018-11-18-mysql-json/"},{"title":"å…³äºPHP Composer ç‰ˆæœ¬å·å‰ç½®~ä¸^ç¬¦å·çš„åŒºåˆ«(è½¬)","text":"~å’Œ^çš„æ„æ€å¾ˆæ¥è¿‘ï¼Œåœ¨x.yçš„æƒ…å†µä¸‹æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯ä»£è¡¨x.y &lt;= ç‰ˆæœ¬å· &lt; (x+1).0ã€‚ä½†æ˜¯åœ¨ç‰ˆæœ¬å·æ˜¯x.y.zçš„æƒ…å†µä¸‹æœ‰åŒºåˆ«ï¼Œä¸¾ä¸ªä¾‹å­ï¼š ~1.2.3 ä»£è¡¨ 1.2.3 &lt;= ç‰ˆæœ¬å· &lt; 1.3.0 ^1.2.3 ä»£è¡¨ 1.2.3 &lt;= ç‰ˆæœ¬å· &lt; 2.0.0 åŸæ–‡é“¾æ¥ï¼š https://www.cnblogs.com/hcpzhe/p/7909651.html","link":"/2018-12-29-php-composer-version/"},{"title":"PHPå¤šè¿›ç¨‹ä¹‹pcntlæ‰©å±•çš„ä½¿ç”¨","text":"PHPå®ç°å¤šè¿›ç¨‹çš„æ¨¡å—æ˜¯pcntlï¼Œè€Œä¸”åªæœ‰åœ¨linuxä¸‹æ‰ä½¿ç”¨è¿™ä¸ªæ‹“å±•ï¼Œä¸è¿‡ç°åœ¨æœåŠ¡å™¨éƒ½åŸºæœ¬ä½¿ç”¨linuxï¼Œæˆ‘ä»¬è¿˜æ˜¯å¯ä»¥ç”¨èµ·æ¥çš„ã€‚ å®‰è£…å¯ä»¥ç›´æ¥ä½¿ç”¨pecl install pcntlï¼Œæˆ–è€…å»https://pecl.php.net/ä¸‹è½½æºç åŒ…æ‰‹åŠ¨ç¼–è¯‘å®‰è£…ã€‚ ä½¿ç”¨å…ˆä¸¾ä¸ªå®˜æ–¹çš„æ —å­ï¼š 12345678910111213&lt;?php$pid = pcntl_fork();//çˆ¶è¿›ç¨‹å’Œå­è¿›ç¨‹éƒ½ä¼šæ‰§è¡Œä¸‹é¢ä»£ç if ($pid == -1) { //é”™è¯¯å¤„ç†ï¼šåˆ›å»ºå­è¿›ç¨‹å¤±è´¥æ—¶è¿”å›-1. die('could not fork');} else if ($pid) { //çˆ¶è¿›ç¨‹ä¼šå¾—åˆ°å­è¿›ç¨‹å·ï¼Œæ‰€ä»¥è¿™é‡Œæ˜¯çˆ¶è¿›ç¨‹æ‰§è¡Œçš„é€»è¾‘ pcntl_wait($status); //ç­‰å¾…å­è¿›ç¨‹ä¸­æ–­ï¼Œé˜²æ­¢å­è¿›ç¨‹æˆä¸ºåƒµå°¸è¿›ç¨‹ã€‚} else { //å­è¿›ç¨‹å¾—åˆ°çš„$pidä¸º0, æ‰€ä»¥è¿™é‡Œæ˜¯å­è¿›ç¨‹æ‰§è¡Œçš„é€»è¾‘ã€‚} ä½¿ç”¨åˆ°çš„å‡½æ•°: pcntl_forkåœ¨å½“å‰è¿›ç¨‹å½“å‰ä½ç½®äº§ç”Ÿåˆ†æ”¯ï¼ˆå­è¿›ç¨‹ï¼‰ã€‚forkæ˜¯åˆ›å»ºäº†ä¸€ä¸ªå­è¿›ç¨‹ï¼Œçˆ¶è¿›ç¨‹å’Œå­è¿›ç¨‹ éƒ½ä»forkçš„ä½ç½®å¼€å§‹å‘ä¸‹ç»§ç»­æ‰§è¡Œï¼Œä¸åŒçš„æ˜¯çˆ¶è¿›ç¨‹æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå¾—åˆ°çš„forkè¿”å›å€¼ä¸ºå­è¿›ç¨‹ å·ï¼Œè€Œå­è¿›ç¨‹å¾—åˆ°çš„æ˜¯0ã€‚ pcntl_wait ç­‰å¾…æˆ–è¿”å›forkçš„å­è¿›ç¨‹çŠ¶æ€ã€‚è¿™ä¸ªå‡½æ•°ä¼šæŒ‚èµ·å½“å‰è¿›ç¨‹çš„æ‰§è¡Œç›´åˆ°ä¸€ä¸ªå­è¿›ç¨‹é€€å‡ºæˆ–æ¥æ”¶åˆ°ä¸€ä¸ªä¿¡å·è¦æ±‚ä¸­æ–­å½“å‰è¿›ç¨‹æˆ–è°ƒç”¨ä¸€ä¸ªä¿¡å·å¤„ç†å‡½æ•°ã€‚å¦‚æœä¸€ä¸ªå­è¿›ç¨‹åœ¨è°ƒç”¨æ­¤å‡½æ•°æ—¶å·²ç»é€€å‡ºï¼ˆä¿—ç§°åƒµå°¸è¿›ç¨‹ï¼‰ï¼Œæ­¤å‡½æ•°ç«‹åˆ»è¿”å›ã€‚å­è¿›ç¨‹ä½¿ç”¨çš„æ‰€æœ‰ç³»ç»Ÿèµ„æºå°†è¢«é‡Šæ”¾ã€‚ å†æ¥ä¸ªç»å…¸æ —å­ï¼š 12345678910111213141516171819202122232425262728293031&lt;?php$children = []; //å®šä¹‰ä¸€ä¸ªæ•°ç»„ç”¨æ¥å­˜å‚¨å­è¿›ç¨‹çš„pid$m = 10; //fork 10æ¬¡for ($x = 0; $x &lt; $m; $x++) { $pid = pcntl_fork(); if ($pid == -1) { die('could not fork '.$x); } else if ($pid) { //çˆ¶è¿›ç¨‹æ‰§è¡Œçš„ä»£ç å— $children[] = $pid; printf(\"Parent get child %d 's pid: %d\\n\", $x, $pid); } else { //å­è¿›ç¨‹æ‰§è¡Œçš„ä»£ç å— $my_pid = posix_getpid(); //å­è¿›ç¨‹è·å–è‡ªå·±çš„pid //å­è¿›ç¨‹å¾—åˆ°çš„$pidä¸º0, æ‰€ä»¥è¿™é‡Œæ˜¯å­è¿›ç¨‹æ‰§è¡Œçš„é€»è¾‘ã€‚ echo \"Child $my_pid running...\\n\"; sleep(10); //å­è¿›ç¨‹å¹²ç‚¹å•¥ è¿™é‡Œæ˜¯ç¡10ç§’ echo \"...Child $my_pid done\\n\"; exit(0); //å­è¿›ç¨‹æ‰§è¡Œç»“æŸexit }}while(count($children) &gt; 0) { foreach($children as $key =&gt; $pid) { $res = pcntl_waitpid($pid, $status, WNOHANG); //è·å–è¿”å›æŒ‡å®špidçš„è¿”å›çŠ¶æ€åŠ äº†ç¬¬äºŒä¸ªå‚æ•°éé˜»å¡ if($res == -1 || $res &gt; 0){ echo \"Parent get child $pid 's status: $status\\n\"; unset($children[$key]); } } sleep(1); //æ¯ä¸€ç§’å»è½®è¯¢æ²¡æœ‰é€€å‡ºçš„å­è¿›ç¨‹çŠ¶æ€} â€”- æœ€åæ›´æ–°äº 2019-03-27 19:04:55","link":"/2019-01-02-php-pcntl/"},{"title":"å®¹å™¨çš„å® å„¿AlpineLinuxçš„åŸºæœ¬ä½¿ç”¨","text":"ç°åœ¨dockerçš„å®¹å™¨æŠ€æœ¯å¾ˆæµè¡Œï¼Œå¯¹äºæˆ‘ä»¬è¿™ç§æ•´å¤©è¢«å„ç§ä¸‡æ¶çš„å¼€å‘ç¯å¢ƒå‘çš„å¼€å‘æ¥è¯´æ˜¯ä¸ªè§£æ”¾ã€‚ä½†æ˜¯å½“æˆ‘ä»¬åœ¨æ‹‰å–dockeré•œåƒçš„æ—¶å€™ï¼Œä¼šå‘ç°æ™®éåŸºäºdebianæˆ–è€…ubuntuçš„é•œåƒéƒ½æ˜¯ä½“ç§¯å¾ˆå¤§ï¼ŒåŠ¨è¾„å‡ åæˆ–è€…ä¸Šç™¾å…†ã€‚å½“ç„¶äº†dockeré•œåƒåœ¨æ„å»ºçš„æ—¶å€™ä¼šåˆ é™¤æ—­ä¸œæ— ç”¨çš„ä¸œè¥¿å¹¶ä¸”ä½¿ç”¨ç²¾ç®€ç³»ç»Ÿæ¨¡æ¿ã€‚å°½ç®¡è¿™æ ·åšè¿˜æ˜¯å¾ˆå¤§ï¼Œèµ·ç ä¹Ÿå¾—æœ‰ä¸ªå‡ åå…†å§ã€‚æ‰€ä»¥ä½¿ç”¨ä¸€ä¸ªæœ¬èº«ä½“ç§¯å°±å°çš„æ“ä½œç³»ç»ŸåšåŸºç¡€æ¨¡æ¿æ¥æ„å»ºæ‰æ˜¯å…³é”®ã€‚AlpineLinuxæ˜¯ä¸€ä¸ªä½¿ç”¨busyboxçš„linuxæ“ä½œç³»ç»Ÿï¼Œè€Œä»–çš„ä½“ç§¯åªéœ€è¦4å…†å¤šã€‚æ‰€ä»¥å¯¹æˆ‘è¿™ç§å–œæ¬¢è½»é‡çº§çš„äººè¿˜è¯´ï¼Œè¿™çœŸæ˜¯å¥½ä¸œè¥¿å•Šï¼ å“ˆå“ˆ~åºŸè¯ä¸å¤šè¯´äº†ï¼Œè¯´è¯´è¿™ä¸ªç³»ç»Ÿçš„åŸºæœ¬ä½¿ç”¨å§ è½¯ä»¶åŒ…ç®¡ç†æ›´æ–°è½¯ä»¶åŒ…ç´¢å¼•æ–‡ä»¶ 1apk update å¦‚æœæ„Ÿè§‰ç½‘é€Ÿå¾ˆæ…¢ï¼Œé‚£å¯ä»¥å…ˆæ¢ä¸ªä¸­å›½çš„æº 12#ä¸­ç§‘å¤§çš„æº é€Ÿåº¦æ æ çš„sed -i &apos;s/dl-cdn.alpinelinux.org/mirrors.ustc.edu.cn/g&apos; /etc/apk/repositories ä¸‹é¢æˆ‘ä»¬ä»¥å®‰è£…nginxä¸ºä¾‹ å®‰è£…è½¯ä»¶åŒ… 1apk add nginx å®‰è£…è½¯ä»¶åŒ…åˆ°æœ€æ–° 1apk add --update nginx æŸ¥æ‰¾è½¯ä»¶åŒ… 1apk search nginx å¸è½½è½¯ä»¶åŒ… 1apk del nginx æœåŠ¡ç®¡ç†å¯åŠ¨Nginx 1/etc/init.d/nginx start æ·»åŠ nginxåˆ°å¯åŠ¨æœåŠ¡ä¸­ï¼Œä¸‹æ¬¡å¼€æœºè‡ªåŠ¨è¿è¡Œ 1rc-update add nginx æŠŠnginxä»å¯åŠ¨æœåŠ¡ä¸­ç§»é™¤ï¼Œä¸‹æ¬¡å¼€æœºä¸ä¼šè‡ªåŠ¨è¿è¡Œ 1rc-update del nginx ä¸€äº›ç½‘ç»œå·¥å…·æ‰€åœ¨è½¯ä»¶åŒ…telnet =&gt; busybox-extras","link":"/2019-01-17-alpinelinux/"},{"title":"ç”¨Rediså®ç°PHPå¼‚æ­¥é˜Ÿåˆ—","text":"æœ€è¿‘é¡¹ç›®ä¸­ç”¨åˆ°å¥½å¤šç”¨å¼‚æ­¥é˜Ÿåˆ—å¤„ç†çš„åå°ä»»åŠ¡ï¼Œæœ‰äº›å¿ƒå¾—ï¼Œè®°å½•ä¸€ä¸‹ã€‚ ä¸‹é¢å¼•ç”¨ç™¾åº¦ç™¾ç§‘çš„å¯¹é˜Ÿåˆ—çš„è§£é‡Šï¼š é˜Ÿåˆ—æ˜¯ä¸€ç§ç‰¹æ®Šçš„çº¿æ€§è¡¨ï¼Œç‰¹æ®Šä¹‹å¤„åœ¨äºå®ƒåªå…è®¸åœ¨è¡¨çš„å‰ç«¯ï¼ˆfrontï¼‰è¿›è¡Œåˆ é™¤æ“ä½œï¼Œè€Œåœ¨è¡¨çš„åç«¯ï¼ˆrearï¼‰è¿›è¡Œæ’å…¥æ“ä½œï¼Œå’Œæ ˆä¸€æ ·ï¼Œé˜Ÿåˆ—æ˜¯ä¸€ç§æ“ä½œå—é™åˆ¶çš„çº¿æ€§è¡¨ã€‚è¿›è¡Œæ’å…¥æ“ä½œçš„ç«¯ç§°ä¸ºé˜Ÿå°¾ï¼Œè¿›è¡Œåˆ é™¤æ“ä½œçš„ç«¯ç§°ä¸ºé˜Ÿå¤´ã€‚ç®€å•ç‚¹è®²å°±æ˜¯ï¼šå…ˆè¿›å…ˆå‡º è¦å®ç°ä¸€ä¸ªé˜Ÿåˆ—ï¼Œä½ å¯ä»¥æ ¹æ®è‡ªèº«æœåŠ¡å™¨èµ„æºï¼Œå¯é€‰æ•°æ®åº“æˆ–è€…redisæˆ–è€…å…¶ä»–æ›´é«˜çº§çš„é˜Ÿåˆ—èµ„æºæ¥å®ç°ã€‚ ç®€å•å®ç°ï¼Œå¤§æ¦‚ä»£ç æ˜¯è¿™æ ·å­çš„ï¼š 12345678910111213141516171819202122class Queue{ protected $items = []; /** * ä»é˜Ÿåˆ—å°¾éƒ¨æ’å…¥æ•°æ® * @param string $key å¯¹åˆ—åç§° */ public function push($key, $value){ isset($this-&gt;items[$key]) or $this-&gt;items[$key] = []; return array_push($this-&gt;items[$key], $value); } /** * ä»é˜Ÿåˆ—å¤´éƒ¨å–å‡ºæ•°æ® * @param string $key å¯¹åˆ—åç§° * return mixed $value æ•°æ® */ public function pop($key){ isset($this-&gt;items[$key]) or $this-&gt;items[$key] = []; return array_shift($this-&gt;items[$key]); }} æµ‹è¯•ï¼š 12345678910$queue = new Queue();var_dump($queue-&gt;pop('list_1')); //è¾“å‡º NULL$queue-&gt;push('list_1', '1');$queue-&gt;push('list_1', '2');$queue-&gt;push('list_1', '3');var_dump($queue-&gt;pop('list_1')); //è¾“å‡º string(1) \"1\"var_dump($queue-&gt;pop('list_1')); //è¾“å‡º string(1) \"2\" ä¸Šé¢æ˜¯ä¸€ä¸ªç›´æ¥å­˜å‚¨åœ¨æ•°ç»„ä¸­çš„é˜Ÿåˆ—ï¼Œåªèƒ½åœ¨ä¸€ä¸ªphpç”Ÿå‘½å‘¨æœŸä¸­ä½¿ç”¨ã€‚æˆ‘ä»¬å¯ä»¥æŠŠå­˜å‚¨çš„æ–¹å¼æ”¹æˆåˆ«çš„ï¼Œä¾‹å¦‚æ•°æ®åº“æˆ–è€…redisä»€ä¹ˆçš„ã€‚ è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨redisï¼Œç”¨åˆ°redisçš„æœ‰åºåˆ—è¡¨ï¼ˆlistï¼‰ 123456789101112131415161718192021222324class RedisQueue{ protected $client; //è¿™é‡Œä½¿ç”¨äº†predisè¿™ä¸ªåº“è¿æ¥redis public function __construct(\\Predis\\Client $client) { $this-&gt;client = $client; } /** * ä»é˜Ÿåˆ—å°¾éƒ¨æ’å…¥æ•°æ® * @param string $key å¯¹åˆ—åç§° */ public function push($key, $value){ return $this-&gt;client-&gt;rpush($key, $value); //ä»å³è¾¹å…¥é˜Ÿ } /** * ä»é˜Ÿåˆ—å¤´éƒ¨å–å‡ºæ•°æ® * @param string $key å¯¹åˆ—åç§° * @return mixed $value æ•°æ® */ public function pop($key){ return $this-&gt;client-&gt;lpop($key); //ä»å·¦è¾¹å– }} ä½ è¿˜æ˜¯å¯ä»¥ä½¿ç”¨ä¸Šé¢çš„ä¾‹å­æµ‹è¯•ä¸‹ã€‚ å½“ç„¶äº†ï¼Œè¿˜æœ‰å¾ˆå¤šæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬çš„é˜Ÿåˆ—è¦å»¶æ—¶å‡ºé˜Ÿï¼Œæˆ‘ä»¬å°±è¦ä½¿ç”¨redisçš„å¦å¤–ä¸¤ç§æ•°æ®ç±»å‹ï¼šæœ‰åºé›†åˆzsetå’Œå“ˆå¸Œhlist æœ€ç»ˆä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384class RedisQueue{ protected $client; public function __construct(\\Predis\\Client $client) { $this-&gt;client = $client; } /** * ä»é˜Ÿåˆ—å°¾éƒ¨æ’å…¥æ•°æ® * @param string $key å¯¹åˆ—åç§° * @param int $delay å»¶è¿Ÿå¤šå°‘ç§’ * @return mixed $value æ•°æ® */ public function push($key, $value, $delay = null){ if(is_null($delay)){ //ä¸ä½¿ç”¨å»¶è¿Ÿçš„æ—¶å€™è¿˜æ˜¯ä½¿ç”¨ä»¥å‰çš„rpushå…¥é˜Ÿ return $this-&gt;client-&gt;rpush($key, $value); } $time = time() + $delay; if($time &gt; time()){ //è¿˜æœªåˆ°è¯¥å…¥é˜Ÿçš„æ—¶é—´æ—¶ $hash_key = md5($this-&gt;randString(16).'_'.time().'_'.$value); //ç”Ÿæˆä¸€ä¸ªå”¯ä¸€key return $this-&gt;client-&gt;transaction(function($tx) use ($key, $time, $hash_key, $value){ //ä½¿ç”¨reidsäº‹åŠ¡ /** @var \\Predis\\Client $tx */ $tx-&gt;zadd($key.':zset', [ $hash_key=&gt;$time //è¿™é‡Œä»¥ç”Ÿæˆçš„å”¯ä¸€keyåš å¯¹è±¡member ä»¥timeåšåˆ†æ•°score ]); $tx-&gt;hset($key.':hlist', $hash_key, $value); //å¹¶ä¸”ä¿å­˜å”¯ä¸€keyå’Œå€¼çš„æ˜ å°„ $tx-&gt;expire($key.':zset', 7*86400); //æœ‰æ•ˆæœŸ7å¤© $tx-&gt;expire($key.':hlist', 7*86400); }); } } /** * å–å‡ºæ•°æ® * @param string $key å¯¹åˆ—åç§° */ public function receive($key){ if($this-&gt;getLock($key.':lock')){ //ä½¿ç”¨é”ä¿è¯çº¿ç¨‹å®‰å…¨ $keys = $this-&gt;client-&gt;zrangebyscore($key.':zset',0, time()); //æŒ‰å½“å‰æ—¶é—´å–åˆ†æ•°å°äºç­‰äºå½“å‰æ—¶é—´çš„é›†åˆå…ƒç´  if(!empty($keys)) { $message_datas = $this-&gt;client-&gt;hmget($key.':hlist', $keys); //é€šè¿‡è¿™äº›keyæ‹¿åˆ°å€¼ $this-&gt;client-&gt;transaction(function($tx) use ($key, $keys, $message_datas){ //ç»§ç»­ä½¿ç”¨redisäº‹åŠ¡ä¿è¯æ•°æ®å®Œæ•´ /** @var \\Predis\\Client $tx */ foreach ($message_datas as $i =&gt; $message_data){ $tx-&gt;rpush($key, $message_data); //è¿™æ—¶å€™æ‰æ˜¯çœŸæ­£çš„å…¥é˜Ÿ $hash_key = $keys[$i]; $tx-&gt;hdel($key.':hlist', $hash_key); //ä»hashåˆ—è¡¨åˆ é™¤å…ƒç´  $tx-&gt;zrem($key.':zset', $hash_key); //ä»é›†åˆåˆ é™¤å…ƒç´  } }); } $this-&gt;releaseLock($key.':lock');//é‡Šæ”¾é” } return $this-&gt;client-&gt;lpop($key); //å‡ºé˜Ÿ } public function getLock($key){ $ret = true; if($this-&gt;client-&gt;incr($key) != 1){ $ret = false; } $ttl = $this-&gt;client-&gt;ttl($key); if($ttl == -1) { //forever $this-&gt;client-&gt;expire($key, 60); } return $ret; } public function releaseLock($key){ $this-&gt;client-&gt;del($key); } protected function randString($length){ $str = ''; $strPol = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefghijklmnopqrstuvwxyz\"; $max = strlen($strPol) - 1; for ($i = 0; $i &lt; $length; $i++) { $str .= $strPol[mt_rand(0, $max)]; } return $str; }} ä¸»è¦çœ‹ä¸Šé¢å…¥é˜Ÿï¼ˆpushï¼‰å’Œå‡ºé˜Ÿï¼ˆreceiveï¼‰æ–¹æ³•ï¼Œæˆ‘ä»£ç å†™äº†è¯¦ç»†çš„æ³¨é‡Šã€‚","link":"/2019-03-29-php-queue/"},{"title":"ç©è½¬ElasticSearchå…¨æ–‡æœç´¢","text":"ç©è½¬ElasticSearchå…¨æ–‡æœç´¢ï¼Œåšä¸ªç¬”è®°ã€‚ è¿è¡ŒElasticSearchæœåŠ¡ä¸ºäº†çœå»ç¹æ‚çš„å®‰è£…ï¼Œè·³è¿‡ä¸‡æ¶çš„ç¯å¢ƒï¼Œæˆ‘ä»¬ä½¿ç”¨Dockerå®¹å™¨æ¥è·‘ElasticSearchçš„æœåŠ¡ã€‚ æˆ‘ä»¬ä½¿ç”¨å®˜æ–¹çš„elasticsearch:5.6.16-alpineä½œä¸ºåŸºç¡€é•œåƒï¼Œå¦å¤–æ·»åŠ ä¸€ä¸ªä¸­æ–‡åˆ†è¯æ’ä»¶elasticsearch-ik æˆ‘ä»¬çš„Dockerfileå†…å®¹å¦‚ä¸‹ï¼Œå¾ˆç®€å•ï¼Œåªéœ€ä¸¤è¡Œå“Ÿï¼š 12FROM elasticsearch:5.6.16-alpineRUN elasticsearch-plugin install https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v5.6.16/elasticsearch-analysis-ik-5.6.16.zip æ„å»ºé•œåƒï¼š 1docker build -t heropoo/elasticsearch-ik . è¿è¡Œå®¹å™¨ï¼š 1docker run -d --name elasticsearch -p 9200:9200 -p 9300:9300 -e &quot;discovery.type=single-node&quot; heropoo/elasticsearch-ik å› ä¸ºElasticSearchæä¾›äº†REST APIï¼Œæˆ‘ä»¬ç›´æ¥å¯ä»¥ç”¨æµè§ˆå™¨è®¿é—® http://localhost:9200 çœ‹çœ‹æœåŠ¡æ˜¯å¦æ­£å¸¸ã€‚ åŸºæœ¬æ¦‚å¿µElastic æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼æ•°æ®åº“ï¼Œå…è®¸å¤šå°æœåŠ¡å™¨ååŒå·¥ä½œï¼Œæ¯å°æœåŠ¡å™¨å¯ä»¥è¿è¡Œå¤šä¸ª Elastic å®ä¾‹ã€‚å•ä¸ª Elastic å®ä¾‹ç§°ä¸ºä¸€ä¸ªèŠ‚ç‚¹ï¼ˆnodeï¼‰ã€‚ä¸€ç»„èŠ‚ç‚¹æ„æˆä¸€ä¸ªé›†ç¾¤ï¼ˆclusterï¼‰ã€‚ IndexElastic ä¼šç´¢å¼•æ‰€æœ‰å­—æ®µï¼Œç»è¿‡å¤„ç†åå†™å…¥ä¸€ä¸ªåå‘ç´¢å¼•ã€‚æŸ¥æ‰¾æ•°æ®çš„æ—¶å€™ï¼Œç›´æ¥æŸ¥æ‰¾è¯¥ç´¢å¼•ã€‚æ‰€ä»¥ï¼ŒElastic æ•°æ®ç®¡ç†çš„é¡¶å±‚å•ä½å°±å«åš Indexï¼ˆç´¢å¼•ï¼‰ã€‚ æŸ¥çœ‹å½“å‰èŠ‚ç‚¹çš„æ‰€æœ‰ Index 1curl -X GET &apos;http://localhost:9200/_cat/indices?v&apos; DocumentIndex é‡Œé¢å•æ¡çš„è®°å½•ç§°ä¸º Documentï¼ˆæ–‡æ¡£ï¼‰ã€‚è®¸å¤šæ¡ Document æ„æˆäº†ä¸€ä¸ª Indexã€‚Document ä½¿ç”¨ JSON æ ¼å¼è¡¨ç¤ºã€‚ä¾‹å¦‚ï¼š 12345{ &quot;user&quot;: &quot;å¼ ä¸‰&quot;, &quot;title&quot;: &quot;å·¥ç¨‹å¸ˆ&quot;, &quot;desc&quot;: &quot;æ•°æ®åº“ç®¡ç†&quot;} åŒä¸€ä¸ª Index é‡Œé¢çš„ Documentï¼Œä¸è¦æ±‚æœ‰ç›¸åŒçš„å­—æ®µç»“æ„ï¼Œä½†æ˜¯æœ€å¥½ä¿æŒç›¸åŒï¼Œè¿™æ ·æœ‰åˆ©äºæé«˜æœç´¢æ•ˆç‡ã€‚ Typeä¸åŒçš„ Type åº”è¯¥æœ‰ç›¸ä¼¼çš„å­—æ®µç»“æ„ï¼Œä¸¾ä¾‹æ¥è¯´ï¼Œidå­—æ®µä¸èƒ½åœ¨è¿™ä¸ªç»„æ˜¯å­—ç¬¦ä¸²ï¼Œåœ¨å¦ä¸€ä¸ªç»„æ˜¯æ•°å€¼ã€‚è¿™æ˜¯ä¸å…³ç³»å‹æ•°æ®åº“çš„è¡¨çš„ä¸€ä¸ªåŒºåˆ«ã€‚æ€§è´¨å®Œå…¨ä¸åŒçš„æ•°æ®ï¼ˆæ¯”å¦‚productså’Œlogsï¼‰åº”è¯¥å­˜æˆä¸¤ä¸ª Indexï¼Œè€Œä¸æ˜¯ä¸€ä¸ª Index é‡Œé¢çš„ä¸¤ä¸ª Typeï¼ˆè™½ç„¶å¯ä»¥åšåˆ°ï¼‰ã€‚ ä¸‹é¢çš„å‘½ä»¤å¯ä»¥åˆ—å‡ºæ¯ä¸ª Index æ‰€åŒ…å«çš„ Type 1curl &apos;localhost:9200/_mapping?pretty=true&apos; prettyå‚æ•°æ˜¯ä¼˜åŒ–æ˜¾ç¤ºç»“æœæ˜“äºæŸ¥çœ‹ Indexæ“ä½œæŸ¥çœ‹å½“å‰èŠ‚ç‚¹çš„æ‰€æœ‰ Index1curl -X GET &apos;http://localhost:9200/_cat/indices?v&apos; æ–°å»ºIndex1curl -X PUT &apos;http://localhost:9200/weather&apos; åˆ é™¤Index1curl -X DELETE &apos;http://localhost:9200/weather&apos; æ–°å»ºä¸€ä¸ª Indexï¼ŒæŒ‡å®šéœ€è¦åˆ†è¯çš„å­—æ®µ123456789101112131415161718192021222324curl -X PUT &apos;localhost:9200/accounts&apos; -d &apos;{ &quot;mappings&quot;: { &quot;person&quot;: { &quot;properties&quot;: { &quot;user&quot;: { &quot;type&quot;: &quot;text&quot;, &quot;analyzer&quot;: &quot;ik_max_word&quot;, &quot;search_analyzer&quot;: &quot;ik_max_word&quot; }, &quot;title&quot;: { &quot;type&quot;: &quot;text&quot;, &quot;analyzer&quot;: &quot;ik_max_word&quot;, &quot;search_analyzer&quot;: &quot;ik_max_word&quot; }, &quot;desc&quot;: { &quot;type&quot;: &quot;text&quot;, &quot;analyzer&quot;: &quot;ik_max_word&quot;, &quot;search_analyzer&quot;: &quot;ik_max_word&quot; } } } }}&apos; ä¸Šé¢ä»£ç ä¸­ï¼Œé¦–å…ˆæ–°å»ºä¸€ä¸ªåç§°ä¸ºaccountsçš„ Indexï¼Œé‡Œé¢æœ‰ä¸€ä¸ªåç§°ä¸ºpersonçš„ Typeã€‚personæœ‰ä¸‰ä¸ªå­—æ®µ userã€titleã€desc è¿™ä¸‰ä¸ªå­—æ®µéƒ½æ˜¯ä¸­æ–‡ï¼Œè€Œä¸”ç±»å‹éƒ½æ˜¯æ–‡æœ¬ï¼ˆtextï¼‰ï¼Œæ‰€ä»¥éœ€è¦æŒ‡å®šä¸­æ–‡åˆ†è¯å™¨ï¼Œä¸èƒ½ä½¿ç”¨é»˜è®¤çš„è‹±æ–‡åˆ†è¯å™¨ã€‚ æ•°æ®æ“ä½œæ–°å¢è®°å½•å‘æŒ‡å®šçš„ /Index/Type å‘é€ PUT è¯·æ±‚ï¼Œå°±å¯ä»¥åœ¨ Index é‡Œé¢æ–°å¢ä¸€æ¡è®°å½• 123456curl -X PUT &apos;localhost:9200/accounts/person/1&apos; -d &apos;{ &quot;user&quot;: &quot;å¼ ä¸‰&quot;, &quot;title&quot;: &quot;å·¥ç¨‹å¸ˆ&quot;, &quot;desc&quot;: &quot;æ•°æ®åº“ç®¡ç†&quot;}&apos; æ–°å¢è®°å½•çš„æ—¶å€™ï¼Œä¹Ÿå¯ä»¥ä¸æŒ‡å®š Idï¼Œè¿™æ—¶è¦æ”¹æˆ POST è¯·æ±‚ 123456curl -X POST &apos;localhost:9200/accounts/person&apos; -d &apos;{ &quot;user&quot;: &quot;æå››&quot;, &quot;title&quot;: &quot;å·¥ç¨‹å¸ˆ&quot;, &quot;desc&quot;: &quot;è½¯ä»¶å·¥ç¨‹å¸ˆ&quot;}&apos; å…¶å®PUTå°±æ˜¯å­˜åœ¨æ—¶ä¿®æ”¹ï¼Œä¸å­˜åœ¨æ—¶åˆ›å»ºã€‚ æŸ¥çœ‹è®°å½•å‘/Index/Type/Idå‘å‡º GET è¯·æ±‚ï¼Œå°±å¯ä»¥æŸ¥çœ‹è¿™æ¡è®°å½• 1curl &apos;localhost:9200/accounts/person/1?pretty=true&apos; åˆ é™¤è®°å½•1curl -X DELETE &apos;localhost:9200/accounts/person/1&apos; æ›´æ–°è®°å½•å‚è€ƒä¸Šé¢åˆ›å»ºæ“ä½œï¼Œç”¨PUTæ–¹æ³• 123456curl -X PUT &apos;localhost:9200/accounts/person/1&apos; -d &apos;{ &quot;user&quot;: &quot;å¼ ä¸‰1&quot;, &quot;title&quot;: &quot;å·¥ç¨‹å¸ˆ1&quot;, &quot;desc&quot;: &quot;æ•°æ®åº“ç®¡ç†1&quot;}&apos; æ•°æ®æŸ¥è¯¢è¿”å›æ‰€æœ‰è®°å½•1curl &apos;localhost:9200/accounts/person/_search&apos; å…¨æ–‡æœç´¢1234curl &apos;localhost:9200/accounts/person/_search&apos; -d &apos;{ &quot;query&quot; : { &quot;match&quot; : { &quot;desc&quot; : &quot;æ•°æ®åº“&quot; }}}&apos; é€»è¾‘è¿ç®—å¦‚æœæœ‰å¤šä¸ªæœç´¢å…³é”®å­—ï¼Œ Elastic è®¤ä¸ºå®ƒä»¬æ˜¯orå…³ç³» 1234curl &apos;localhost:9200/accounts/person/_search&apos; -d &apos;{ &quot;query&quot; : { &quot;match&quot; : { &quot;desc&quot; : &quot;è½¯ä»¶ ç³»ç»Ÿ&quot; }}}&apos; å¦‚æœè¦æ‰§è¡Œå¤šä¸ªå…³é”®è¯çš„andæœç´¢ï¼Œå¿…é¡»ä½¿ç”¨å¸ƒå°”æŸ¥è¯¢ 1234567891011curl &apos;localhost:9200/accounts/person/_search&apos; -d &apos;{ &quot;query&quot;: { &quot;bool&quot;: { &quot;must&quot;: [ { &quot;match&quot;: { &quot;desc&quot;: &quot;è½¯ä»¶&quot; } }, { &quot;match&quot;: { &quot;desc&quot;: &quot;ç³»ç»Ÿ&quot; } } ] } }}&apos; æå®š~ å‚è€ƒï¼šhttp://www.ruanyifeng.com/blog/2017/08/elasticsearch.html","link":"/2019-04-09-elasticsearch/"},{"title":"å¸¸ç”¨nginx webé…ç½®","text":"å¸¸ç”¨nginxå¯¹äºwebé¡¹ç›®é…ç½®æ•´ç†ï¼Œåšä¸ªç¬”è®°ã€‚ php webé¡¹ç›®é…ç½®1234567891011121314151617181920212223242526272829303132333435363738server { listen 80; listen [::]:80; # è®¾ç½®ä¸Šä¼ æœ€å¤§ä¸º5MB client_max_body_size 5m; root /srv/www/wechat/public; index index.html index.php; server_name example.com; location / { try_files $uri $uri/ =404; } # æ”¯æŒphp location ~ \\.php$ { # Check that the PHP script exists before passing it try_files $fastcgi_script_name =404; fastcgi_index index.php; include fastcgi.conf; # With php-fpm (or other unix sockets): fastcgi_pass unix:/var/run/php/php7.2-fpm.sock; # # With php-cgi (or other tcp sockets): # fastcgi_pass 127.0.0.1:9000; } # deny access to .htaccess files, if Apache&apos;s document root # concurs with nginx&apos;s one # location ~ /\\.ht { deny all; }} php webé¡¹ç›®é…ç½® æ”¯æŒlaravelã€symfonyã€Yii2å•å…¥å£12345678... location / { # First attempt to serve request as file, then # as directory, then fall back to displaying a 404. #try_files $uri $uri/ =404; # æ³¨é‡Šä¸Šé¢è¿™å¥ï¼Œä½¿ç”¨ä¸‹é¢è¿™å¥ try_files $uri $uri/ /index.php?$query_string; }... php webé¡¹ç›®é…ç½® æ”¯æŒThinkPHP12345678910111213141516171819202122... location ~ \\.php$ { # regex to split $uri to $fastcgi_script_name and $fastcgi_path fastcgi_split_path_info ^(.+\\.php)(/.+)$; # Check that the PHP script exists before passing it try_files $fastcgi_script_name =404; # Bypass the fact that try_files resets $fastcgi_path_info # see: http://trac.nginx.org/nginx/ticket/321 set $path_info $fastcgi_path_info; fastcgi_param PATH_INFO $path_info; # ThinkPHPä¾èµ–PATH_INFOè¿™ä¸ªç¯å¢ƒå˜é‡ fastcgi_index index.php; include fastcgi.conf; # With php-fpm (or other unix sockets): fastcgi_pass unix:/var/run/php/php7.2-fpm.sock; # # With php-cgi (or other tcp sockets): # fastcgi_pass 127.0.0.1:9000; }... php webé¡¹ç›®é…ç½® ç¦æ­¢è®¿é—®ä¸Šä¼ ç›®å½•ä¸‹çš„phpæ–‡ä»¶1234567... # è¿™ä¸ªå—locationè¦æ”¾åœ¨ location ~ \\.php$ ä¹‹å‰ location ~ ^/uploads/.*\\.php$ { # æ‰€æœ‰/uploadsæ–‡ä»¶ç›®å½•ä¸‹çš„.phpæ–‡ä»¶éƒ½è¢«ç¦æ­¢è®¿é—® #deny all; # è¿”å›403 return 404; #è¿”å›404 }...","link":"/2019-05-22-nginx-web-conf/"},{"title":"å…³äºå¤§æ–‡ä»¶ä¸Šä¼ ","text":"æœ€è¿‘åœ¨åšè§†é¢‘ä¸Šä¼ ï¼Œæˆ‘ä»¬ä½¿ç”¨åˆ‡ç‰‡ä¸Šä¼ å¤§æ–‡ä»¶ï¼Œåšä¸ªç¬”è®°ã€‚ æ€è·¯ ä½¿ç”¨jsè¯»å–formè¡¨å•ä¸­é€‰æ‹©çš„fileï¼Œè®¡ç®—æ–‡ä»¶md5å€¼ï¼Œå¹¶ä¸Šä¼ md5å€¼åˆ°æœåŠ¡ç«¯ï¼Œæ£€æŸ¥æ–‡ä»¶æ˜¯å¦å·²ä¸Šä¼ è¿‡ï¼ˆç±»ä¼¼ç§’ä¼ åŠŸèƒ½ï¼‰ è‹¥æ–‡ä»¶æœªä¸Šä¼ è¿‡ï¼ŒæŒ‰ç…§å…¶å¤§å°åˆ‡æˆ1MBå¤§å°çš„å—ï¼Œå°äº1MBçš„ä¸ç”¨åˆ‡ ç”¨ajaxå¼‚æ­¥æäº¤åˆ‡å¥½çš„å—ä¸Šä¼ è‡³æœåŠ¡ç«¯ï¼ˆä¸€ä¸ªå—ä¸€ä¸ªè¯·æ±‚ï¼Œä¸é˜»å¡ï¼Œå¤šçº¿ç¨‹ï¼‰ å½“ä¸Šä¼ å®Œæˆæ‰€æœ‰åˆ‡å—ï¼Œå‘èµ·ä¸€ä¸ªåˆå¹¶æ–‡ä»¶çš„è¯·æ±‚ï¼ŒæœåŠ¡ç«¯è¿›è¡Œå‰é¢ä¸Šä¼ çš„æ–‡ä»¶å—çš„åˆå¹¶ï¼Œåˆå¹¶å®Œæˆå³ä¸Šä¼ å®Œæˆã€‚ å®ç°jsè®¡ç®—æ–‡ä»¶md5ä½¿ç”¨spark-md5.js,æ®è¯´è¿™ä¸ªåº“ä½¿ç”¨çš„æ˜¯ä¸–ç•Œä¸Šæœ€å¿«çš„md5ç®—æ³•ã€‚ jså¯¹æ–‡ä»¶åˆ‡ç‰‡å¹¶ä½¿ç”¨ajaxä¸Šä¼ åˆ‡ç‰‡ 12345678910111213141516171819202122232425262728//...let size = file.size; //è·å–æ–‡ä»¶å¤§å°const shardSize = 1024 * 1024; // å—å¤§å°1MBlet shardCount = Math.ceil(size/shardSize); //å¯åˆ‡æˆçš„å—æ•°for(let i = 0; i &lt; shardCount; i++){ let start = i * shardSize, end = Math.min(size, start + shardSize); let form = new FormData(); form.append('file', file.slice(start, end)); //ç”¨sliceæ–¹æ³•åˆ‡ç‰‡ form.append('size', end - start); form.append('name', name); form.append('total', shardCount); form.append('md5', file_md5); //æ–‡ä»¶md5å€¼ form.append('index', i); //ç¬¬å‡ å— $.ajax({ url: 'upload.php?type=shard', type: \"POST\", data: form, // async: false, //æ˜¯å¦å¼‚æ­¥ä¸Šä¼ ï¼Œé»˜è®¤true processData: false, //å¾ˆé‡è¦ï¼Œå‘Šè¯‰jqueryä¸è¦å¯¹formè¿›è¡Œå¤„ç† contentType: false, //å¾ˆé‡è¦ï¼ŒæŒ‡å®šä¸ºfalseæ‰èƒ½å½¢æˆæ­£ç¡®çš„Content-Type success: function (res) { // æˆåŠŸå›è°ƒ } }} phpç«¯ä¿å­˜åˆ‡ç‰‡ 1234567891011121314151617$path = __DIR__ . '/uploads';$file = $_FILES['file'];$total = $_POST['total'];$index = $_POST['index'];$size = $_POST['size'];$dst_file = $path . '/' . $name . '-' . $total . ':' . $index; // åˆ‡ç‰‡æ–‡ä»¶å­˜å‚¨çš„æ–‡ä»¶å if ($file[\"error\"] &gt; 0) { echo json_encode(['code'=&gt;400, 'msg'=&gt;$file[\"error\"]]);die;} else { $res = move_uploaded_file($file['tmp_name'], $dst_file); if ($res) { file_put_contents($dst_file . '.info', $size); // åˆ‡ç‰‡ä¸Šä¼ æˆåŠŸï¼Œå†™ä¸€ä¸ªä¿å­˜å…¶å¤§å°çš„æ–‡ä»¶ï¼Œåç»­åˆå¹¶æ˜¯æ ¡éªŒæ–‡ä»¶ç”¨çš„åˆ° echo json_encode(['code'=&gt;200, 'msg'=&gt;'shard ok']);die; } else { echo json_encode(['code'=&gt;400, 'msg'=&gt;'shard move_uploaded_file error']);die; }} phpç«¯åˆå¹¶ 1234567891011121314151617181920212223242526272829303132//...function mergeFile($name, $total, &amp;$msg){ // æ ¡éªŒåˆ‡ç‰‡æ–‡ä»¶æ˜¯å¦éƒ½ä¸Šä¼ å®Œæˆï¼Œæ˜¯å¦å®Œæ•´ for ($i = 0; $i &lt; $total; $i++) { if (!file_exists($name . '-' . $total . ':' . $i . '.info') || !file_exists($name . '-' . $total . ':' . $i)) { $msg = \"shard error $i\"; return false; } else if (filesize($name . '-' . $total . ':' . $i) != file_get_contents($name . '-' . $total . ':' . $i . '.info')) { $msg = \"shard size error $i\"; return false; } } @unlink($name); if (file_exists($name . '.lock')) { //åŠ é” é˜²æ­¢æœ‰å…¶ä»–è¿›ç¨‹å†™æ–‡ä»¶ï¼Œé€ æˆæ–‡ä»¶æŸå $msg = 'on lock'; return false; } touch($name . '.lock'); $file = fopen($name, 'a+'); for ($i = 0; $i &lt; $total; $i++) { //æŒ‰åˆ‡ç‰‡é¡ºåºå†™å…¥æ–‡ä»¶ $shardFile = fopen($name . '-' . $total . ':' . $i, 'r'); $shardData = fread($shardFile, filesize($name . '-' . $total . ':' . $i)); fwrite($file, $shardData); fclose($shardFile); unlink($name . '-' . $total . ':' . $i); unlink($name . '-' . $total . ':' . $i . '.info'); } fclose($file); unlink($name . '.lock'); return true;} æˆ‘ä¹Ÿå†™å¥½äº†ä¸€ä¸ªdemoï¼Œä¼ é€é—¨ ä¸‹é¢æ˜¯è¿™ä¸ªdemoçš„æ•ˆæœå›¾ï¼š è¿™ä¸ªdemoæœ‰äº›æ–¹é¢è¿˜ä¸å¤Ÿå®Œå–„ï¼Œåç»­æŒç»­å®Œå–„å§ï½","link":"/2019-05-23-upload-large-file/"},{"title":"åœ¨ç½‘é¡µä¸Šä½¿ç”¨MathJaxæ¸²æŸ“LaTexæ ¼å¼æ•°å­¦å…¬å¼","text":"æœ€è¿‘åœ¨çœ‹ä¸€äº›æœºå™¨å­¦ä¹ ç®—æ³•çš„ä¸œè¥¿ï¼Œç”¨åˆ°å¥½å¤šæ•°å­¦å…¬å¼ï¼Œå‘ç°æœ‰ä¸ªå¾ˆå¼ºå¤§çš„jsåº“å¯ä»¥å®Œç¾çš„æ¸²æŸ“LaTexæ ¼å¼æ•°å­¦å…¬å¼ï¼Œå€¼å¾—æ¨èä¸‹ã€‚ ä½¿ç”¨æ–¹æ³•ï¼šåœ¨ä½ çš„htmlæ¨¡ç‰ˆä¸­å¼•å…¥è¿™ä¸ªjs 1&lt;script type=&quot;text/javascript&quot; src=&quot;//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML&quot;&gt;&lt;/script&gt; å†™å‡ ä¸ªå…¬å¼æµ‹è¯•ä¸‹ï¼š è´¨èƒ½æ–¹ç¨‹æ˜¯$$E=mc^2$$ ä»£ç ï¼š 1$$E=mc^2$$ k-meansç®—æ³•çš„ä»£ä»·å‡½æ•°:$$J(c,\\mu )=\\sum_{i=1}^{k}\\left | x^{(i)}-\\mu _{c^{(i)}} \\right |^{2}$$ ä»£ç ï¼š 1$$J(c,\\mu )=\\sum_{i=1}^{k}\\left \\| x^{(i)}-\\mu _{c^{(i)}} \\right \\|^{2}$$ æ„Ÿå—æ•ˆæœè¿˜å¯ä»¥ğŸ˜‰ğŸ˜›ğŸ˜› å†é™„é€ä¸€ä¸ªåœ¨çº¿çš„å…¬å¼ç¼–è¾‘å™¨https://www.codecogs.com/latex/eqneditor.php","link":"/2019-05-27-math-jax/"},{"title":"Linuxè½¯è¿æ¥å’Œç¡¬é“¾æ¥","text":"Linuxè½¯è¿æ¥å’Œç¡¬é“¾æ¥ï¼Œä¸€ä¸ªç»å¸¸å‚»å‚»åˆ†ä¸æ¸…æ¥šçš„æ¦‚å¿µï¼Œç°åœ¨æˆ‘ä»¬ä»”ç»†ç†ä¸€ç†ã€‚ 1.Linuxé“¾æ¥æ¦‚å¿µLinuxé“¾æ¥åˆ†ä¸¤ç§ï¼Œä¸€ç§è¢«ç§°ä¸ºç¡¬é“¾æ¥ï¼ˆHard Linkï¼‰ï¼Œå¦ä¸€ç§è¢«ç§°ä¸ºç¬¦å·é“¾æ¥ï¼ˆSymbolic Linkï¼‰ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œlnå‘½ä»¤äº§ç”Ÿç¡¬é“¾æ¥ã€‚ ã€ç¡¬è¿æ¥ã€‘ ç¡¬è¿æ¥æŒ‡é€šè¿‡ç´¢å¼•èŠ‚ç‚¹æ¥è¿›è¡Œè¿æ¥ã€‚åœ¨Linuxçš„æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œä¿å­˜åœ¨ç£ç›˜åˆ†åŒºä¸­çš„æ–‡ä»¶ä¸ç®¡æ˜¯ä»€ä¹ˆç±»å‹éƒ½ç»™å®ƒåˆ†é…ä¸€ä¸ªç¼–å·ï¼Œç§°ä¸ºç´¢å¼•èŠ‚ç‚¹å·(Inode Index)ã€‚åœ¨Linuxä¸­ï¼Œå¤šä¸ªæ–‡ä»¶åæŒ‡å‘åŒä¸€ç´¢å¼•èŠ‚ç‚¹æ˜¯å­˜åœ¨çš„ã€‚ä¸€èˆ¬è¿™ç§è¿æ¥å°±æ˜¯ç¡¬è¿æ¥ã€‚ç¡¬è¿æ¥çš„ä½œç”¨æ˜¯å…è®¸ä¸€ä¸ªæ–‡ä»¶æ‹¥æœ‰å¤šä¸ªæœ‰æ•ˆè·¯å¾„åï¼Œè¿™æ ·ç”¨æˆ·å°±å¯ä»¥å»ºç«‹ç¡¬è¿æ¥åˆ°é‡è¦æ–‡ä»¶ï¼Œä»¥é˜²æ­¢â€œè¯¯åˆ â€çš„åŠŸèƒ½ã€‚å…¶åŸå› å¦‚ä¸Šæ‰€è¿°ï¼Œå› ä¸ºå¯¹åº”è¯¥ç›®å½•çš„ç´¢å¼•èŠ‚ç‚¹æœ‰ä¸€ä¸ªä»¥ä¸Šçš„è¿æ¥ã€‚åªåˆ é™¤ä¸€ä¸ªè¿æ¥å¹¶ä¸å½±å“ç´¢å¼•èŠ‚ç‚¹æœ¬èº«å’Œå…¶å®ƒçš„è¿æ¥ï¼Œåªæœ‰å½“æœ€åä¸€ä¸ªè¿æ¥è¢«åˆ é™¤åï¼Œæ–‡ä»¶çš„æ•°æ®å—åŠç›®å½•çš„è¿æ¥æ‰ä¼šè¢«é‡Šæ”¾ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ–‡ä»¶çœŸæ­£åˆ é™¤çš„æ¡ä»¶æ˜¯ä¸ä¹‹ç›¸å…³çš„æ‰€æœ‰ç¡¬è¿æ¥æ–‡ä»¶å‡è¢«åˆ é™¤ã€‚ ã€è½¯è¿æ¥ã€‘ å¦å¤–ä¸€ç§è¿æ¥ç§°ä¹‹ä¸ºç¬¦å·è¿æ¥ï¼ˆSymbolic Linkï¼‰ï¼Œä¹Ÿå«è½¯è¿æ¥ã€‚è½¯é“¾æ¥æ–‡ä»¶æœ‰ç±»ä¼¼äºWindowsçš„å¿«æ·æ–¹å¼ã€‚å®ƒå®é™…ä¸Šæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ–‡ä»¶ã€‚åœ¨ç¬¦å·è¿æ¥ä¸­ï¼Œæ–‡ä»¶å®é™…ä¸Šæ˜¯ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«çš„æœ‰å¦ä¸€æ–‡ä»¶çš„ä½ç½®ä¿¡æ¯ã€‚ 2.é€šè¿‡å®éªŒåŠ æ·±ç†è§£12345678[root@Linux]$ touch f1 #åˆ›å»ºä¸€ä¸ªæµ‹è¯•æ–‡ä»¶f1[root@Linux]$ ln f1 f2 #åˆ›å»ºf1çš„ä¸€ä¸ªç¡¬è¿æ¥æ–‡ä»¶f2[root@Linux]$ ln -s f1 f3 #åˆ›å»ºf1çš„ä¸€ä¸ªç¬¦å·è¿æ¥æ–‡ä»¶f3[root@Linux]$ ls -li # -iå‚æ•°æ˜¾ç¤ºæ–‡ä»¶çš„inodeèŠ‚ç‚¹ä¿¡æ¯total 09797648 -rw-r--r-- 2 root root 0 Apr 21 08:11 f19797648 -rw-r--r-- 2 root root 0 Apr 21 08:11 f29797649 lrwxrwxrwx 1 root root 2 Apr 21 08:11 f3 -&gt; f1 ä»ä¸Šé¢çš„ç»“æœä¸­å¯ä»¥çœ‹å‡ºï¼Œç¡¬è¿æ¥æ–‡ä»¶f2ä¸åŸæ–‡ä»¶f1çš„inodeèŠ‚ç‚¹ç›¸åŒï¼Œå‡ä¸º9797648ï¼Œç„¶è€Œç¬¦å·è¿æ¥æ–‡ä»¶çš„inodeèŠ‚ç‚¹ä¸åŒã€‚ 123456789101112[root@Linux]$ echo \"I am f1 file\" &gt;&gt;f1[root@Linux]$ cat f1I am f1 file[root@Linux]$ cat f2I am f1 file[root@Linux]$ cat f3I am f1 file[root@Linux]$ rm -f f1[root@Linux]$ cat f2I am f1 file[root@Linux]$ cat f3cat: f3: No such file or directory é€šè¿‡ä¸Šé¢çš„æµ‹è¯•å¯ä»¥çœ‹å‡ºï¼šå½“åˆ é™¤åŸå§‹æ–‡ä»¶f1åï¼Œç¡¬è¿æ¥f2ä¸å—å½±å“ï¼Œä½†æ˜¯ç¬¦å·è¿æ¥f1æ–‡ä»¶æ— æ•ˆã€‚ 3.æ€»ç»“ä¾æ­¤æ‚¨å¯ä»¥åšä¸€äº›ç›¸å…³çš„æµ‹è¯•ï¼Œå¯ä»¥å¾—åˆ°ä»¥ä¸‹å…¨éƒ¨ç»“è®ºï¼š 1).åˆ é™¤ç¬¦å·è¿æ¥f3,å¯¹f1,f2æ— å½±å“ï¼› 2).åˆ é™¤ç¡¬è¿æ¥f2ï¼Œå¯¹f1,f3ä¹Ÿæ— å½±å“ï¼› 3).åˆ é™¤åŸæ–‡ä»¶f1ï¼Œå¯¹ç¡¬è¿æ¥f2æ²¡æœ‰å½±å“ï¼Œå¯¼è‡´ç¬¦å·è¿æ¥f3å¤±æ•ˆï¼› 4).åŒæ—¶åˆ é™¤åŸæ–‡ä»¶f1,ç¡¬è¿æ¥f2ï¼Œæ•´ä¸ªæ–‡ä»¶ä¼šçœŸæ­£çš„è¢«åˆ é™¤ã€‚ æœ¬æ–‡æ‘˜è‡ªäº’è”ç½‘ï¼Œä¾µåˆ ã€‚","link":"/2019-05-29-linux-symbolic-link/"},{"title":"MySQLæƒé™ç®¡ç†","text":"MySQLä¸­çš„è´¦å·ä¸æƒé™ç®¡ç† æƒé™ç³»ç»Ÿçš„å·¥ä½œåŸç†MySQLæƒé™ç³»ç»Ÿé€šè¿‡ä¸‹é¢ä¸¤ä¸ªé˜¶æ®µè¿›è¡Œè®¤è¯ï¼š å¯¹è¿æ¥çš„ç”¨æˆ·è¿›è¡Œèº«ä»½è®¤è¯ï¼Œåˆæ³•çš„ç”¨æˆ·é€šè¿‡è®¤è¯ã€ä¸åˆæ³•çš„ç”¨æˆ·æ‹’ç»è¿æ¥ã€‚ å¯¹é€šè¿‡è®¤è¯çš„åˆæ³•ç”¨æˆ·èµ‹äºˆç›¸åº”çš„æƒé™ï¼Œç”¨æˆ·å¯ä»¥åœ¨è¿™äº›æƒé™èŒƒå›´å†…å¯¹æ•°æ®åº“åšç›¸åº”çš„æ“ä½œã€‚ å¯¹äºèº«ä»½ï¼ŒMySQLæ˜¯é€šè¿‡IPåœ°å€å’Œç”¨æˆ·åè”åˆè¿›è¡Œç¡®è®¤çš„ï¼Œä¾‹å¦‚MySQLå®‰è£…é»˜è®¤åˆ›å»ºçš„ç”¨æˆ·root@localhostè¡¨ç¤ºç”¨æˆ·rootåªèƒ½ä»æœ¬åœ°ï¼ˆlocalhostï¼‰è¿›è¡Œè¿æ¥æ‰å¯ä»¥é€šè¿‡è®¤è¯ï¼Œæ­¤ç”¨æˆ·ä»å…¶ä»–ä»»ä½•ä¸»æœºå¯¹æ•°æ®åº“è¿›è¡Œçš„è¿æ¥éƒ½å°†è¢«æ‹’ç»ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒåŒæ ·çš„ä¸€ä¸ªç”¨æˆ·åï¼Œå¦‚æœæ¥è‡ªä¸åŒçš„IPåœ°å€ï¼Œåˆ™MySQLå°†å…¶è§†ä¸ºä¸åŒçš„ç”¨æˆ·ã€‚ MySQLçš„æƒé™è¡¨åœ¨æ•°æ®åº“å¯åŠ¨åœ°æ—¶å€™å°±è½½å…¥å†…å­˜ï¼Œå½“ç”¨æˆ·é€šè¿‡èº«ä»½è®¤è¯åï¼Œå°±åœ¨å†…å­˜ä¸­è¿›è¡Œç›¸åº”æƒé™çš„å­˜å–ï¼Œè¿™æ ·ï¼Œæ­¤ç”¨æˆ·å°±å¯ä»¥åœ¨æ•°æ®åº“ä¸­åšæƒé™èŒƒå›´å†…çš„å„ç§æ“ä½œäº†ã€‚ æƒé™è¡¨ç³»ç»Ÿä¼šç”¨åˆ°åå«â€œmysqlâ€æ•°æ®åº“ï¼ˆå®‰è£…MySQLæ—¶è¢«åˆ›å»ºï¼‰ä¸­userè¡¨ä½œä¸ºæƒé™è¡¨ æˆ‘ä»¬çœ‹çœ‹userè¡¨çš„ç»“æ„ï¼ˆæ³¨ï¼šæœ¬æ–‡ç¤ºä¾‹ä½¿ç”¨çš„æ˜¯MySQL5.7.25ç‰ˆæœ¬ï¼‰ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051mysql&gt; desc user;+------------------------+-----------------------------------+------+-----+-----------------------+-------+| Field | Type | Null | Key | Default | Extra |+------------------------+-----------------------------------+------+-----+-----------------------+-------+| Host | char(60) | NO | PRI | | || User | char(32) | NO | PRI | | || Select_priv | enum(&apos;N&apos;,&apos;Y&apos;) | NO | | N | || Insert_priv | enum(&apos;N&apos;,&apos;Y&apos;) | NO | | N | || Update_priv | enum(&apos;N&apos;,&apos;Y&apos;) | NO | | N | || Delete_priv | enum(&apos;N&apos;,&apos;Y&apos;) | NO | | N | || Create_priv | enum(&apos;N&apos;,&apos;Y&apos;) | NO | | N | || Drop_priv | enum(&apos;N&apos;,&apos;Y&apos;) | NO | | N | || Reload_priv | enum(&apos;N&apos;,&apos;Y&apos;) | NO | | N | || Shutdown_priv | enum(&apos;N&apos;,&apos;Y&apos;) | NO | | N | || Process_priv | enum(&apos;N&apos;,&apos;Y&apos;) | NO | | N | || File_priv | enum(&apos;N&apos;,&apos;Y&apos;) | NO | | N | || Grant_priv | enum(&apos;N&apos;,&apos;Y&apos;) | NO | | N | || References_priv | enum(&apos;N&apos;,&apos;Y&apos;) | NO | | N | || Index_priv | enum(&apos;N&apos;,&apos;Y&apos;) | NO | | N | || Alter_priv | enum(&apos;N&apos;,&apos;Y&apos;) | NO | | N | || Show_db_priv | enum(&apos;N&apos;,&apos;Y&apos;) | NO | | N | || Super_priv | enum(&apos;N&apos;,&apos;Y&apos;) | NO | | N | || Create_tmp_table_priv | enum(&apos;N&apos;,&apos;Y&apos;) | NO | | N | || Lock_tables_priv | enum(&apos;N&apos;,&apos;Y&apos;) | NO | | N | || Execute_priv | enum(&apos;N&apos;,&apos;Y&apos;) | NO | | N | || Repl_slave_priv | enum(&apos;N&apos;,&apos;Y&apos;) | NO | | N | || Repl_client_priv | enum(&apos;N&apos;,&apos;Y&apos;) | NO | | N | || Create_view_priv | enum(&apos;N&apos;,&apos;Y&apos;) | NO | | N | || Show_view_priv | enum(&apos;N&apos;,&apos;Y&apos;) | NO | | N | || Create_routine_priv | enum(&apos;N&apos;,&apos;Y&apos;) | NO | | N | || Alter_routine_priv | enum(&apos;N&apos;,&apos;Y&apos;) | NO | | N | || Create_user_priv | enum(&apos;N&apos;,&apos;Y&apos;) | NO | | N | || Event_priv | enum(&apos;N&apos;,&apos;Y&apos;) | NO | | N | || Trigger_priv | enum(&apos;N&apos;,&apos;Y&apos;) | NO | | N | || Create_tablespace_priv | enum(&apos;N&apos;,&apos;Y&apos;) | NO | | N | || ssl_type | enum(&apos;&apos;,&apos;ANY&apos;,&apos;X509&apos;,&apos;SPECIFIED&apos;) | NO | | | || ssl_cipher | blob | NO | | NULL | || x509_issuer | blob | NO | | NULL | || x509_subject | blob | NO | | NULL | || max_questions | int(11) unsigned | NO | | 0 | || max_updates | int(11) unsigned | NO | | 0 | || max_connections | int(11) unsigned | NO | | 0 | || max_user_connections | int(11) unsigned | NO | | 0 | || plugin | char(64) | NO | | mysql_native_password | || authentication_string | text | YES | | NULL | || password_expired | enum(&apos;N&apos;,&apos;Y&apos;) | NO | | N | || password_last_changed | timestamp | YES | | NULL | || password_lifetime | smallint(5) unsigned | YES | | NULL | || account_locked | enum(&apos;N&apos;,&apos;Y&apos;) | NO | | N | |+------------------------+-----------------------------------+------+-----+-----------------------+-------+45 rows in set (0.00 sec) å½“ç”¨æˆ·è¿›è¡Œè¿æ¥çš„æ—¶å€™ï¼Œæƒé™è¡¨çš„å­˜å–è¿‡ç¨‹æœ‰ä»¥ä¸‹ç°ä¸ªé˜¶æ®µã€‚ å…ˆä»userè¡¨ä¸­çš„Hostã€Userã€authentication_string(å¯†ç )ã€password_expiredå’Œpassword_lifetimeè¿™å‡ ä¸ªå­—æ®µä¸­åˆ¤æ–­è¿æ¥çš„IPã€ç”¨æˆ·åå’Œå¯†ç æ˜¯å¦å­˜åœ¨äºè¡¨ä¸­ï¼Œå¦‚æœå­˜åœ¨ï¼Œåˆ™é€šè¿‡èº«ä»½éªŒè¯ï¼Œå¦åˆ™æ‹’ç»è¿æ¥ã€‚ å¦‚æœéªŒè¯é€šè¿‡ï¼Œå†é€šè¿‡ä»¥_privç»“å°¾çš„é‚£äº›æšä¸¾å­—æ®µï¼ˆè¿™äº›éƒ½æ˜¯ç”¨æˆ·çš„æƒé™å¼€å…³ï¼ˆY/Nï¼‰ï¼‰å¾—åˆ°ç”¨æˆ·æ‹¥æœ‰çš„æƒé™ã€‚ è´¦å·ç®¡ç†è´¦å·ç®¡ç†ä¸»è¦åŒ…æ‹¬è´¦å·çš„åˆ›å»ºã€æƒé™æ›´æ”¹å’Œè´¦å·çš„åˆ é™¤ã€‚ç”¨æˆ·è¿æ¥æ•°æ®åº“çš„ç¬¬ä¸€æ­¥éƒ½ä»è´¦å·åˆ›å»ºå¼€å§‹ã€‚ æœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥ç”¨æ¥åˆ›å»ºè´¦å·ï¼šä½¿ç”¨GRANTè¯­æ³•åˆ›å»ºæˆ–è€…ç›´æ¥æ“ä½œæˆæƒè¡¨ï¼Œä½†æ›´æ¨èä½¿ç”¨ç¬¬ä¸€ç§æ–¹æ³•ï¼Œå› ä¸ºæ“ä½œç®€å•ï¼Œå‡ºé”™å‡ ç‡æ›´å°‘ã€‚ æˆ‘ä»¬ç”¨å‡ ä¸ªä¾‹å­æ¥è¯´æ˜å§ï¼š åˆ›å»ºç”¨æˆ· åˆ›å»ºç”¨æˆ·tomï¼Œæƒé™ä¸ºå¯ä»¥åœ¨æ‰€æœ‰æ•°æ®åº“ä¸Šæ‰§è¡Œæ‰€æœ‰æƒé™ï¼Œåªèƒ½ä»æœ¬åœ°è¿›è¡Œè¿æ¥ã€‚ 1mysql&gt; GRANT ALL PRIVILEGES ON *.* TO tom@localhost IDENTIFIED BY &apos;tompassword&apos; WITH GRANT OPTION; å¦‚æœä½ æ‰§è¡Œè¿™ä¸ªè¯­å¥ç¢°åˆ°ä»¥ä¸‹é”™è¯¯ï¼šERROR 1819 (HY000): Your password does not satisfy the current policy requirementsã€‚è¿™ä¸ªæ˜¯å¯†ç ç­–ç•¥çš„é—®é¢˜ï¼Œè¯·è®¾ç½®æ¯”è¾ƒå¤æ‚çš„å¯†ç ï¼Œæˆ–è€…ä¿®æ”¹å¯†ç ç­–ç•¥ï¼Œè¿™é‡Œå°±ä¸è¯¦ç»†è¯´äº†ã€‚ GRANTå‘½ä»¤è¯´æ˜ï¼š ALL PRIVILEGESæ˜¯è¡¨ç¤ºæ‰€æœ‰æƒé™ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨selectã€updateç­‰æƒé™ã€‚ ONç”¨æ¥æŒ‡å®šæƒé™é’ˆå¯¹å“ªäº›åº“å’Œè¡¨ï¼Œæ ¼å¼æ˜¯æ•°æ®åº“å.è¡¨åï¼Œè¿™é‡Œ*.*è¡¨ç¤ºæ‰€æœ‰æ•°æ®åº“å’Œæ‰€æœ‰è¡¨ã€‚ TO è¡¨ç¤ºå°†æƒé™èµ‹äºˆæŸä¸ªç”¨æˆ·ã€‚tom@localhostï¼Œè¡¨ç¤ºtomç”¨æˆ·ï¼Œ@åé¢æ¥é™åˆ¶çš„ä¸»æœºï¼Œå¯ä»¥æ˜¯IPã€IPæ®µã€åŸŸåä»¥åŠ%ï¼Œ%è¡¨ç¤ºä»»ä½•åœ°æ–¹ã€‚æ³¨æ„ï¼šè¿™é‡Œ%æœ‰çš„ç‰ˆæœ¬ä¸åŒ…æ‹¬æœ¬åœ°ï¼Œä»¥å‰ç¢°åˆ°è¿‡ç»™æŸä¸ªç”¨æˆ·è®¾ç½®äº†%å…è®¸ä»»ä½•åœ°æ–¹ç™»å½•ï¼Œä½†æ˜¯åœ¨æœ¬åœ°ç™»å½•ä¸äº†ï¼Œè¿™ä¸ªå’Œç‰ˆæœ¬æœ‰å…³ç³»ï¼Œé‡åˆ°è¿™ä¸ªé—®é¢˜å†åŠ ä¸€ä¸ªlocalhostçš„ç”¨æˆ·å°±å¯ä»¥äº†ã€‚ IDENTIFIED BY æŒ‡å®šç”¨æˆ·çš„ç™»å½•å¯†ç ï¼Œ è¿™é‡Œ'tompassword'å°±æ˜¯ç”¨æˆ·tomçš„å¯†ç ã€‚ WITH GRANT OPTION è¿™ä¸ªé€‰é¡¹è¡¨ç¤ºè¯¥ç”¨æˆ·å¯ä»¥å°†è‡ªå·±æ‹¥æœ‰çš„æƒé™æˆæƒç»™åˆ«äººã€‚æ³¨æ„ï¼šç»å¸¸æœ‰äººåœ¨åˆ›å»ºæ“ä½œç”¨æˆ·çš„æ—¶å€™ä¸æŒ‡å®šWITH GRANT OPTIONé€‰é¡¹å¯¼è‡´åæ¥è¯¥ç”¨æˆ·ä¸èƒ½ä½¿ç”¨GRANTå‘½ä»¤åˆ›å»ºç”¨æˆ·æˆ–è€…ç»™å…¶å®ƒç”¨æˆ·æˆæƒã€‚ å¤‡æ³¨ï¼šå¯ä»¥ä½¿ç”¨GRANTé‡å¤ç»™ç”¨æˆ·æ·»åŠ æƒé™ï¼Œæƒé™å åŠ ï¼Œæ¯”å¦‚ä½ å…ˆç»™ç”¨æˆ·æ·»åŠ ä¸€ä¸ªselectæƒé™ï¼Œç„¶ååˆç»™ç”¨æˆ·æ·»åŠ ä¸€ä¸ªinsertæƒé™ï¼Œé‚£ä¹ˆè¯¥ç”¨æˆ·å°±åŒæ—¶æ‹¥æœ‰äº†selectå’Œinsertæƒé™ã€‚ ä½¿ç”¨GRANTæ“ä½œç”¨æˆ·æƒé™ä¹‹åï¼Œå†ä½¿ç”¨FLUSH PRIVILEGESå‘½ä»¤æ¥åˆ·æ–°æƒé™ä½¿å…¶ç«‹å³ç”Ÿæ•ˆ 12mysql&gt; FLUSH PRIVILEGES;Query OK, 0 rows affected (0.00 sec) æŸ¥çœ‹ç”¨æˆ·çš„æƒé™ ç›´æ¥ä½¿ç”¨SHOW GRANTSé»˜è®¤æŸ¥çœ‹root@localhostçš„æƒé™ 12345678mysql&gt; SHOW GRANTS;+---------------------------------------------------------------------+| Grants for root@localhost |+---------------------------------------------------------------------+| GRANT ALL PRIVILEGES ON *.* TO &apos;root&apos;@&apos;localhost&apos; WITH GRANT OPTION || GRANT PROXY ON &apos;&apos;@&apos;&apos; TO &apos;root&apos;@&apos;localhost&apos; WITH GRANT OPTION |+---------------------------------------------------------------------+2 rows in set (0.01 sec) æŸ¥çœ‹æŸä¸ªç”¨æˆ·çš„æƒé™ 1234567mysql&gt; SHOW GRANTS FOR tom@localhost;+----------------------------------------------------------------------+| Grants for tom@localhost |+----------------------------------------------------------------------+| GRANT ALL PRIVILEGES ON *.* TO &apos;tom&apos;@&apos;localhost&apos; WITH GRANT OPTION |+----------------------------------------------------------------------+1 row in set (0.00 sec) æ”¶å›æƒé™ 12mysql&gt; REVOKE DELETE ON *.* FROM &apos;tom&apos;@&apos;localhost&apos;;Query OK, 0 rows affected (0.00 sec) å¯¹ç”¨æˆ·è´¦æˆ·é‡å‘½å 12mysql&gt; RENAME USER tom@localhost to jerry@localhost;Query OK, 0 rows affected (0.00 sec) åˆ é™¤ç”¨æˆ· 12mysql&gt; DROP USER jerry@localhost;Query OK, 0 rows affected (0.01 sec) ä¿®æ”¹å’Œé‡ç½®å¯†ç  ç”¨SET PASSWORDå‘½ä»¤ä¿®æ”¹å¯†ç  12mysql&gt; SET PASSWORD FOR root@localhost = PASSWORD(&apos;123456&apos;);Query OK, 0 rows affected, 1 warning (0.01 sec) ç›´æ¥ä¿®æ”¹userè¡¨ 123456mysql&gt; UPDATE user SET authentication_string=PASSWORD(&apos;123456root&apos;) WHERE user=&apos;root&apos; and host=&apos;localhost&apos;;Query OK, 1 row affected, 1 warning (0.00 sec)Rows matched: 1 Changed: 1 Warnings: 1mysql&gt; FLUSH PRIVILEGES;Query OK, 0 rows affected (0.00 sec) åœ¨æœªç™»å½•mysqlçš„æƒ…å†µä¸‹ç”¨mysqladminå‘½ä»¤ä¿®æ”¹å¯†ç  1$ mysqladmin -uroot -p123456root password 123321 åœ¨ä¸¢å¤±rootå¯†ç çš„æ—¶å€™å…³é—­mysqlæœåŠ¡ï¼ˆæ ¹æ®ä½ è‡ªå·±çš„æ“ä½œç³»ç»Ÿè‡ªè¡Œå…³é—­ï¼‰ï¼Œç„¶åè·³è¿‡æƒé™è®¤è¯å¯åŠ¨mysqlæœåŠ¡ 1$ mysqld_safe --skip-grant-tables &amp; æ— å¯†ç ç™»é™† 1$ mysql -uroot è¿›å…¥ä¹‹åä½¿ç”¨ä¸Šé¢ç›´æ¥ä¿®æ”¹userè¡¨çš„æ–¹æ³•ä¿®æ”¹rootç”¨æˆ·çš„å¯†ç  æœ€åæ€æ‰mysqld_safeå’Œmysqldçš„è¿›ç¨‹ é‡æ–°å¯åŠ¨mysqlæœåŠ¡ï¼Œç”¨æ–°çš„å¯†ç ç™»é™†å§ã€‚","link":"/2019-06-10-mysql-user/"},{"title":"é˜³å…‰æ˜åªšï¼Œæ—¶å…‰é™å¥½","text":"èµ·äº†ä¸ªè€æ—©ï¼Œå»ç»ƒè½¦ï¼Œæœ¬æ¥ç¡ä¸å¥½ï¼Œè¿˜æœ‰ç‚¹æƒ…ç»ªï¼Œåœ¨ä¸‹è½¦è¿‡æ¡¥æ—¶çªç„¶å‘ç°æ—©ä¸Šçš„é˜³å…‰æ ¼å¤–çš„å¥½ã€‚","link":"/2019-06-15-good-morning/"},{"title":"SSHä½¿ç”¨å¯†ç è‡ªåŠ¨ç™»å½•è„šæœ¬","text":"åˆ†äº«ä¸€ä¸ªsshä½¿ç”¨å¯†ç ç™»å½•çš„è„šæœ¬ å†™ä¸ªè„šæœ¬autologin.shå†…å®¹å¦‚ä¸‹ï¼š 1234567891011#!/usr/bin/expect -fset user [lindex $argv 0]set host [lindex $argv 1]set password [lindex $argv 2]set timeout -1spawn ssh $user@$hostexpect \"password:*\"send \"$password\\r\"interactexpect eof å¹¶ç»™è¿™ä¸ªè„šæœ¬å¯æ‰§è¡Œæƒé™ 1chmod +x ./autologin.sh ä½¿ç”¨æ–¹æ³•ï¼šå‡å¦‚å¹³æ—¶ä½¿ç”¨ssh root@127.0.0.1,ç„¶åè¾“å…¥å¯†ç 123456ç™»å½• ç°åœ¨ç”¨è¿™ä¸ªè„šæœ¬å°±æ˜¯ 1./autologin.sh root 127.0.0.1 123456 æŒºæ–¹ä¾¿çš„å§ï½","link":"/2019-08-28-ssh-autologin/"}],"tags":[{"name":"å¬é£é›¨","slug":"å¬é£é›¨","link":"/tags/%E5%90%AC%E9%A3%8E%E9%9B%A8/"},{"name":"API","slug":"API","link":"/tags/API/"},{"name":"PHP","slug":"PHP","link":"/tags/PHP/"},{"name":"HTTP","slug":"HTTP","link":"/tags/HTTP/"},{"name":"å²æœˆé™å¥½","slug":"å²æœˆé™å¥½","link":"/tags/%E5%B2%81%E6%9C%88%E9%9D%99%E5%A5%BD/"},{"name":"JavaScript","slug":"JavaScript","link":"/tags/JavaScript/"},{"name":"ç™¾åº¦åœ°å›¾","slug":"ç™¾åº¦åœ°å›¾","link":"/tags/%E7%99%BE%E5%BA%A6%E5%9C%B0%E5%9B%BE/"},{"name":"HTML5","slug":"HTML5","link":"/tags/HTML5/"},{"name":"AJAX","slug":"AJAX","link":"/tags/AJAX/"},{"name":"Linux","slug":"Linux","link":"/tags/Linux/"},{"name":"EFI","slug":"EFI","link":"/tags/EFI/"},{"name":"Archlinux","slug":"Archlinux","link":"/tags/Archlinux/"},{"name":"Win10","slug":"Win10","link":"/tags/Win10/"},{"name":"Ubuntu","slug":"Ubuntu","link":"/tags/Ubuntu/"},{"name":"MSYS2","slug":"MSYS2","link":"/tags/MSYS2/"},{"name":"Git","slug":"Git","link":"/tags/Git/"},{"name":"è™šæ‹ŸåŒ–","slug":"è™šæ‹ŸåŒ–","link":"/tags/%E8%99%9A%E6%8B%9F%E5%8C%96/"},{"name":"å®¹å™¨","slug":"å®¹å™¨","link":"/tags/%E5%AE%B9%E5%99%A8/"},{"name":"Docker","slug":"Docker","link":"/tags/Docker/"},{"name":"UEditor","slug":"UEditor","link":"/tags/UEditor/"},{"name":"äº’è”ç½‘","slug":"äº’è”ç½‘","link":"/tags/%E4%BA%92%E8%81%94%E7%BD%91/"},{"name":"Rust","slug":"Rust","link":"/tags/Rust/"},{"name":"Webhook","slug":"Webhook","link":"/tags/Webhook/"},{"name":"Composer","slug":"Composer","link":"/tags/Composer/"},{"name":"æœç´¢å¼•æ“","slug":"æœç´¢å¼•æ“","link":"/tags/%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E/"},{"name":"ç«™å†…æœç´¢","slug":"ç«™å†…æœç´¢","link":"/tags/%E7%AB%99%E5%86%85%E6%90%9C%E7%B4%A2/"},{"name":"Yii2","slug":"Yii2","link":"/tags/Yii2/"},{"name":"jupyter","slug":"jupyter","link":"/tags/jupyter/"},{"name":"python","slug":"python","link":"/tags/python/"},{"name":"github-issue","slug":"github-issue","link":"/tags/github-issue/"},{"name":"gitment","slug":"gitment","link":"/tags/gitment/"},{"name":"SSH","slug":"SSH","link":"/tags/SSH/"},{"name":"MySQL","slug":"MySQL","link":"/tags/MySQL/"},{"name":"JSON","slug":"JSON","link":"/tags/JSON/"},{"name":"pcntl","slug":"pcntl","link":"/tags/pcntl/"},{"name":"AlpineLinux","slug":"AlpineLinux","link":"/tags/AlpineLinux/"},{"name":"Queue","slug":"Queue","link":"/tags/Queue/"},{"name":"Redis","slug":"Redis","link":"/tags/Redis/"},{"name":"å…¨æ–‡æœç´¢","slug":"å…¨æ–‡æœç´¢","link":"/tags/%E5%85%A8%E6%96%87%E6%90%9C%E7%B4%A2/"},{"name":"ElasticSearch","slug":"ElasticSearch","link":"/tags/ElasticSearch/"},{"name":"nginx","slug":"nginx","link":"/tags/nginx/"},{"name":"æ•°å­¦","slug":"æ•°å­¦","link":"/tags/%E6%95%B0%E5%AD%A6/"},{"name":"MathJax","slug":"MathJax","link":"/tags/MathJax/"},{"name":"LaTex","slug":"LaTex","link":"/tags/LaTex/"}],"categories":[{"name":"å¬é£é›¨","slug":"å¬é£é›¨","link":"/categories/%E5%90%AC%E9%A3%8E%E9%9B%A8/"},{"name":"PHP","slug":"PHP","link":"/categories/PHP/"},{"name":"å²æœˆé™å¥½","slug":"å²æœˆé™å¥½","link":"/categories/%E5%B2%81%E6%9C%88%E9%9D%99%E5%A5%BD/"},{"name":"JavaScript","slug":"JavaScript","link":"/categories/JavaScript/"},{"name":"Linux","slug":"Linux","link":"/categories/Linux/"},{"name":"Docker","slug":"Docker","link":"/categories/Docker/"},{"name":"èµ„æº","slug":"èµ„æº","link":"/categories/%E8%B5%84%E6%BA%90/"},{"name":"HTML5","slug":"JavaScript/HTML5","link":"/categories/JavaScript/HTML5/"},{"name":"äº’è”ç½‘","slug":"äº’è”ç½‘","link":"/categories/%E4%BA%92%E8%81%94%E7%BD%91/"},{"name":"Git","slug":"Git","link":"/categories/Git/"},{"name":"Rust","slug":"Rust","link":"/categories/Rust/"},{"name":"æœç´¢å¼•æ“","slug":"æœç´¢å¼•æ“","link":"/categories/%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E/"},{"name":"Git","slug":"Linux/Git","link":"/categories/Linux/Git/"},{"name":"python","slug":"python","link":"/categories/python/"},{"name":"github-issue","slug":"github-issue","link":"/categories/github-issue/"},{"name":"SSH","slug":"SSH","link":"/categories/SSH/"},{"name":"PHP","slug":"Docker/PHP","link":"/categories/Docker/PHP/"},{"name":"MySQL","slug":"MySQL","link":"/categories/MySQL/"},{"name":"Queue","slug":"Queue","link":"/categories/Queue/"},{"name":"å…¨æ–‡æœç´¢","slug":"å…¨æ–‡æœç´¢","link":"/categories/%E5%85%A8%E6%96%87%E6%90%9C%E7%B4%A2/"},{"name":"nginx","slug":"nginx","link":"/categories/nginx/"},{"name":"PHP","slug":"JavaScript/PHP","link":"/categories/JavaScript/PHP/"},{"name":"æ•°å­¦","slug":"æ•°å­¦","link":"/categories/%E6%95%B0%E5%AD%A6/"},{"name":"PHP","slug":"Git/PHP","link":"/categories/Git/PHP/"},{"name":"PHP","slug":"Queue/PHP","link":"/categories/Queue/PHP/"},{"name":"JavaScript","slug":"æ•°å­¦/JavaScript","link":"/categories/%E6%95%B0%E5%AD%A6/JavaScript/"}]}